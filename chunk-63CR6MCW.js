import{c as z,f as Y}from"./chunk-2OTJ67ZJ.js";import{a as ee}from"./chunk-KR7YXPEX.js";import"./chunk-MZ3EZVY4.js";import{$a as F,Ab as m,Ba as i,Bb as x,Id as J,Kc as q,Ld as K,Mb as L,Mc as V,Ob as j,Od as Q,Pd as W,Ra as k,Sd as X,Td as Z,Va as p,Vb as y,W as v,ba as N,ca as O,cb as d,db as e,eb as t,fb as c,ia as f,mc as A,nc as T,ob as g,sc as R,sd as B,td as G,vc as U,wd as H,xa as u,zb as n,zd as $}from"./chunk-2BMW4ZRB.js";function ie(a,l){a&1&&c(0,"div",61)}function ne(a,l){a&1&&(e(0,"span",62),n(1," Activo "),t())}function re(a,l){a&1&&(e(0,"span",63),n(1," Inactivo "),t())}function oe(a,l){if(a&1&&(e(0,"div",64),c(1,"lucide-icon",65),e(2,"p"),n(3,"No hay rese\xF1as todav\xEDa."),t()()),a&2){let r=g(2);i(),d("img",r.icons.MessageSquare)}}function ae(a,l){if(a&1&&c(0,"lucide-icon",76),a&2){let r=g(3);d("img",r.icons.Star)}}function le(a,l){if(a&1&&c(0,"lucide-icon",77),a&2){let r=g(3);d("img",r.icons.Star)}}function de(a,l){if(a&1&&(e(0,"div",66)(1,"div",67)(2,"div",68)(3,"div",69),n(4," P "),t(),e(5,"div")(6,"p",70),n(7,"Paciente An\xF3nimo"),t(),e(8,"p",71),n(9),L(10,"date"),t()()(),e(11,"div",72),p(12,ae,1,1,"lucide-icon",73)(13,le,1,1,"lucide-icon",74),t()(),e(14,"p",75),n(15),t()()),a&2){let r=l.$implicit,s=g(2);i(9),m(j(10,4,r.createdAt,"longDate")),i(3),d("ngForOf",s.getStarRating(r.score)),i(),d("ngForOf",s.getEmptyStars(r.score)),i(2),x('"',r.comment,'"')}}function se(a,l){if(a&1&&(e(0,"div",5)(1,"div",6)(2,"div",7)(3,"div",8)(4,"div",9),c(5,"img",10),p(6,ie,1,0,"div",11),t(),e(7,"div",12)(8,"div",13)(9,"h1",14),n(10),t(),p(11,ne,2,0,"span",15)(12,re,2,0,"span",16),t(),e(13,"div",17)(14,"p",18),c(15,"lucide-icon",19),n(16),t(),e(17,"p",20),c(18,"lucide-icon",19),n(19),t()(),e(20,"div",21)(21,"a",22),c(22,"lucide-icon",23),e(23,"span",24),n(24),t()(),e(25,"a",25),c(26,"lucide-icon",26),e(27,"span",24),n(28),t()()()(),e(29,"div",27)(30,"div",28)(31,"p",29),n(32,"Rating"),t(),e(33,"div",30),c(34,"lucide-icon",31),e(35,"span",32),n(36),t()()(),e(37,"div",28)(38,"p",29),n(39,"Reviews"),t(),e(40,"p",33),n(41),t()()()()()(),e(42,"div",34)(43,"div",35)(44,"div",36)(45,"h2",37),n(46,"Satisfaction (NPS)"),t(),e(47,"div",38),c(48,"lucide-icon",39),t()(),e(49,"div",40)(50,"div",41),N(),e(51,"svg",42),c(52,"circle",43)(53,"circle",44),t(),O(),e(54,"div",45)(55,"span",46),n(56),t(),e(57,"p",47),n(58,"NPS Score"),t()()(),e(59,"div",48)(60,"div",49)(61,"p",50),n(62,"Promotores"),t(),e(63,"p",51),n(64),t()(),e(65,"div",52)(66,"p",53),n(67,"Detractores"),t(),e(68,"p",51),n(69),t()()(),e(70,"p",54),n(71," El Net Promoter Score indica la lealtad y satisfacci\xF3n de tus pacientes. "),t()()(),e(72,"div",55)(73,"div",56)(74,"h2",37),n(75,"Rese\xF1as de pacientes"),t(),e(76,"span",57),n(77),t()(),e(78,"div",58),p(79,oe,4,1,"div",59)(80,de,16,7,"div",60),t()()()()),a&2){let r,s,b,_,h,w,S,D,E,C,I,M,P,o=g();i(5),d("src",((r=o.doctor())==null?null:r.photoUrl)||"assets/images/placeholder-doctor.png",u),i(),d("ngIf",(s=o.doctor())==null?null:s.active),i(4),x(" ",(b=o.doctor())==null?null:b.fullName," "),i(),d("ngIf",(_=o.doctor())==null?null:_.active),i(),d("ngIf",!((h=o.doctor())!=null&&h.active)),i(3),d("img",o.icons.Award),i(),x(" CMP: ",(w=o.doctor())==null?null:w.cmp," "),i(2),d("img",o.icons.MapPin),i(),x(" DNI: ",(S=o.doctor())==null?null:S.dni," "),i(2),d("href","mailto:"+((D=o.doctor())==null?null:D.email),u),i(),d("img",o.icons.Mail),i(2),m((E=o.doctor())==null?null:E.email),i(),d("href","https://wa.me/"+((C=o.doctor())==null?null:C.phone),u),i(),d("img",o.icons.Phone),i(2),m((I=o.doctor())==null?null:I.phone),i(6),d("img",o.icons.Star),i(2),m((M=o.doctor())==null?null:M.rating),i(5),m((P=o.doctor())==null?null:P.reviewsCount),i(7),d("img",o.icons.TrendingUp),i(5),F("stroke-dasharray",552.92)("stroke-dashoffset",552.92-552.92*(o.nps()+100)/200),i(3),m(o.nps()),i(8),m(o.promotersCount()),i(5),m(o.detractorsCount()),i(8),x(" ",o.reviews().length," comentarios "),i(2),d("ngIf",o.reviews().length===0),i(),d("ngForOf",o.reviews())}}var te=class a{route=v(z);doctorsService=v(ee);icons={User:Q,Star:J,MapPin:G,Phone:$,Mail:B,Award:V,ArrowLeft:q,TrendingUp:K,Users:W,MessageSquare:H};doctor=f(null);reviews=f([]);nps=f(0);isLoading=f(!0);promotersCount=y(()=>this.reviews().filter(l=>l.score>=9).length);detractorsCount=y(()=>this.reviews().filter(l=>l.score<=6).length);ngOnInit(){let l=this.route.snapshot.paramMap.get("id");l&&this.loadDoctorData(l)}loadDoctorData(l){this.isLoading.set(!0);let r=this.doctorsService.doctors().find(s=>s.id===l);r?(this.doctor.set(r),r.doctorId?this.doctorsService.getDoctorReviews(r.doctorId).subscribe({next:s=>{this.reviews.set(s),this.nps.set(this.doctorsService.calculateNPS(s)),this.isLoading.set(!1)},error:()=>this.isLoading.set(!1)}):this.isLoading.set(!1)):this.isLoading.set(!1)}getStarRating(l){let r=Math.round(l/2);return Array(r).fill(0)}getEmptyStars(l){let r=Math.round(l/2);return Array(5-r).fill(0)}static \u0275fac=function(r){return new(r||a)};static \u0275cmp=k({type:a,selectors:[["app-doctor-detail"]],decls:6,vars:2,consts:[[1,"max-w-7xl","mx-auto","px-4","sm:px-6","lg:px-8","py-8"],[1,"mb-8","flex","items-center","justify-between"],["routerLink","/app/doctors",1,"flex","items-center","text-sm","font-medium","text-gray-500","hover:text-gray-700","transition-colors"],[1,"w-4","h-4","mr-2",3,"img"],["class","space-y-8 animate-fade-in",4,"ngIf"],[1,"space-y-8","animate-fade-in"],[1,"bg-white","rounded-[32px]","shadow-sm","border","border-gray-100","overflow-hidden"],[1,"p-8","sm:p-12"],[1,"flex","flex-col","md:flex-row","gap-8","items-start"],[1,"relative"],["alt","",1,"w-32","h-32","md:w-48","md:h-48","rounded-3xl","object-cover","shadow-lg",3,"src"],["class","absolute -top-2 -right-2 bg-green-500 w-6 h-6 rounded-full border-4 border-white",4,"ngIf"],[1,"flex-1","space-y-4"],[1,"flex","items-center","gap-4"],[1,"text-3xl","md:text-4xl","font-black","text-gray-900","leading-tight"],["class","inline-flex items-center rounded-full bg-green-50 px-3 py-1 text-sm font-bold text-green-700 ring-1 ring-inset ring-green-600/20",4,"ngIf"],["class","inline-flex items-center rounded-full bg-gray-50 px-3 py-1 text-sm font-bold text-gray-600 ring-1 ring-inset ring-gray-500/10",4,"ngIf"],[1,"flex","flex-wrap","items-center","gap-x-6","gap-y-2","mt-1"],[1,"text-lg","text-primary","font-semibold","flex","items-center"],[1,"w-5","h-5","mr-2",3,"img"],[1,"text-lg","text-gray-500","font-semibold","flex","items-center"],[1,"flex","flex-wrap","gap-x-8","gap-y-4","pt-6","mt-2","border-t","border-gray-100"],[1,"flex","items-center","text-gray-600","hover:text-primary","transition-colors","group",3,"href"],[1,"w-5","h-5","mr-3","text-gray-400","group-hover:text-primary",3,"img"],[1,"font-medium"],["target","_blank",1,"flex","items-center","text-gray-600","hover:text-green-600","transition-colors","group",3,"href"],[1,"w-5","h-5","mr-3","text-gray-400","group-hover:text-green-500",3,"img"],[1,"w-full","md:w-auto","bg-gray-50","rounded-3xl","p-6","flex","md:flex-col","justify-around","gap-6"],[1,"text-center"],[1,"text-sm","text-gray-500","font-medium"],[1,"flex","items-center","justify-center","mt-1"],[1,"w-5","h-5","text-yellow-400","fill-current","mr-1",3,"img"],[1,"text-2xl","font-bold","text-gray-900"],[1,"text-2xl","font-bold","text-gray-900","mt-1"],[1,"grid","grid-cols-1","lg:grid-cols-3","gap-8"],[1,"lg:col-span-1","bg-white","rounded-[32px]","shadow-sm","border","border-gray-100","p-8"],[1,"flex","items-center","justify-between","mb-8"],[1,"text-xl","font-bold","text-gray-900"],[1,"bg-primary","p-2","rounded-xl","text-primary"],[1,"w-6","h-6",3,"img"],[1,"flex","flex-col","items-center","py-4"],[1,"relative","flex","items-center","justify-center"],[1,"w-48","h-48"],["cx","96","cy","96","r","88","stroke","#f3f4f6","stroke-width","12","fill","none"],["cx","96","cy","96","r","88","stroke","#2563eb","stroke-width","12","fill","none","stroke-linecap","round",1,"transition-all","duration-1000","ease-out"],[1,"absolute","text-center"],[1,"text-5xl","font-black","text-gray-900"],[1,"text-xs","font-bold","text-gray-400","tracking-widest","uppercase","mt-1"],[1,"mt-8","grid","grid-cols-2","gap-4","w-full"],[1,"bg-green-50","rounded-2xl","p-4","text-center"],[1,"text-xs","font-semibold","text-green-600","uppercase"],[1,"text-xl","font-bold","text-gray-900","mt-1"],[1,"bg-red-50","rounded-2xl","p-4","text-center"],[1,"text-xs","font-semibold","text-red-600","uppercase"],[1,"mt-6","text-sm","text-center","text-gray-500","leading-relaxed"],[1,"lg:col-span-2","bg-white","rounded-[32px]","shadow-sm","border","border-gray-100","overflow-hidden","flex","flex-col"],[1,"p-8","border-b","border-gray-50","flex","items-center","justify-between"],[1,"bg-gray-100","text-gray-600","text-xs","font-bold","px-3","py-1","rounded-full","uppercase","tracking-wider"],[1,"flex-1","overflow-y-auto","max-h-[600px]","p-8","space-y-6"],["class","flex flex-col items-center justify-center py-12 text-gray-400",4,"ngIf"],["class","bg-gray-50/50 rounded-3xl p-6 border border-gray-100/50 transition-hover",4,"ngFor","ngForOf"],[1,"absolute","-top-2","-right-2","bg-green-500","w-6","h-6","rounded-full","border-4","border-white"],[1,"inline-flex","items-center","rounded-full","bg-green-50","px-3","py-1","text-sm","font-bold","text-green-700","ring-1","ring-inset","ring-green-600/20"],[1,"inline-flex","items-center","rounded-full","bg-gray-50","px-3","py-1","text-sm","font-bold","text-gray-600","ring-1","ring-inset","ring-gray-500/10"],[1,"flex","flex-col","items-center","justify-center","py-12","text-gray-400"],[1,"w-12","h-12","mb-4","opacity-20",3,"img"],[1,"bg-gray-50/50","rounded-3xl","p-6","border","border-gray-100/50","transition-hover"],[1,"flex","justify-between","items-start","mb-4"],[1,"flex","items-center"],[1,"w-10","h-10","rounded-full","bg-primary","flex","items-center","justify-center","text-primary","font-bold","mr-3"],[1,"text-sm","font-bold","text-gray-900"],[1,"text-xs","text-gray-400"],[1,"flex","text-yellow-400"],["class","w-4 h-4 fill-current",3,"img",4,"ngFor","ngForOf"],["class","w-4 h-4",3,"img",4,"ngFor","ngForOf"],[1,"text-gray-700","leading-relaxed","italic"],[1,"w-4","h-4","fill-current",3,"img"],[1,"w-4","h-4",3,"img"]],template:function(r,s){r&1&&(e(0,"div",0)(1,"div",1)(2,"a",2),c(3,"lucide-icon",3),n(4," Volver a especialistas "),t()(),p(5,se,81,27,"div",4),t()),r&2&&(i(3),d("img",s.icons.ArrowLeft),i(2),d("ngIf",!s.isLoading()&&s.doctor()))},dependencies:[U,A,T,Y,Z,X,R],styles:[".animate-fade-in[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeIn .6s ease-out forwards}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0;transform:translateY(10px)}to{opacity:1;transform:translateY(0)}}.transition-hover[_ngcontent-%COMP%]:hover{background-color:#fff;box-shadow:0 4px 6px -1px #0000001a,0 2px 4px -2px #0000001a;transform:translateY(-2px)}.transition-all[_ngcontent-%COMP%]{transition:all .3s ease}svg[_ngcontent-%COMP%]   circle[_ngcontent-%COMP%]{transform:rotate(-90deg);transform-origin:50% 50%}"]})};export{te as DoctorDetailComponent};
