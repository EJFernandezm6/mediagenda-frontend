import{a as J}from"./chunk-PDHVNZHO.js";import{a as Z}from"./chunk-KJBMH4TK.js";import{a as V}from"./chunk-B77PZS2Y.js";import{a as j,b as B,d as q,g as G,u as H}from"./chunk-WVXXQESU.js";import"./chunk-MZ3EZVY4.js";import{$ as p,Ab as k,Ad as D,Ba as l,Bb as w,Cd as W,Eb as _,Fb as v,Gb as h,Jd as F,Ra as M,Rd as O,Sd as z,Va as f,W as y,a as S,aa as u,ba as C,ca as E,cb as c,db as t,eb as i,fb as x,lc as L,mb as b,mc as I,nb as g,nc as T,ob as m,uc as P,xd as N,zb as o,zd as A}from"./chunk-NLC5TGVC.js";function Q(d,s){d&1&&(t(0,"span",34),o(1,"Activo"),i())}function R(d,s){d&1&&(t(0,"span",35),o(1,"Inactivo"),i())}function U(d,s){if(d&1){let e=b();t(0,"tr")(1,"td",26),o(2),i(),t(3,"td",27),o(4),i(),t(5,"td",27),f(6,Q,2,0,"span",28)(7,R,2,0,"span",29),i(),t(8,"td",30)(9,"button",31),g("click",function(){let r=p(e).$implicit,a=m();return u(a.toggleActive(r))}),x(10,"lucide-icon",7),i(),t(11,"button",32),g("click",function(){let r=p(e).$implicit,a=m();return u(a.openModal(r))}),x(12,"lucide-icon",7),i(),t(13,"button",33),g("click",function(){let r=p(e).$implicit,a=m();return u(a.delete(r.specialtyId))}),x(14,"lucide-icon",7),i()()()}if(d&2){let e=s.$implicit,n=m();l(2),w(" ",e.name),l(2),k(e.description),l(2),c("ngIf",e.active),l(),c("ngIf",!e.active),l(2),c("ngClass",e.active?"text-emerald-600 bg-emerald-50 hover:bg-emerald-100":"text-red-500 bg-red-50 hover:bg-red-100")("title",e.active?"Desactivar":"Activar"),l(),c("img",n.icons.Power),l(2),c("img",n.icons.Pencil),l(2),c("img",n.icons.Trash2)}}function X(d,s){if(d&1){let e=b();t(0,"div",36)(1,"div",37)(2,"div",38),g("click",function(){p(e);let r=m();return u(r.closeModal())}),i(),t(3,"div",39)(4,"div",40)(5,"button",41),g("click",function(){p(e);let r=m();return u(r.closeModal())}),t(6,"span",21),o(7,"Cerrar"),i(),C(),t(8,"svg",42),x(9,"path",43),i()()(),E(),t(10,"div",44)(11,"h3",45),o(12),i(),t(13,"div",46)(14,"div",47)(15,"label",48),o(16,"Nombre"),i(),t(17,"div")(18,"input",49),h("ngModelChange",function(r){p(e);let a=m();return v(a.form.name,r)||(a.form.name=r),u(r)}),i()()(),t(19,"div",47)(20,"label",48),o(21,"Descripci\xF3n"),i(),t(22,"div")(23,"input",49),h("ngModelChange",function(r){p(e);let a=m();return v(a.form.description,r)||(a.form.description=r),u(r)}),i()()(),t(24,"div",50)(25,"input",51),h("ngModelChange",function(r){p(e);let a=m();return v(a.form.active,r)||(a.form.active=r),u(r)}),i(),t(26,"label",52),o(27,"Activo"),i()()()(),t(28,"div",53)(29,"button",54),g("click",function(){p(e);let r=m();return u(r.save())}),o(30,"Guardar"),i(),t(31,"button",55),g("click",function(){p(e);let r=m();return u(r.closeModal())}),o(32,"Cancelar"),i()()()()()}if(d&2){let e=m();l(12),w(" ",e.editingId?"Editar Especialidad":"Nueva Especialidad"," "),l(6),_("ngModel",e.form.name),l(5),_("ngModel",e.form.description),l(2),_("ngModel",e.form.active)}}var K=class d{service=y(Z);confirmService=y(V);icons={Plus:A,Pencil:N,Trash2:F,Search:W,Power:D};specialties=this.service.specialties;searchTerm="";currentPage=1;itemsPerPage=10;isModalOpen=!1;editingId=null;form={name:"",description:"",active:!0};get specialtiesList(){return this.specialties()}get totalItems(){return this.service.totalElements()}onPageChange(s){this.currentPage=s,this.loadSpecialties()}onSearchChange(){this.currentPage=1,this.loadSpecialties()}onSearchInput(s){let e=s.target,n=e.value.replace(/[^a-zA-Z áéíóúÁÉÍÓÚñÑ]/g,"");e.value!==n&&(e.value=n),this.searchTerm=n,this.onSearchChange()}loadSpecialties(){this.service.refreshSpecialties(this.currentPage-1,this.itemsPerPage,this.searchTerm)}openModal(s){s?(this.editingId=s.specialtyId,this.form=S({},s)):(this.editingId=null,this.form={name:"",description:"",active:!0}),this.isModalOpen=!0}closeModal(){this.isModalOpen=!1}save(){if(this.specialtiesList.some(e=>e.name.toLowerCase().trim()===this.form.name.toLowerCase().trim()&&e.specialtyId!==this.editingId)){alert(`La especialidad "${this.form.name}" ya existe.`);return}this.editingId?this.service.updateSpecialty(this.editingId,this.form).subscribe({next:()=>this.closeModal(),error:e=>alert("Error al actualizar especialidad: "+(e.error?.message||e.message))}):this.service.addSpecialty(this.form).subscribe({next:()=>this.closeModal(),error:e=>alert("Error al crear especialidad: "+(e.error?.message||e.message))})}toggleActive(s){this.service.updateStatus(s.specialtyId,!s.active).subscribe()}async delete(s){await this.confirmService.confirm({title:"Eliminar Especialidad",message:"\xBFEst\xE1s seguro de que deseas eliminar esta especialidad?",confirmText:"Eliminar",cancelText:"Cancelar"})&&this.service.deleteSpecialty(s).subscribe({error:()=>alert("No se pudo eliminar la especialidad. Es posible que est\xE9 asignada a uno o m\xE1s m\xE9dicos en este momento.")})}static \u0275fac=function(e){return new(e||d)};static \u0275cmp=M({type:d,selectors:[["app-specialties-list"]],decls:35,vars:8,consts:[[1,"px-4","sm:px-6","lg:px-8"],[1,"sm:flex","sm:items-center"],[1,"sm:flex-auto"],[1,"text-xl","font-semibold","text-gray-900"],[1,"mt-2","text-sm","text-gray-700"],[1,"mt-4","sm:ml-16","sm:mt-0","sm:flex-none"],[1,"block","rounded-md","bg-blue-600","px-3","py-2","text-center","text-sm","font-semibold","text-white","shadow-sm","hover:bg-blue-500","focus-visible:outline","focus-visible:outline-2","focus-visible:outline-offset-2","focus-visible:outline-blue-600","flex","items-center","gap-2",3,"click"],[1,"w-4","h-4",3,"img"],[1,"mt-8","flow-root"],[1,"mb-4","relative","max-w-xs"],[1,"absolute","inset-y-0","left-0","pl-3","flex","items-center","pointer-events-none"],[1,"h-5","w-5","text-gray-400",3,"img"],["type","text","placeholder","Buscar...",1,"block","w-full","pl-10","pr-3","py-2","border","border-gray-300","rounded-md","leading-5","bg-white","placeholder-gray-500","focus:outline-none","focus:placeholder-gray-400","focus:border-blue-300","focus:shadow-outline-blue","sm:text-sm","transition","duration-150","ease-in-out",3,"input","ngModel"],[1,"-mx-4","-my-2","overflow-x-auto","sm:-mx-6","lg:-mx-8"],[1,"inline-block","min-w-full","py-2","align-middle","sm:px-6","lg:px-8"],[1,"overflow-hidden","shadow","ring-1","ring-black","ring-opacity-5","sm:rounded-lg"],[1,"min-w-full","divide-y","divide-gray-300"],[1,"bg-gray-50"],["scope","col",1,"py-3.5","pl-4","pr-3","text-left","text-sm","font-semibold","text-gray-900","sm:pl-6"],["scope","col",1,"px-3","py-3.5","text-left","text-sm","font-semibold","text-gray-900"],["scope","col",1,"relative","py-3.5","pl-3","pr-4","sm:pr-6"],[1,"sr-only"],[1,"divide-y","divide-gray-200","bg-white"],[4,"ngFor","ngForOf"],[3,"pageChange","currentPage","totalItems","pageSize"],["class","fixed inset-0 z-10 w-screen overflow-y-auto",4,"ngIf"],[1,"whitespace-nowrap","py-4","pl-4","pr-3","text-sm","font-medium","text-gray-900","sm:pl-6"],[1,"whitespace-nowrap","px-3","py-4","text-sm","text-gray-500"],["class","inline-flex items-center rounded-md bg-green-50 px-2 py-1 text-xs font-medium text-green-700 ring-1 ring-inset ring-green-600/20",4,"ngIf"],["class","inline-flex items-center rounded-md bg-red-50 px-2 py-1 text-xs font-medium text-red-700 ring-1 ring-inset ring-red-600/20",4,"ngIf"],[1,"relative","whitespace-nowrap","py-4","pl-3","pr-4","text-right","text-sm","font-medium","sm:pr-6"],[1,"p-2","rounded-lg","transition-all","mr-2",3,"click","ngClass","title"],[1,"text-blue-600","hover:text-blue-900","mr-4",3,"click"],[1,"text-red-600","hover:text-red-900",3,"click"],[1,"inline-flex","items-center","rounded-md","bg-green-50","px-2","py-1","text-xs","font-medium","text-green-700","ring-1","ring-inset","ring-green-600/20"],[1,"inline-flex","items-center","rounded-md","bg-red-50","px-2","py-1","text-xs","font-medium","text-red-700","ring-1","ring-inset","ring-red-600/20"],[1,"fixed","inset-0","z-10","w-screen","overflow-y-auto"],[1,"flex","min-h-full","items-end","justify-center","p-4","text-center","sm:items-center","sm:p-0"],[1,"fixed","inset-0","bg-gray-500","bg-opacity-75","transition-opacity",3,"click"],[1,"relative","transform","overflow-hidden","rounded-lg","bg-white","px-4","pb-4","pt-5","text-left","shadow-xl","transition-all","sm:my-8","sm:w-full","sm:max-w-lg","sm:p-6"],[1,"absolute","right-0","top-0","hidden","pr-4","pt-4","sm:block"],["type","button",1,"rounded-md","bg-white","text-gray-400","hover:text-gray-500",3,"click"],["fill","none","viewBox","0 0 24 24","stroke-width","1.5","stroke","currentColor",1,"h-6","w-6"],["stroke-linecap","round","stroke-linejoin","round","d","M6 18L18 6M6 6l12 12"],[1,"mt-3","text-center","sm:ml-4","sm:mt-0","sm:text-left","w-full"],[1,"text-base","font-semibold","leading-6","text-gray-900"],[1,"mt-4","space-y-4"],[1,"mb-4"],[1,"block","text-sm","font-medium","leading-6","text-gray-900","mb-2"],["type","text",1,"block","w-full","rounded-md","border-0","py-1.5","px-4","text-gray-900","shadow-sm","ring-1","ring-inset","ring-gray-300","placeholder:text-gray-400","focus:ring-2","focus:ring-inset","focus:ring-blue-600","sm:text-sm","sm:leading-6",3,"ngModelChange","ngModel"],[1,"flex","items-center"],["type","checkbox",1,"h-4","w-4","rounded","border-gray-300","text-blue-600","focus:ring-blue-600",3,"ngModelChange","ngModel"],[1,"ml-2","block","text-sm","text-gray-900"],[1,"mt-5","sm:mt-4","sm:flex","sm:flex-row-reverse"],["type","button",1,"inline-flex","w-full","justify-center","rounded-md","bg-blue-600","px-3","py-2","text-sm","font-semibold","text-white","shadow-sm","hover:bg-blue-500","sm:ml-3","sm:w-auto",3,"click"],["type","button",1,"mt-3","inline-flex","w-full","justify-center","rounded-md","bg-white","px-3","py-2","text-sm","font-semibold","text-gray-900","shadow-sm","ring-1","ring-inset","ring-gray-300","hover:bg-gray-50","sm:mt-0","sm:w-auto",3,"click"]],template:function(e,n){e&1&&(t(0,"div",0)(1,"div",1)(2,"div",2)(3,"h1",3),o(4,"Especialidades"),i(),t(5,"p",4),o(6,"Lista de especialidades m\xE9dicas disponibles en la cl\xEDnica."),i()(),t(7,"div",5)(8,"button",6),g("click",function(){return n.openModal()}),x(9,"lucide-icon",7),o(10," Nueva Especialidad "),i()()(),t(11,"div",8)(12,"div",9)(13,"div",10),x(14,"lucide-icon",11),i(),t(15,"input",12),g("input",function(a){return n.onSearchInput(a)}),i()(),t(16,"div",13)(17,"div",14)(18,"div",15)(19,"table",16)(20,"thead",17)(21,"tr")(22,"th",18),o(23," Nombre"),i(),t(24,"th",19),o(25," Descripci\xF3n"),i(),t(26,"th",19),o(27,"Estado "),i(),t(28,"th",20)(29,"span",21),o(30,"Acciones"),i()()()(),t(31,"tbody",22),f(32,U,15,9,"tr",23),i()()()()(),t(33,"app-pagination",24),g("pageChange",function(a){return n.onPageChange(a)}),i()()(),f(34,X,33,4,"div",25)),e&2&&(l(9),c("img",n.icons.Plus),l(5),c("img",n.icons.Search),l(),c("ngModel",n.searchTerm),l(17),c("ngForOf",n.specialtiesList),l(),c("currentPage",n.currentPage)("totalItems",n.totalItems)("pageSize",n.itemsPerPage),l(),c("ngIf",n.isModalOpen))},dependencies:[P,L,I,T,z,O,H,B,j,q,G,J],encapsulation:2})};export{K as SpecialtiesListComponent};
