import{a as R}from"./chunk-DLWRNSCF.js";import{e as W}from"./chunk-G2AI53GJ.js";import{a as H,b as J,c as K,f as Q,o as X}from"./chunk-FIV2NONW.js";import{a as Y}from"./chunk-ORWSLEVE.js";import"./chunk-MZ3EZVY4.js";import{$a as c,Dc as N,Ia as L,Lc as P,Ma as _,Mc as F,Oc as U,Qc as B,Rb as T,S as w,Sb as V,Sc as j,Ta as m,Ua as t,Va as i,Vb as I,Vc as A,Wa as u,X as p,Y as g,Z as E,Za as C,_ as k,_a as f,_c as O,a as M,ad as z,gb as o,hb as S,hd as q,ib as b,id as G,lb as x,mb as v,nb as h,qb as D,ra as y,ta as r}from"./chunk-SWYYGHOG.js";var $=d=>["/app/doctors",d];function ee(d,s){d&1&&(t(0,"span",41),o(1,"Activo"),i())}function te(d,s){d&1&&(t(0,"span",42),o(1,"Inactivo"),i())}function ie(d,s){if(d&1){let e=C();t(0,"div",16)(1,"div",17)(2,"div",18)(3,"div",19)(4,"h3",20),o(5),i(),_(6,ee,2,0,"span",21)(7,te,2,0,"span",22),i(),t(8,"div",23)(9,"span",24),u(10,"lucide-icon",25),o(11),i(),t(12,"span",24),u(13,"lucide-icon",25),o(14),i()(),t(15,"div",26),u(16,"lucide-icon",27),t(17,"span",28),o(18),i(),t(19,"span",29),o(20),i()()(),u(21,"img",30),i(),t(22,"div")(23,"div",31)(24,"div",32)(25,"a",33),u(26,"lucide-icon",11),o(27," WhatsApp "),i()(),t(28,"div",34)(29,"a",35),u(30,"lucide-icon",11),o(31," Email "),i()()(),t(32,"div",36)(33,"button",37),f("click",function(){let n=p(e).$implicit,a=c();return g(a.openModal(n))}),o(34,"Editar"),i(),u(35,"div",38),t(36,"a",39),o(37,"Detalle"),i(),u(38,"div",38),t(39,"button",40),f("click",function(){let n=p(e).$implicit,a=c();return g(a.delete(n.id))}),o(40,"Eliminar"),i()()()()}if(d&2){let e=s.$implicit,l=c();r(5),S(e.fullName),r(),m("ngIf",e.active),r(),m("ngIf",!e.active),r(3),m("img",l.icons.FileBadge),r(),b(" CMP: ",e.cmp," "),r(2),m("img",l.icons.MapPin),r(),b(" DNI: ",e.dni," "),r(2),m("img",l.icons.Star),r(2),S(e.rating),r(2),b("(",e.reviewsCount," reviews)"),r(),m("src",e.photoUrl,y),r(4),m("href","https://wa.me/"+e.phone,y),r(),m("img",l.icons.MessageCircle),r(3),m("href","mailto:"+e.email,y),r(),m("img",l.icons.Mail),r(6),m("routerLink",D(16,$,e.id))}}function ne(d,s){d&1&&(t(0,"span"),o(1,"Guardando..."),i())}function re(d,s){d&1&&(t(0,"span"),o(1,"Guardar"),i())}function oe(d,s){if(d&1){let e=C();t(0,"div",43)(1,"div",44)(2,"div",45),f("click",function(){p(e);let n=c();return g(n.closeModal())}),i(),t(3,"div",46)(4,"div",47)(5,"button",48),f("click",function(){p(e);let n=c();return g(n.closeModal())}),t(6,"span",49),o(7,"Cerrar"),i(),E(),t(8,"svg",50),u(9,"path",51),i()()(),k(),t(10,"div",52)(11,"h3",53),o(12),i(),t(13,"div",54)(14,"div",55)(15,"label",56),o(16,"Foto de perfil"),i(),t(17,"div",57),u(18,"img",58),t(19,"input",59),f("change",function(n){p(e);let a=c();return g(a.onFileSelected(n))}),i()()(),t(20,"div",55)(21,"label",56),o(22,"Nombre completo "),t(23,"span",60),o(24,"*"),i()(),t(25,"div")(26,"input",61),h("ngModelChange",function(n){p(e);let a=c();return v(a.form.fullName,n)||(a.form.fullName=n),g(n)}),i()()(),t(27,"div",62)(28,"label",56),o(29," DNI "),t(30,"span",60),o(31,"*"),i()(),t(32,"div")(33,"input",61),h("ngModelChange",function(n){p(e);let a=c();return v(a.form.dni,n)||(a.form.dni=n),g(n)}),i()()(),t(34,"div",62)(35,"label",56),o(36,"CMP / colegiatura "),t(37,"span",60),o(38,"*"),i()(),t(39,"div")(40,"input",61),h("ngModelChange",function(n){p(e);let a=c();return v(a.form.cmp,n)||(a.form.cmp=n),g(n)}),i()()(),t(41,"div",62)(42,"label",56),o(43,"Tel\xE9fono "),t(44,"span",60),o(45,"*"),i()(),t(46,"div")(47,"input",61),h("ngModelChange",function(n){p(e);let a=c();return v(a.form.phone,n)||(a.form.phone=n),g(n)}),i()()(),t(48,"div",62)(49,"label",56),o(50,"Email"),i(),t(51,"div")(52,"input",63),h("ngModelChange",function(n){p(e);let a=c();return v(a.form.email,n)||(a.form.email=n),g(n)}),i()()(),t(53,"div",64)(54,"input",65),h("ngModelChange",function(n){p(e);let a=c();return v(a.form.active,n)||(a.form.active=n),g(n)}),i(),t(55,"label",66),o(56,"Activo (disponible para turnos)"),i()()()(),t(57,"div",67)(58,"button",68),f("click",function(){p(e);let n=c();return g(n.save())}),_(59,ne,2,0,"span",69)(60,re,2,0,"span",69),i(),t(61,"button",70),f("click",function(){p(e);let n=c();return g(n.closeModal())}),o(62,"Cancelar"),i()()()()()}if(d&2){let e=c();r(12),b("",e.editingId?"Editar":"Nuevo"," especialista"),r(6),m("src",e.form.photoUrl||"https://ui-avatars.com/api/?background=random",y),r(8),x("ngModel",e.form.fullName),r(7),x("ngModel",e.form.dni),r(7),x("ngModel",e.form.cmp),r(7),x("ngModel",e.form.phone),r(5),x("ngModel",e.form.email),r(2),x("ngModel",e.form.active),r(4),m("disabled",e.isSaving||!e.isFormValid),r(),m("ngIf",e.isSaving),r(),m("ngIf",!e.isSaving)}}var Z=class d{service=w(Y);confirmService=w(R);icons={Plus:j,Pencil:B,Trash2:z,Search:A,Star:O,MessageCircle:U,Mail:P,FileBadge:N,MapPin:F};doctors=this.service.doctors;searchTerm="";isModalOpen=!1;isSaving=!1;editingId=null;form={fullName:"",dni:"",cmp:"",email:"",phone:"",active:!0,photoUrl:""};get filteredDoctors(){return this.doctors().filter(s=>s.fullName.toLowerCase().includes(this.searchTerm.toLowerCase())||s.cmp&&s.cmp.includes(this.searchTerm))}get isFormValid(){return this.form.fullName?.trim()&&this.form.phone?.trim()&&this.form.cmp?.trim()&&this.form.dni?.trim()}openModal(s){s?(this.editingId=s.id,this.form=M({},s)):(this.editingId=null,this.form={fullName:"",dni:"",cmp:"",email:"",phone:"",active:!0,photoUrl:"https://ui-avatars.com/api/?background=random"}),this.isModalOpen=!0}closeModal(){this.isModalOpen=!1}save(){this.isSaving=!0,(!this.form.photoUrl||this.form.photoUrl.includes("ui-avatars"))&&(this.form.photoUrl?.startsWith("data:image")||(this.form.photoUrl=`https://ui-avatars.com/api/?name=${encodeURIComponent(this.form.fullName)}&background=random`)),(this.editingId?this.service.updateDoctor(this.editingId,this.form):this.service.addDoctor(this.form)).subscribe({next:()=>{this.isSaving=!1,this.closeModal()},error:e=>{console.error("Error saving doctor:",e),this.isSaving=!1,e.status===500?alert("Error interno. Es posible que el correo ya est\xE9 registrado o haya datos inv\xE1lidos."):alert("Ocurri\xF3 un error al guardar el m\xE9dico. Por favor intente nuevamente.")}})}onFileSelected(s){let e=s.target.files[0];if(e){let l=new FileReader;l.onload=n=>{this.form.photoUrl=n.target.result},l.readAsDataURL(e)}}async delete(s){await this.confirmService.confirm({title:"Eliminar Especialista",message:"\xBFEst\xE1s seguro de que deseas eliminar permanentemente a este m\xE9dico? Esta acci\xF3n no se puede deshacer.",confirmText:"Eliminar",cancelText:"Cancelar"})&&this.service.deleteDoctor(s).subscribe()}static \u0275fac=function(e){return new(e||d)};static \u0275cmp=L({type:d,selectors:[["app-doctors-list"]],decls:19,vars:5,consts:[[1,"px-4","sm:px-6","lg:px-8"],[1,"sm:flex","sm:items-center"],[1,"sm:flex-auto"],[1,"text-xl","font-semibold","text-gray-900"],[1,"mt-2","text-sm","text-gray-700"],[1,"mt-4","sm:ml-16","sm:mt-0","sm:flex-none"],[1,"block","rounded-md","bg-blue-600","px-3","py-2","text-center","text-sm","font-semibold","text-white","shadow-sm","hover:bg-blue-500","flex","items-center","gap-2",3,"click"],[1,"w-4","h-4",3,"img"],[1,"mt-8","flow-root"],[1,"mb-6","relative","max-w-sm"],[1,"absolute","inset-y-0","left-0","pl-3","flex","items-center","pointer-events-none"],[1,"h-5","w-5","text-gray-400",3,"img"],["type","text","placeholder","Buscar por nombre o CMP...",1,"block","w-full","pl-10","pr-3","py-2","border","border-gray-300","rounded-md","leading-5","bg-white","placeholder-gray-500","focus:outline-none","focus:ring-blue-500","focus:border-blue-500","sm:text-sm",3,"ngModelChange","ngModel"],[1,"grid","grid-cols-1","gap-6","sm:grid-cols-2","lg:grid-cols-3"],["class","col-span-1 divide-y divide-gray-200 rounded-lg bg-white shadow border border-gray-100 transition-all hover:shadow-md",4,"ngFor","ngForOf"],["class","fixed inset-0 z-20 w-screen overflow-y-auto",4,"ngIf"],[1,"col-span-1","divide-y","divide-gray-200","rounded-lg","bg-white","shadow","border","border-gray-100","transition-all","hover:shadow-md"],[1,"flex","w-full","items-center","justify-between","space-x-6","p-6"],[1,"flex-1","truncate"],[1,"flex","items-center","space-x-3"],[1,"truncate","text-sm","font-medium","text-gray-900"],["class","inline-flex flex-shrink-0 items-center rounded-full bg-green-50 px-1.5 py-0.5 text-xs font-medium text-green-700 ring-1 ring-inset ring-green-600/20",4,"ngIf"],["class","inline-flex flex-shrink-0 items-center rounded-full bg-gray-50 px-1.5 py-0.5 text-xs font-medium text-gray-600 ring-1 ring-inset ring-gray-500/10",4,"ngIf"],[1,"mt-1","flex","items-center","gap-3","text-sm","text-gray-500"],[1,"flex","items-center","gap-1"],[1,"w-3","h-3",3,"img"],[1,"mt-2","flex","items-center","text-sm","text-yellow-500"],[1,"w-4","h-4","fill-current",3,"img"],[1,"ml-1","text-gray-900","font-semibold"],[1,"ml-1","text-gray-400"],["alt","",1,"h-14","w-14","flex-shrink-0","rounded-full","bg-gray-300",3,"src"],[1,"-mt-px","flex","divide-x","divide-gray-200"],[1,"flex","w-0","flex-1"],["target","_blank",1,"relative","-mr-px","inline-flex","w-0","flex-1","items-center","justify-center","gap-x-3","rounded-bl-lg","border","border-transparent","py-4","text-sm","font-semibold","text-gray-900","hover:text-gray-600",3,"href"],[1,"-ml-px","flex","w-0","flex-1"],[1,"relative","inline-flex","w-0","flex-1","items-center","justify-center","gap-x-3","rounded-br-lg","border","border-transparent","py-4","text-sm","font-semibold","text-gray-900","hover:text-gray-600",3,"href"],[1,"border-t","border-gray-100","flex"],[1,"flex-1","py-3","text-sm","text-blue-600","font-medium","hover:bg-blue-50","transition-colors",3,"click"],[1,"w-px","bg-gray-100"],[1,"flex-1","py-3","text-sm","text-gray-600","font-medium","hover:bg-gray-50","transition-colors","text-center",3,"routerLink"],[1,"flex-1","py-3","text-sm","text-red-600","font-medium","hover:bg-red-50","transition-colors",3,"click"],[1,"inline-flex","flex-shrink-0","items-center","rounded-full","bg-green-50","px-1.5","py-0.5","text-xs","font-medium","text-green-700","ring-1","ring-inset","ring-green-600/20"],[1,"inline-flex","flex-shrink-0","items-center","rounded-full","bg-gray-50","px-1.5","py-0.5","text-xs","font-medium","text-gray-600","ring-1","ring-inset","ring-gray-500/10"],[1,"fixed","inset-0","z-20","w-screen","overflow-y-auto"],[1,"flex","min-h-full","items-end","justify-center","p-4","text-center","sm:items-center","sm:p-0"],[1,"fixed","inset-0","bg-gray-500","bg-opacity-75","transition-opacity",3,"click"],[1,"relative","transform","overflow-hidden","rounded-lg","bg-white","px-4","pb-4","pt-5","text-left","shadow-xl","transition-all","sm:my-8","sm:w-full","sm:max-w-lg","sm:p-6"],[1,"absolute","right-0","top-0","hidden","pr-4","pt-4","sm:block"],["type","button",1,"rounded-md","bg-white","text-gray-400","hover:text-gray-500",3,"click"],[1,"sr-only"],["fill","none","viewBox","0 0 24 24","stroke-width","1.5","stroke","currentColor",1,"h-6","w-6"],["stroke-linecap","round","stroke-linejoin","round","d","M6 18L18 6M6 6l12 12"],[1,"mt-3","w-full"],[1,"text-base","font-semibold","leading-6","text-gray-900","text-center","sm:text-left"],[1,"mt-6","grid","grid-cols-1","gap-x-6","gap-y-4","sm:grid-cols-6"],[1,"sm:col-span-6","mb-4"],[1,"block","text-sm","font-medium","leading-6","text-gray-900","mb-2"],[1,"flex","items-center","gap-x-3"],["alt","Preview",1,"h-12","w-12","rounded-full","object-cover","bg-gray-50",3,"src"],["type","file","accept","image/*",1,"rounded-md","bg-white","px-2.5","py-1.5","text-sm","font-semibold","text-gray-900","shadow-sm","ring-1","ring-inset","ring-gray-300","hover:bg-gray-50",3,"change"],[1,"text-red-500"],["type","text",1,"block","w-full","rounded-md","border-0","py-2.5","px-6","text-gray-900","shadow-sm","ring-1","ring-inset","ring-gray-300","placeholder:text-gray-400","focus:ring-2","focus:ring-inset","focus:ring-blue-600","sm:text-sm","sm:leading-6",3,"ngModelChange","ngModel"],[1,"sm:col-span-3","mb-4"],["type","email",1,"block","w-full","rounded-md","border-0","py-2.5","px-6","text-gray-900","shadow-sm","ring-1","ring-inset","ring-gray-300","placeholder:text-gray-400","focus:ring-2","focus:ring-inset","focus:ring-blue-600","sm:text-sm","sm:leading-6",3,"ngModelChange","ngModel"],[1,"sm:col-span-6","flex","items-center","mb-4"],["type","checkbox",1,"h-4","w-4","rounded","border-gray-300","text-blue-600","focus:ring-blue-600",3,"ngModelChange","ngModel"],[1,"ml-2","block","text-sm","text-gray-900"],[1,"mt-5","sm:mt-6","sm:flex","sm:flex-row-reverse"],["type","button",1,"inline-flex","w-full","justify-center","rounded-md","bg-blue-600","px-3","py-2","text-sm","font-semibold","text-white","shadow-sm","hover:bg-blue-500","sm:ml-3","sm:w-auto","disabled:opacity-50","disabled:cursor-not-allowed",3,"click","disabled"],[4,"ngIf"],["type","button",1,"mt-3","inline-flex","w-full","justify-center","rounded-md","bg-white","px-3","py-2","text-sm","font-semibold","text-gray-900","shadow-sm","ring-1","ring-inset","ring-gray-300","hover:bg-gray-50","sm:mt-0","sm:w-auto",3,"click"]],template:function(e,l){e&1&&(t(0,"div",0)(1,"div",1)(2,"div",2)(3,"h1",3),o(4,"Especialistas"),i(),t(5,"p",4),o(6,"Gesti\xF3n de especialistas, colegiatura y estado."),i()(),t(7,"div",5)(8,"button",6),f("click",function(){return l.openModal()}),u(9,"lucide-icon",7),o(10," Nuevo especialista "),i()()(),t(11,"div",8)(12,"div",9)(13,"div",10),u(14,"lucide-icon",11),i(),t(15,"input",12),h("ngModelChange",function(a){return v(l.searchTerm,a)||(l.searchTerm=a),a}),i()(),t(16,"div",13),_(17,ie,41,18,"div",14),i()()(),_(18,oe,63,11,"div",15)),e&2&&(r(9),m("img",l.icons.Plus),r(5),m("img",l.icons.Search),r(),x("ngModel",l.searchTerm),r(2),m("ngForOf",l.filteredDoctors),r(),m("ngIf",l.isModalOpen))},dependencies:[I,T,V,G,q,X,J,H,K,Q,W],encapsulation:2})};export{Z as DoctorsListComponent};
