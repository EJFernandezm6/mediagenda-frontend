import{b as E,d as z,g as U,u as L}from"./chunk-OABQPEKD.js";import{a as F}from"./chunk-MZ3EZVY4.js";import{$ as f,Ba as o,Bb as x,Dd as A,Ec as N,Lb as M,N as u,R as _,Ra as v,Sd as V,Td as $,Va as p,Vb as O,W as C,Yb as S,aa as b,cb as a,db as r,eb as s,fb as w,ia as l,lc as I,mb as y,mc as T,nb as m,nc as k,ob as d,vc as D,zb as g}from"./chunk-2BMW4ZRB.js";var j=class i{http=C(N);apiUrl=`${F.apiUrl}/catalog`;associations=l([]);constructor(){this.refreshAssociations()}refreshAssociations(){this.http.get(`${this.apiUrl}/doctor-specialties`).subscribe(e=>{this.associations.set(e)})}getAllAssociations(){return this.http.get(`${this.apiUrl}/doctor-specialties`)}addAssociation(e,t){let n={specialtyId:t.specialtyId,cost:t.cost,durationMinutes:t.durationMinutes};return this.http.post(`${this.apiUrl}/doctors/${e}/specialties`,n).pipe(u(()=>this.refreshAssociations()))}removeAssociation(e){return this.http.delete(`${this.apiUrl}/doctor-specialties/${e}`).pipe(u(()=>this.refreshAssociations()))}updateAssociation(e,t){return this.http.put(`${this.apiUrl}/doctor-specialties/${e}`,t).pipe(u(()=>this.refreshAssociations()))}getSpecialtiesForDoctor(e){return this.associations().filter(t=>t.doctorId===e)}static \u0275fac=function(t){return new(t||i)};static \u0275prov=_({token:i,factory:i.\u0275fac,providedIn:"root"})};var H=(i,e)=>({"py-2":i,"py-2.5":e});function q(i,e){if(i&1){let t=y();r(0,"div",8),m("click",function(){f(t);let c=d();return b(c.isOpen.set(!1))}),s()}}function G(i,e){if(i&1&&(r(0,"span",14),g(1),s()),i&2){let t=d().$implicit;o(),x(" ",t.description," ")}}function J(i,e){if(i&1){let t=y();r(0,"li",11),m("click",function(){let c=f(t).$implicit,h=d(2);return b(h.selectOption(c))}),r(1,"span",12),g(2),s(),p(3,G,2,1,"span",13),s()}if(i&2){let t=e.$implicit;o(2),x(" ",t.label," "),o(),a("ngIf",t.description)}}function K(i,e){if(i&1&&(r(0,"ul",9),p(1,J,4,2,"li",10),s()),i&2){let t=d();o(),a("ngForOf",t.filteredOptions())}}function Q(i,e){i&1&&(r(0,"ul",15)(1,"li",16),g(2," No se encontraron resultados "),s()())}var P=class i{options=[];placeholder="Buscar...";disabledState=l(!1);set disabled(e){this.disabledState.set(e)}currentValue=l("");set ngModel(e){this.currentValue.set(e||""),this.updateSearchTextFromValue(e)}displayMode="default";selectionChanged=S();ngModelChange=S();isOpen=l(!1);searchText=l("");icons={Search:A};filteredOptions=O(()=>{let e=this.searchText().toLowerCase();return e?this.options.filter(t=>t.label.toLowerCase().includes(e)||t.description&&t.description.toLowerCase().includes(e)):this.options});onSearchChange(e){this.searchText.set(e),this.isOpen.set(!0)}selectOption(e){this.currentValue.set(e.id),this.searchText.set(e.label),this.isOpen.set(!1),this.selectionChanged.emit(e.id),this.ngModelChange.emit(e.id)}updateSearchTextFromValue(e){if(!e){this.searchText.set("");return}setTimeout(()=>{let t=this.options.find(n=>n.id===e);t&&this.searchText.set(t.label)})}static \u0275fac=function(t){return new(t||i)};static \u0275cmp=v({type:i,selectors:[["app-searchable-select"]],inputs:{options:"options",placeholder:"placeholder",disabled:"disabled",ngModel:"ngModel",displayMode:"displayMode"},outputs:{selectionChanged:"selectionChanged",ngModelChange:"ngModelChange"},decls:8,vars:11,consts:[[1,"relative","w-full"],["class","fixed inset-0 z-30 cursor-default bg-transparent",3,"click",4,"ngIf"],[1,"relative","z-40"],["type","text",1,"block","w-full","rounded-md","border-gray-300","py-2.5","pl-3","pr-10","text-base","focus:border-primary","focus:outline-none","focus:ring-primary","sm:text-sm","border","disabled:bg-gray-100","disabled:text-gray-500","bg-white","shadow-sm","disabled:shadow-none",3,"ngModelChange","focus","ngModel","placeholder","disabled","ngClass"],[1,"absolute","inset-y-0","right-0","flex","items-center","pr-2","pointer-events-none"],[1,"h-4","w-4","text-gray-400",3,"img"],["class","absolute z-50 mt-1 max-h-60 w-full overflow-auto rounded-md bg-white py-1 text-base shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none sm:text-sm",4,"ngIf"],["class","absolute z-50 mt-1 w-full overflow-auto rounded-md bg-white py-1 text-base shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none sm:text-sm",4,"ngIf"],[1,"fixed","inset-0","z-30","cursor-default","bg-transparent",3,"click"],[1,"absolute","z-50","mt-1","max-h-60","w-full","overflow-auto","rounded-md","bg-white","py-1","text-base","shadow-lg","ring-1","ring-black","ring-opacity-5","focus:outline-none","sm:text-sm"],["class","relative cursor-pointer select-none py-2 pl-3 pr-9 text-gray-900 hover:bg-primary flex flex-col",3,"click",4,"ngFor","ngForOf"],[1,"relative","cursor-pointer","select-none","py-2","pl-3","pr-9","text-gray-900","hover:bg-primary","flex","flex-col",3,"click"],[1,"block","truncate","font-normal"],["class","block truncate text-xs text-gray-500 mt-0.5",4,"ngIf"],[1,"block","truncate","text-xs","text-gray-500","mt-0.5"],[1,"absolute","z-50","mt-1","w-full","overflow-auto","rounded-md","bg-white","py-1","text-base","shadow-lg","ring-1","ring-black","ring-opacity-5","focus:outline-none","sm:text-sm"],[1,"relative","cursor-default","select-none","py-2","pl-3","pr-9","text-gray-500"]],template:function(t,n){t&1&&(r(0,"div",0),p(1,q,1,0,"div",1),r(2,"div",2)(3,"input",3),m("ngModelChange",function(h){return n.onSearchChange(h)})("focus",function(){return n.isOpen.set(!0)}),s(),r(4,"div",4),w(5,"lucide-icon",5),s(),p(6,K,2,1,"ul",6)(7,Q,3,0,"ul",7),s()()),t&2&&(o(),a("ngIf",n.isOpen()),o(2),a("ngModel",n.searchText())("placeholder",n.placeholder)("disabled",n.disabledState())("ngClass",M(8,H,n.displayMode==="compact",n.displayMode==="default")),o(2),a("img",n.icons.Search),o(),a("ngIf",n.isOpen()&&n.filteredOptions().length>0),o(),a("ngIf",n.isOpen()&&n.filteredOptions().length===0))},dependencies:[D,I,T,k,L,E,z,U,$,V],styles:[".dropdown-backdrop[_ngcontent-%COMP%]{position:fixed;inset:0;z-index:30;background:transparent}"]})};export{j as a,P as b};
