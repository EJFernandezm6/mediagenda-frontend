import{a as te}from"./chunk-STWIRL36.js";import{f as W}from"./chunk-GHQYZ46R.js";import{a as N}from"./chunk-D3EGGWZK.js";import{a as Q,b as X,d as Y,g as Z,u as $}from"./chunk-QZM4Q4DO.js";import{a as ee}from"./chunk-5QU4QAOU.js";import"./chunk-MZ3EZVY4.js";import{$ as p,Ab as h,Ba as o,Bb as v,Bd as R,Dd as H,Gb as k,Ld as J,Md as K,Qc as F,Ra as I,Va as _,W as C,a as M,aa as g,ab as d,ad as U,ba as E,bb as t,ca as D,cb as i,db as u,hb as S,hc as P,ib as f,ic as T,jb as c,md as j,nd as A,oc as V,pd as O,rd as B,tb as L,td as z,ub as l,ud as q,vb as w,wb as b,wd as G,xa as y,zb as x}from"./chunk-NGQHHHUV.js";var ne=m=>["/app/doctors",m];function re(m,a){m&1&&(t(0,"span",51),l(1,"Activo"),i())}function oe(m,a){m&1&&(t(0,"span",52),l(1,"Inactivo"),i())}function ae(m,a){if(m&1&&(t(0,"div",53),u(1,"lucide-icon",54),t(2,"div",55),l(3),i()()),m&2){let e=c().$implicit,n=c();o(),d("img",n.icons.AlertCircle),o(2),b(" Faltan: ",n.getMissingFields(e).join(", ")," ")}}function le(m,a){if(m&1&&u(0,"img",56),m&2){let e=c().$implicit;d("src",e.photoUrl,y)}}function se(m,a){if(m&1&&(t(0,"span"),l(1),i()),m&2){let e=c().$implicit;o(),b(" ",e.fullName.substring(0,2)," ")}}function me(m,a){if(m&1){let e=S();t(0,"div",20)(1,"div",21)(2,"div",22)(3,"div",23)(4,"div",24)(5,"h3",25),l(6),i(),_(7,re,2,0,"span",26)(8,oe,2,0,"span",27)(9,ae,4,2,"div",28),i(),t(10,"div",29)(11,"div",30)(12,"span",31),l(13,"CMP:"),i(),t(14,"span",32),u(15,"lucide-icon",33),l(16),i()(),t(17,"div",30)(18,"span",31),l(19,"DNI:"),i(),t(20,"span",32),u(21,"lucide-icon",33),l(22),i()()(),t(23,"div",34),u(24,"lucide-icon",35),t(25,"span",36),l(26),i(),t(27,"span",37),l(28),i()()(),t(29,"div",38)(30,"div",39),_(31,le,1,1,"img",40)(32,se,2,1,"span",41),i()()()(),t(33,"div",42)(34,"a",43),u(35,"lucide-icon",11),l(36," WhatsApp "),i(),t(37,"a",44),u(38,"lucide-icon",11),l(39," Email "),i()(),t(40,"div",45)(41,"button",46),f("click",function(){let r=p(e).$implicit,s=c();return g(s.toggleActive(r))}),u(42,"lucide-icon",47),i(),t(43,"div",48)(44,"button",49),f("click",function(){let r=p(e).$implicit,s=c();return g(s.openModal(r))}),l(45," Editar "),i(),t(46,"a",50),l(47," Detalle "),i()()()()}if(m&2){let e=a.$implicit,n=c();o(6),w(e.fullName),o(),d("ngIf",e.active),o(),d("ngIf",!e.active),o(),d("ngIf",n.isMissingData(e)),o(6),d("img",n.icons.FileBadge),o(),b(" ",e.cmp," "),o(5),d("img",n.icons.MapPin),o(),b(" ",e.dni," "),o(2),d("img",n.icons.Star),o(2),w(e.rating||"4.5"),o(2),b("(",e.reviewsCount||40," reviews)"),o(3),d("ngIf",e.photoUrl&&!e.photoUrl.includes("ui-avatars")),o(),d("ngIf",!e.photoUrl||e.photoUrl.includes("ui-avatars")),o(2),d("href","https://wa.me/"+e.phone,y),o(),d("img",n.icons.MessageCircle),o(2),d("href","mailto:"+e.email,y),o(),d("img",n.icons.Mail),o(3),L(e.active?"bg-emerald-50 text-emerald-600 hover:bg-emerald-100":"bg-red-50 text-red-600 hover:bg-red-100"),d("title",e.active?"Desactivar":"Activar"),o(),d("img",n.icons.Power),o(4),d("routerLink",k(22,ne,e.id))}}function de(m,a){if(m&1&&(t(0,"div",87)(1,"div",88)(2,"div",38),u(3,"lucide-icon",89),i(),t(4,"div",90)(5,"h3",91),l(6,"Perfil Incompleto"),i(),t(7,"div",92)(8,"p"),l(9,"Este perfil requiere atenci\xF3n inmediata. Faltan los siguientes campos: "),t(10,"span",93),l(11),i(),l(12,". "),i()()()()()),m&2){let e=c(2);o(3),d("img",e.icons.AlertCircle),o(8),w(e.getMissingFields(e.form).join(", "))}}function ce(m,a){m&1&&(t(0,"span"),l(1,"Guardando..."),i())}function pe(m,a){m&1&&(t(0,"span"),l(1,"Guardar"),i())}function ge(m,a){if(m&1){let e=S();t(0,"div",57)(1,"div",58)(2,"div",59),f("click",function(){p(e);let r=c();return g(r.closeModal())}),i(),t(3,"div",60)(4,"div",61)(5,"button",62),f("click",function(){p(e);let r=c();return g(r.closeModal())}),t(6,"span",63),l(7,"Cerrar"),i(),E(),t(8,"svg",64),u(9,"path",65),i()()(),D(),t(10,"div",66)(11,"h3",67),l(12),i(),t(13,"div",68),_(14,de,13,2,"div",69),t(15,"div",70)(16,"div",71)(17,"label",72),l(18,"Foto de perfil"),i(),t(19,"div",73),u(20,"img",74),t(21,"input",75),f("change",function(r){p(e);let s=c();return g(s.onFileSelected(r))}),i()()(),t(22,"div",76)(23,"label",72),l(24,"Nombre completo "),t(25,"span",77),l(26,"*"),i()(),t(27,"input",78),v("ngModelChange",function(r){p(e);let s=c();return h(s.form.fullName,r)||(s.form.fullName=r),g(r)}),i()(),t(28,"div",79)(29,"label",72),l(30,"DNI "),t(31,"span",77),l(32,"*"),i()(),t(33,"input",78),v("ngModelChange",function(r){p(e);let s=c();return h(s.form.dni,r)||(s.form.dni=r),g(r)}),i()(),t(34,"div",79)(35,"label",72),l(36,"CMP / colegiatura "),t(37,"span",77),l(38,"*"),i()(),t(39,"input",78),v("ngModelChange",function(r){p(e);let s=c();return h(s.form.cmp,r)||(s.form.cmp=r),g(r)}),i()(),t(40,"div",79)(41,"label",72),l(42,"Tel\xE9fono "),t(43,"span",77),l(44,"*"),i()(),t(45,"input",78),v("ngModelChange",function(r){p(e);let s=c();return h(s.form.phone,r)||(s.form.phone=r),g(r)}),i()(),t(46,"div",79)(47,"label",72),l(48,"Email"),i(),t(49,"input",80),v("ngModelChange",function(r){p(e);let s=c();return h(s.form.email,r)||(s.form.email=r),g(r)}),i()(),t(50,"div",81)(51,"input",82),v("ngModelChange",function(r){p(e);let s=c();return h(s.form.active,r)||(s.form.active=r),g(r)}),i(),t(52,"label",83),l(53,"Activo (disponible para turnos)"),i()()()(),t(54,"div",84)(55,"button",85),f("click",function(){p(e);let r=c();return g(r.save())}),_(56,ce,2,0,"span",41)(57,pe,2,0,"span",41),i(),t(58,"button",86),f("click",function(){p(e);let r=c();return g(r.closeModal())}),l(59," Cancelar "),i()()()()()()}if(m&2){let e=c();o(12),b(" ",e.editingId?"Editar":"Nuevo"," especialista "),o(2),d("ngIf",e.editingId&&e.isMissingData(e.form)),o(6),d("src",e.form.photoUrl||"https://ui-avatars.com/api/?background=random",y),o(7),x("ngModel",e.form.fullName),o(6),x("ngModel",e.form.dni),o(6),x("ngModel",e.form.cmp),o(6),x("ngModel",e.form.phone),o(4),x("ngModel",e.form.email),o(2),x("ngModel",e.form.active),o(4),d("disabled",e.isSaving||!e.isFormValid),o(),d("ngIf",e.isSaving),o(),d("ngIf",!e.isSaving)}}var ie=class m{service=C(ee);confirmService=C(N);icons={Plus:z,Pencil:B,Trash2:H,Search:G,Star:R,MessageCircle:O,Mail:j,FileBadge:U,MapPin:A,AlertCircle:F,Power:q};doctors=this.service.doctors;searchTerm="";currentPage=1;itemsPerPage=10;isModalOpen=!1;isSaving=!1;editingId=null;form={fullName:"",dni:"",cmp:"",email:"",phone:"",active:!0,photoUrl:""};showInactive=!1;get filteredDoctors(){return this.doctors().filter(a=>{let e=a.fullName.toLowerCase().includes(this.searchTerm.toLowerCase())||a.cmp&&a.cmp.includes(this.searchTerm),n=this.showInactive||a.active;return e&&n})}get paginatedDoctors(){let a=(this.currentPage-1)*this.itemsPerPage;return this.filteredDoctors.slice(a,a+this.itemsPerPage)}onPageChange(a){this.currentPage=a}onSearchChange(){this.currentPage=1}get isFormValid(){return this.form.fullName?.trim()&&this.form.phone?.trim()&&this.form.cmp?.trim()&&this.form.dni?.trim()}isMissingData(a){return!a.fullName?.trim()||!a.phone?.trim()||!a.cmp?.trim()||!a.dni?.trim()}getMissingFields(a){let e=[];return a.fullName?.trim()||e.push("Nombre"),a.phone?.trim()||e.push("Tel\xE9fono"),a.cmp?.trim()||e.push("CMP"),a.dni?.trim()||e.push("DNI"),e}openModal(a){a?(this.editingId=a.id,this.form=M({},a)):(this.editingId=null,this.form={fullName:"",dni:"",cmp:"",email:"",phone:"",active:!0,photoUrl:"https://ui-avatars.com/api/?background=random"}),this.isModalOpen=!0}closeModal(){this.isModalOpen=!1}save(){this.isSaving=!0,(!this.form.photoUrl||this.form.photoUrl.includes("ui-avatars"))&&(this.form.photoUrl?.startsWith("data:image")||(this.form.photoUrl=`https://ui-avatars.com/api/?name=${encodeURIComponent(this.form.fullName)}&background=random`)),(this.editingId?this.service.updateDoctor(this.editingId,this.form):this.service.addDoctor(this.form)).subscribe({next:()=>{this.isSaving=!1,this.closeModal()},error:e=>{console.error("Error saving doctor:",e),this.isSaving=!1,e.status===500?alert("Error interno. Es posible que el correo ya est\xE9 registrado o haya datos inv\xE1lidos."):alert("Ocurri\xF3 un error al guardar el m\xE9dico. Por favor intente nuevamente.")}})}toggleActive(a){this.service.updateDoctor(a.id,{active:!a.active}).subscribe()}onFileSelected(a){let e=a.target.files[0];if(e){let n=new FileReader;n.onload=r=>{this.form.photoUrl=r.target.result},n.readAsDataURL(e)}}static \u0275fac=function(e){return new(e||m)};static \u0275cmp=I({type:m,selectors:[["app-doctors-list"]],decls:24,vars:9,consts:[[1,"px-4","sm:px-6","lg:px-8"],[1,"sm:flex","sm:items-center"],[1,"sm:flex-auto"],[1,"text-xl","font-semibold","text-gray-900"],[1,"mt-2","text-sm","text-gray-700"],[1,"mt-4","sm:ml-16","sm:mt-0","sm:flex-none"],[1,"block","rounded-md","bg-blue-600","px-3","py-2","text-center","text-sm","font-semibold","text-white","shadow-sm","hover:bg-blue-500","flex","items-center","gap-2",3,"click"],[1,"w-4","h-4",3,"img"],[1,"mt-8","flow-root"],[1,"mb-6","relative","max-w-sm"],[1,"absolute","inset-y-0","left-0","pl-3","flex","items-center","pointer-events-none"],[1,"h-5","w-5","text-gray-400",3,"img"],["type","text","placeholder","Buscar por nombre o CMP...",1,"block","w-full","pl-10","pr-3","py-2","border","border-gray-300","rounded-md","leading-5","bg-white","placeholder-gray-500","focus:outline-none","focus:ring-blue-500","focus:border-blue-500","sm:text-sm",3,"ngModelChange","ngModel"],[1,"mb-6","flex","items-center"],["id","showInactive","type","checkbox",1,"h-4","w-4","rounded","border-gray-300","text-blue-600","focus:ring-blue-600",3,"ngModelChange","change","ngModel"],["for","showInactive",1,"ml-2","block","text-sm","text-gray-900"],[1,"grid","grid-cols-1","gap-6","sm:grid-cols-2","lg:grid-cols-3"],["class","col-span-1 divide-y divide-gray-200 rounded-lg bg-white shadow border border-gray-100 transition-all hover:shadow-md",4,"ngFor","ngForOf"],[3,"pageChange","currentPage","totalItems","pageSize"],["class","fixed inset-0 z-20 w-screen overflow-y-auto",4,"ngIf"],[1,"col-span-1","divide-y","divide-gray-200","rounded-lg","bg-white","shadow","border","border-gray-100","transition-all","hover:shadow-md"],[1,"p-6","relative"],[1,"flex","justify-between","items-start"],[1,"flex-1","pr-4"],[1,"flex","items-center","gap-2","mb-1"],[1,"text-base","font-bold","text-gray-900","leading-tight"],["class","inline-flex items-center rounded-full bg-green-50 px-2 py-0.5 text-xs font-medium text-green-700 ring-1 ring-inset ring-green-600/20",4,"ngIf"],["class","inline-flex items-center rounded-full bg-gray-50 px-2 py-0.5 text-xs font-medium text-gray-600 ring-1 ring-inset ring-gray-500/10",4,"ngIf"],["class","tooltip-container cursor-help relative group",4,"ngIf"],[1,"flex","items-start","gap-4","text-sm","text-gray-500","mb-2"],[1,"flex","flex-col"],[1,"text-xs","text-gray-400"],[1,"font-medium","text-gray-700","flex","items-center","gap-1"],[1,"w-3","h-3",3,"img"],[1,"flex","items-center","text-sm"],[1,"w-4","h-4","text-yellow-400","fill-yellow-400",3,"img"],[1,"ml-1","font-bold","text-gray-900"],[1,"ml-1","text-gray-400","text-xs"],[1,"flex-shrink-0"],[1,"h-14","w-14","rounded-full","bg-blue-900","flex","items-center","justify-center","text-white","text-xl","font-bold","uppercase","overflow-hidden","ring-4","ring-white","shadow-sm"],["class","h-full w-full object-cover",3,"src",4,"ngIf"],[4,"ngIf"],[1,"border-t","border-gray-100","grid","grid-cols-2","divide-x","divide-gray-100"],["target","_blank",1,"flex","items-center","justify-center","gap-2","py-3","text-sm","font-semibold","text-gray-700","hover:bg-gray-50","transition-colors",3,"href"],[1,"flex","items-center","justify-center","gap-2","py-3","text-sm","font-semibold","text-gray-700","hover:bg-gray-50","transition-colors",3,"href"],[1,"border-t","border-gray-100","p-2","flex","items-center","justify-between","gap-2"],[1,"p-2.5","rounded-lg","transition-colors",3,"click","title"],[1,"w-5","h-5",3,"img"],[1,"flex-1","flex","justify-end","gap-1"],[1,"px-3","py-2","text-sm","font-medium","text-blue-600","hover:bg-blue-50","rounded-md","transition-colors",3,"click"],[1,"px-3","py-2","text-sm","font-medium","text-gray-600","hover:bg-gray-50","rounded-md","transition-colors",3,"routerLink"],[1,"inline-flex","items-center","rounded-full","bg-green-50","px-2","py-0.5","text-xs","font-medium","text-green-700","ring-1","ring-inset","ring-green-600/20"],[1,"inline-flex","items-center","rounded-full","bg-gray-50","px-2","py-0.5","text-xs","font-medium","text-gray-600","ring-1","ring-inset","ring-gray-500/10"],[1,"tooltip-container","cursor-help","relative","group"],[1,"w-4","h-4","text-amber-500","animate-pulse",3,"img"],[1,"absolute","bottom-full","left-1/2","transform","-translate-x-1/2","mb-2","hidden","group-hover:block","w-48","p-2","bg-gray-800","text-white","text-xs","rounded","z-50"],[1,"h-full","w-full","object-cover",3,"src"],[1,"fixed","inset-0","z-20","w-screen","overflow-y-auto"],[1,"flex","min-h-full","items-end","justify-center","p-4","text-center","sm:items-center","sm:p-0"],[1,"fixed","inset-0","bg-gray-500","bg-opacity-75","transition-opacity",3,"click"],[1,"relative","transform","overflow-hidden","rounded-lg","bg-white","px-4","pb-4","pt-5","text-left","shadow-xl","transition-all","sm:my-8","sm:w-full","sm:max-w-lg","sm:p-6"],[1,"absolute","right-0","top-0","hidden","pr-4","pt-4","sm:block"],["type","button",1,"rounded-md","bg-white","text-gray-400","hover:text-gray-500",3,"click"],[1,"sr-only"],["fill","none","viewBox","0 0 24 24","stroke-width","1.5","stroke","currentColor",1,"h-6","w-6"],["stroke-linecap","round","stroke-linejoin","round","d","M6 18L18 6M6 6l12 12"],[1,"mt-3","w-full"],[1,"text-base","font-semibold","leading-6","text-gray-900","text-center","sm:text-left"],[1,"mt-6"],["class","mb-6 rounded-lg bg-amber-50 p-4 border-l-4 border-amber-400",4,"ngIf"],[1,"grid","grid-cols-1","gap-x-6","gap-y-4","sm:grid-cols-6"],[1,"sm:col-span-6","mb-4"],[1,"block","text-sm","font-medium","leading-6","text-gray-900","mb-2"],[1,"flex","items-center","gap-x-3"],["alt","Preview",1,"h-12","w-12","rounded-full","object-cover","bg-gray-50",3,"src"],["type","file","accept","image/*",1,"rounded-md","bg-white","px-2.5","py-1.5","text-sm","font-semibold","text-gray-900","shadow-sm","ring-1","ring-inset","ring-gray-300","hover:bg-gray-50",3,"change"],[1,"sm:col-span-6","mb-2"],[1,"text-red-500"],["type","text",1,"block","w-full","rounded-md","border-0","py-2.5","px-6","text-gray-900","shadow-sm","ring-1","ring-inset","ring-gray-300","placeholder:text-gray-400","focus:ring-2","focus:ring-inset","focus:ring-blue-600","sm:text-sm","sm:leading-6",3,"ngModelChange","ngModel"],[1,"sm:col-span-3","mb-2"],["type","email",1,"block","w-full","rounded-md","border-0","py-2.5","px-6","text-gray-900","shadow-sm","ring-1","ring-inset","ring-gray-300","placeholder:text-gray-400","focus:ring-2","focus:ring-inset","focus:ring-blue-600","sm:text-sm","sm:leading-6",3,"ngModelChange","ngModel"],[1,"sm:col-span-6","flex","items-center","mt-2"],["type","checkbox",1,"h-4","w-4","rounded","border-gray-300","text-blue-600","focus:ring-blue-600",3,"ngModelChange","ngModel"],[1,"ml-2","block","text-sm","text-gray-900"],[1,"mt-8","sm:flex","sm:flex-row-reverse"],["type","button",1,"inline-flex","w-full","justify-center","rounded-md","bg-blue-600","px-3","py-2","text-sm","font-semibold","text-white","shadow-sm","hover:bg-blue-500","sm:ml-3","sm:w-auto","disabled:opacity-50","disabled:cursor-not-allowed",3,"click","disabled"],["type","button",1,"mt-3","inline-flex","w-full","justify-center","rounded-md","bg-white","px-3","py-2","text-sm","font-semibold","text-gray-900","shadow-sm","ring-1","ring-inset","ring-gray-300","hover:bg-gray-50","sm:mt-0","sm:w-auto",3,"click"],[1,"mb-6","rounded-lg","bg-amber-50","p-4","border-l-4","border-amber-400"],[1,"flex"],[1,"h-5","w-5","text-amber-400",3,"img"],[1,"ml-3"],[1,"text-sm","font-medium","text-amber-800"],[1,"mt-2","text-sm","text-amber-700"],[1,"font-bold","underline"]],template:function(e,n){e&1&&(t(0,"div",0)(1,"div",1)(2,"div",2)(3,"h1",3),l(4,"Especialistas"),i(),t(5,"p",4),l(6,"Gesti\xF3n de especialistas, colegiatura y estado."),i()(),t(7,"div",5)(8,"button",6),f("click",function(){return n.openModal()}),u(9,"lucide-icon",7),l(10," Nuevo especialista "),i()()(),t(11,"div",8)(12,"div",9)(13,"div",10),u(14,"lucide-icon",11),i(),t(15,"input",12),v("ngModelChange",function(s){return h(n.searchTerm,s)||(n.searchTerm=s),s}),f("ngModelChange",function(){return n.onSearchChange()}),i()(),t(16,"div",13)(17,"input",14),v("ngModelChange",function(s){return h(n.showInactive,s)||(n.showInactive=s),s}),f("change",function(){return n.onSearchChange()}),i(),t(18,"label",15),l(19,"Mostrar inactivos"),i()(),t(20,"div",16),_(21,me,48,24,"div",17),i(),t(22,"app-pagination",18),f("pageChange",function(s){return n.onPageChange(s)}),i()()(),_(23,ge,60,12,"div",19)),e&2&&(o(9),d("img",n.icons.Plus),o(5),d("img",n.icons.Search),o(),x("ngModel",n.searchTerm),o(2),x("ngModel",n.showInactive),o(4),d("ngForOf",n.paginatedDoctors),o(),d("currentPage",n.currentPage)("totalItems",n.filteredDoctors.length)("pageSize",n.itemsPerPage),o(),d("ngIf",n.isModalOpen))},dependencies:[V,P,T,K,J,$,X,Q,Y,Z,W,te],styles:['.tooltip-container[_ngcontent-%COMP%]{position:relative;display:inline-block}.tooltip-text[_ngcontent-%COMP%]{visibility:hidden;width:160px;background-color:#1e293b;color:#fff;text-align:center;border-radius:6px;padding:8px;position:absolute;z-index:100;top:150%;left:50%;margin-left:-80px;opacity:0;transition:opacity .2s;font-size:.75rem;pointer-events:none;box-shadow:0 10px 15px -3px #0000001a}.tooltip-text[_ngcontent-%COMP%]:after{content:"";position:absolute;bottom:100%;left:50%;margin-left:-5px;border-width:5px;border-style:solid;border-color:transparent transparent #1e293b transparent}.tooltip-container[_ngcontent-%COMP%]:hover   .tooltip-text[_ngcontent-%COMP%]{visibility:visible;opacity:1}']})};export{ie as DoctorsListComponent};
