import{a as l}from"./chunk-MZ3EZVY4.js";import{Ec as h,N as i,R as c,W as d,ia as o}from"./chunk-2BMW4ZRB.js";var n=class r{http=d(h);apiUrl=`${l.apiUrl}/scheduling`;schedules=o([]);constructor(){this.refreshSchedules()}refreshSchedules(e){let t=`${this.apiUrl}/schedules`;e?.doctorId&&(t=`${this.apiUrl}/doctors/${e.doctorId}/schedules`),this.http.get(t).subscribe(s=>{if(e?.doctorId){let u=this.schedules().filter(p=>p.doctorId!==e.doctorId);this.schedules.set([...u,...s])}else this.schedules.set(s)})}getSchedules(){return this.schedules()}addSchedule(e,t){return this.http.post(`${this.apiUrl}/doctors/${e}/schedules`,{items:t}).pipe(i(()=>this.refreshSchedules({doctorId:e})))}removeSchedule(e,t){return this.http.delete(`${this.apiUrl}/schedules/${e}`).pipe(i(()=>this.refreshSchedules({doctorId:t})))}getSchedulesForDoctor(e,t){return this.schedules().filter(s=>s.doctorId===e&&s.specialtyId===t)}static \u0275fac=function(t){return new(t||r)};static \u0275prov=c({token:r,factory:r.\u0275fac,providedIn:"root"})};export{n as a};
