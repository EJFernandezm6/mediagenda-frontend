import{a as we}from"./chunk-F4XDUUL3.js";import{a as _e}from"./chunk-XDE6YBVU.js";import{c as ee}from"./chunk-2OTJ67ZJ.js";import{a as Se}from"./chunk-KZXHYW2H.js";import{a as ve}from"./chunk-FBFLQNJ5.js";import{a as be,b as Ce}from"./chunk-FTFAWZSP.js";import{a as he}from"./chunk-U7G55PT5.js";import{b as ge,d as ue,g as xe,u as fe}from"./chunk-OABQPEKD.js";import{a as ye}from"./chunk-KR7YXPEX.js";import"./chunk-MZ3EZVY4.js";import{$ as _,Ab as y,Ad as se,Ba as r,Bb as M,Cb as B,Db as W,Dd as de,Jb as G,Mb as U,Nb as Y,Od as ce,Ra as H,Rc as te,Sd as pe,Td as me,Uc as ne,Va as u,Vb as P,Vc as ie,W as O,Wb as q,Xc as oe,Yc as ae,_c as re,a as R,aa as g,ad as le,b as j,cb as c,db as a,eb as l,fb as h,ia as A,jb as E,kb as k,lc as J,mb as w,mc as K,nb as m,nc as Q,ob as d,rc as X,vc as Z,xa as L,xb as $,yb as I,zb as s}from"./chunk-2BMW4ZRB.js";var Ee=()=>["YAPE","PLIN"];function ke(o,t){if(o&1&&(E(0),a(1,"span",32),s(2),l(),a(3,"span",33),s(4),l(),k()),o&2){let e=d();r(2),W(" ",e.weekDays()[0].dayNum," ",e.weekDays()[0].monthName," - ",e.weekDays()[6].dayNum," ",e.weekDays()[6].monthName," "),r(2),M(" ",e.weekDays()[0].date.getFullYear()," ")}}function Te(o,t){if(o&1&&(E(0),a(1,"span",34),s(2),U(3,"titlecase"),l(),k()),o&2){let e=d();r(2),M(" ",Y(3,1,e.currentDateStr())," ")}}function Ne(o,t){if(o&1&&(a(0,"div",36)(1,"p",37),s(2),l(),a(3,"div",38)(4,"span",39),s(5),l(),a(6,"span",40),s(7),l()()()),o&2){let e=t.$implicit;r(2),y(e.dayName),r(3),y(e.dayNum),r(2),y(e.monthName)}}function Pe(o,t){if(o&1&&(E(0),u(1,Ne,8,3,"div",35),k()),o&2){let e=d();r(),c("ngForOf",e.weekDays())}}function Ve(o,t){if(o&1&&(E(0),a(1,"div",41)(2,"p",42),s(3),l()(),k()),o&2){let e=d();r(3),y(e.currentDateStr())}}function Oe(o,t){o&1&&h(0,"div",49)}function Fe(o,t){if(o&1&&(E(0),a(1,"span"),s(2),l(),a(3,"span",56),s(4),l(),k()),o&2){let e=d(2).$implicit,i=d(5);r(),I(e.isPast?"text-[9px] font-medium truncate w-full text-center":"text-[9px] font-medium text-primary truncate w-full text-center"),r(),y(e.doctorName),r(2),y(i.getSpecialtyName(e.specialtyId))}}function $e(o,t){if(o&1&&h(0,"lucide-icon",57),o&2){let e=d(7);c("img",e.icons.Plus)}}function Re(o,t){if(o&1){let e=w();a(0,"button",52),m("click",function(){_(e);let n=d().$implicit,p=d(2).$implicit,x=d(2).$implicit,f=d();return g(!n.isPast&&f.openBookingModal(p.iso,x,n.doctorId,n.specialtyId))}),u(1,Fe,5,4,"ng-container",23)(2,$e,1,1,"lucide-icon",53),a(3,"div",54)(4,"div"),s(5),l(),a(6,"div",55),s(7),l()()()}if(o&2){let e=d().$implicit,i=d().ngIf,n=d(4);c("disabled",e.isPast)("ngClass",(i.length>=3?"w-8 h-8 p-0 justify-center ":"w-full min-h-[30px] p-0.5 ")+(e.isPast?"opacity-100 cursor-not-allowed bg-gray-200 border-gray-300 border-dashed text-gray-500":"cursor-pointer hover:bg-primary hover:border-solid hover:shadow-md bg-primary border-primary border-dashed")),r(),c("ngIf",i.length<3),r(),c("ngIf",i.length>=3),r(3),y(e.doctorName),r(2),y(n.getSpecialtyName(e.specialtyId))}}function je(o,t){if(o&1&&(E(0),a(1,"div",62),s(2),l(),a(3,"div",63),s(4),l(),k()),o&2){let e=d(2).$implicit,i=d(5);r(2),y(i.getPatientName(e.appointment.patientId)),r(2),y(i.getSpecialtyName(e.appointment.specialtyId))}}function Le(o,t){if(o&1&&h(0,"lucide-icon",68),o&2){let e=d(8);c("img",e.icons.CheckCircle)}}function ze(o,t){if(o&1&&h(0,"lucide-icon",69),o&2){let e=d(8);c("img",e.icons.HelpCircle)}}function He(o,t){if(o&1&&(a(0,"div",70),s(1),l()),o&2){let e=d(3).$implicit,i=d(5);r(),M(" ",i.getPatientName(e.appointment.patientId).charAt(0)," ")}}function Be(o,t){if(o&1&&(a(0,"div",64),u(1,Le,1,1,"lucide-icon",65)(2,ze,1,1,"lucide-icon",66)(3,He,2,1,"div",67),l()),o&2){let e=d(2).$implicit;r(),c("ngIf",e.appointment.paymentStatus==="PAID"),r(),c("ngIf",e.appointment.status==="CONFIRMED"&&e.appointment.paymentStatus==="PENDING"),r(),c("ngIf",e.appointment.paymentStatus!=="PAID"&&!(e.appointment.status==="CONFIRMED"&&e.appointment.paymentStatus==="PENDING"))}}function We(o,t){if(o&1){let e=w();a(0,"button",58),m("click",function(n){_(e);let p=d().$implicit;return d(5).openAppointmentDetails(p.appointment),g(n.stopPropagation())}),u(1,je,5,2,"ng-container",23)(2,Be,4,3,"div",59),a(3,"div",60)(4,"div",61),s(5),l(),a(6,"div"),s(7),l(),a(8,"div",55),s(9),l()()()}if(o&2){let e=d().$implicit,i=d().ngIf,n=d(4);I("rounded border-l-4 shadow-sm cursor-pointer hover:shadow-md transition-all relative group flex flex-col justify-center "+n.getAppointmentColorClass(e.appointment)),c("ngClass",i.length>=3?"w-8 h-8 p-0 justify-center items-center":"w-full min-h-[40px] p-1.5 text-left"),r(),c("ngIf",i.length<3),r(),c("ngIf",i.length>=3),r(3),M("",n.getPatientName(e.appointment.patientId)," "),r(2),y(n.getSpecialtyName(e.appointment.specialtyId)),r(2),y(n.getAppointmentStatusLabel(e.appointment))}}function Ge(o,t){if(o&1&&(E(0),u(1,Re,8,6,"button",50)(2,We,10,8,"button",51),k()),o&2){let e=t.$implicit;r(),c("ngIf",e.type==="available"),r(),c("ngIf",e.type==="booked")}}function Ue(o,t){if(o&1&&(E(0),u(1,Oe,1,0,"div",46),a(2,"div",47),u(3,Ge,3,2,"ng-container",48),l(),k()),o&2){let e=t.ngIf;r(),c("ngIf",e.length===0),r(),c("ngClass",e.length>=3?"flex flex-row flex-wrap content-start gap-1 p-1":"flex flex-col gap-1"),r(),c("ngForOf",e)}}function Ye(o,t){if(o&1&&(a(0,"div"),u(1,Ue,4,3,"ng-container",23),l()),o&2){let e=t.$implicit,i=t.index,n=d(2).$implicit,p=d();I((!p.isWorkingDay(i)||p.isPastDate(e.iso)?"bg-gray-100/70 ":"")+"border-r border-gray-100 last:border-r-0 relative p-1 min-h-[3.5rem]"),r(),c("ngIf",p.getSlotStatus(e.iso,n,i))}}function qe(o,t){if(o&1&&(E(0),u(1,Ye,2,3,"div",45),k()),o&2){let e=d(2);r(),c("ngForOf",e.weekDays())}}function Je(o,t){o&1&&h(0,"div",73)}function Ke(o,t){if(o&1&&(a(0,"div",79)(1,"div",80),s(2),l(),a(3,"div",81),s(4),l()()),o&2){let e=d(2).$implicit,i=d(4);r(2),M(" ",e.doctorName),r(2),y(i.getSpecialtyName(e.specialtyId))}}function Qe(o,t){if(o&1&&(a(0,"div",82),h(1,"lucide-icon",83),l()),o&2){let e=d(6);r(),c("img",e.icons.Plus)}}function Xe(o,t){if(o&1&&h(0,"lucide-icon",57),o&2){let e=d(6);c("img",e.icons.Plus)}}function Ze(o,t){if(o&1){let e=w();a(0,"button",75),m("click",function(){_(e);let n=d().$implicit,p=d(3).$implicit,x=d();return g(x.openBookingModal(x.currentDate().toISOString().split("T")[0],p,n.doctorId,n.specialtyId))}),u(1,Ke,5,2,"div",76)(2,Qe,2,1,"div",77)(3,Xe,1,1,"lucide-icon",53),a(4,"div",78)(5,"div"),s(6),l(),a(7,"div",55),s(8),l()()()}if(o&2){let e=d().$implicit,i=d().ngIf,n=d(3);c("ngClass",i.length>=3?"w-8 h-8 p-0 justify-center":"flex-1 p-2 justify-between min-w-[140px]"),r(),c("ngIf",i.length<3),r(),c("ngIf",i.length<3),r(),c("ngIf",i.length>=3),r(3),y(e.doctorName),r(2),y(n.getSpecialtyName(e.specialtyId))}}function et(o,t){if(o&1&&(a(0,"div",86)(1,"div",87),s(2),l(),a(3,"div",88),s(4),l()()),o&2){let e=d(2).$implicit,i=d(4);r(2),M("",i.getPatientName(e.appointment.patientId)," "),r(2),y(i.getSpecialtyName(e.appointment.specialtyId))}}function tt(o,t){if(o&1&&h(0,"lucide-icon",68),o&2){let e=d(7);c("img",e.icons.CheckCircle)}}function nt(o,t){if(o&1&&h(0,"lucide-icon",69),o&2){let e=d(7);c("img",e.icons.HelpCircle)}}function it(o,t){if(o&1&&(a(0,"div",90),s(1),l()),o&2){let e=d(3).$implicit,i=d(4);r(),M(" ",i.getPatientName(e.appointment.patientId).charAt(0)," ")}}function ot(o,t){if(o&1&&(a(0,"div",64),u(1,tt,1,1,"lucide-icon",65)(2,nt,1,1,"lucide-icon",66)(3,it,2,1,"div",89),l()),o&2){let e=d(2).$implicit;r(),c("ngIf",e.appointment.paymentStatus==="PAID"),r(),c("ngIf",e.appointment.status==="CONFIRMED"&&e.appointment.paymentStatus==="PENDING"),r(),c("ngIf",e.appointment.paymentStatus!=="PAID"&&!(e.appointment.status==="CONFIRMED"&&e.appointment.paymentStatus==="PENDING"))}}function at(o,t){if(o&1){let e=w();a(0,"div",58),m("click",function(){_(e);let n=d().$implicit,p=d(4);return g(p.openAppointmentDetails(n.appointment))}),u(1,et,5,2,"div",84)(2,ot,4,3,"div",59),a(3,"div",85)(4,"div",61),s(5),l(),a(6,"div"),s(7),l(),a(8,"div",55),s(9),l()()()}if(o&2){let e=d().$implicit,i=d().ngIf,n=d(3);I("rounded-lg border-l-4 shadow-sm cursor-pointer hover:shadow hover:scale-[1.01] transition-all relative group/card flex items-center "+n.getAppointmentColorClass(e.appointment)),c("ngClass",i.length>=3?"w-8 h-8 p-0 justify-center":"flex-1 p-2 min-w-[140px]"),r(),c("ngIf",i.length<3),r(),c("ngIf",i.length>=3),r(3),M("",n.getPatientName(e.appointment.patientId)," "),r(2),y(n.getSpecialtyName(e.appointment.specialtyId)),r(2),M("",n.getAppointmentStatusLabel(e.appointment)," ")}}function rt(o,t){if(o&1&&(E(0),u(1,Ze,9,6,"button",74)(2,at,10,8,"div",51),k()),o&2){let e=t.$implicit;r(),c("ngIf",e.type==="available"),r(),c("ngIf",e.type==="booked")}}function lt(o,t){if(o&1&&(E(0),u(1,Je,1,0,"div",72),a(2,"div",47),u(3,rt,3,2,"ng-container",48),l(),k()),o&2){let e=t.ngIf;r(),c("ngIf",e.length===0),r(),c("ngClass",e.length>=3?"flex flex-wrap content-start gap-1 p-1":"flex gap-2"),r(),c("ngForOf",e)}}function st(o,t){if(o&1&&(E(0),a(1,"div",71),u(2,lt,4,3,"ng-container",23),l(),k()),o&2){let e=d().$implicit,i=d();r(2),c("ngIf",i.getSlotStatus(i.currentDate().toISOString().split("T")[0],e,0))}}function dt(o,t){if(o&1&&(a(0,"div",43)(1,"div",44),s(2),l(),u(3,qe,2,1,"ng-container",23)(4,st,3,1,"ng-container",23),l()),o&2){let e=t.$implicit,i=d();I((i.viewMode()==="week"?"grid-cols-8":"grid-cols-[auto_1fr]")+(i.isBreakTime(e)?" bg-gray-100":"")),r(2),M(" ",e," "),r(),c("ngIf",i.viewMode()==="week"),r(),c("ngIf",i.viewMode()==="day")}}function ct(o,t){if(o&1){let e=w();a(0,"button",25),m("click",function(){let n=_(e).$implicit,p=d(3);return g(p.modalTime.set(n))}),s(1),l()}if(o&2){let e=t.$implicit,i=d(3);I("py-2 px-1 h-10 flex items-center justify-center text-sm font-bold rounded-xl border-2 transition-all duration-200 "+(i.modalTime()===e?"bg-primary border-primary text-white shadow-lg shadow-primary scale-105":"bg-white border-gray-200 text-gray-700 hover:border-primary hover:shadow-md hover:scale-102")),r(),M(" ",e," ")}}function pt(o,t){if(o&1&&(a(0,"div",124),u(1,ct,2,3,"button",125),l()),o&2){let e=d(2);r(),c("ngForOf",e.availableSlotsForModal())}}function mt(o,t){if(o&1&&(a(0,"div",126),h(1,"lucide-icon",127),a(2,"p",128),s(3),l()()),o&2){let e=d(2);r(),c("img",e.icons.Clock),r(2),M(" ",!e.modalDoctorId()||!e.modalDate()?"Selecciona m\xE9dico y fecha para ver horarios.":"No hay horarios disponibles para esta fecha."," ")}}function _t(o,t){if(o&1){let e=w();a(0,"div",129)(1,"label",104),s(2," Comprobante de Pago (URL) "),l(),a(3,"input",130),m("ngModelChange",function(n){_(e);let p=d(2);return g(p.modalPaymentProof.set(n))}),l()()}if(o&2){let e=d(2);r(3),c("ngModel",e.modalPaymentProof())}}function gt(o,t){o&1&&(a(0,"span"),s(1,"Confirmar Cita"),l())}function ut(o,t){o&1&&(a(0,"span"),s(1,"Guardando..."),l())}function xt(o,t){if(o&1){let e=w();a(0,"div",91)(1,"div",92),m("click",function(){_(e);let n=d();return g(n.tryCloseBookingModal())}),l(),a(2,"div",93)(3,"div",94)(4,"div")(5,"h2",95),s(6,"Agendar nueva cita"),l(),a(7,"p",96),s(8,"Selecciona los detalles de tu consulta"),l()(),a(9,"button",97),m("click",function(){_(e);let n=d();return g(n.tryCloseBookingModal())}),h(10,"lucide-icon",98),l()(),a(11,"div",99)(12,"div",100)(13,"div",101)(14,"div")(15,"h3",102),s(16,"Detalles"),l(),a(17,"p",103),s(18,"Completa la informaci\xF3n requerida"),l()(),a(19,"div")(20,"label",104),s(21," Especialidad "),a(22,"span",105),s(23,"*"),l()(),a(24,"app-searchable-select",106),m("ngModelChange",function(n){_(e);let p=d();return p.modalSpecialtyId.set(n.toString()),g(p.modalDoctorId.set(""))}),l()(),a(25,"div")(26,"label",104),s(27," M\xE9dico "),a(28,"span",105),s(29,"*"),l()(),a(30,"app-searchable-select",107),m("ngModelChange",function(n){_(e);let p=d();return g(p.modalDoctorId.set(n.toString()))}),l()(),a(31,"div")(32,"label",104),s(33," Fecha "),a(34,"span",105),s(35,"*"),l()(),a(36,"input",108),m("ngModelChange",function(n){_(e);let p=d();return g(p.modalDate.set(n))}),l()(),a(37,"div")(38,"label",104),s(39," Paciente "),a(40,"span",105),s(41,"*"),l()(),a(42,"app-searchable-select",109),m("ngModelChange",function(n){_(e);let p=d();return g(p.modalPatientId.set(n.toString()))}),l()()(),a(43,"div",110)(44,"h3",111),s(45," Horarios disponibles "),l(),u(46,pt,2,1,"div",112)(47,mt,4,2,"div",113),l()(),a(48,"div",114)(49,"h3",115),s(50,"Informaci\xF3n Adicional"),l(),a(51,"div",116)(52,"button",117),m("click",function(){_(e);let n=d();return g(n.modalPaymentMethod.set("CASH"))}),a(53,"span",118),s(54,"Efectivo"),l()(),a(55,"button",117),m("click",function(){_(e);let n=d();return g(n.modalPaymentMethod.set("YAPE"))}),a(56,"span",118),s(57,"Yape"),l()(),a(58,"button",117),m("click",function(){_(e);let n=d();return g(n.modalPaymentMethod.set("PLIN"))}),a(59,"span",118),s(60,"Plin"),l()(),a(61,"button",117),m("click",function(){_(e);let n=d();return g(n.modalPaymentMethod.set("CARD"))}),a(62,"span",118),s(63,"Tarjeta"),l()()(),u(64,_t,4,1,"div",119),a(65,"div")(66,"label",104),s(67,"Notas"),l(),a(68,"textarea",120),m("ngModelChange",function(n){_(e);let p=d();return g(p.modalNotes.set(n))}),l()()()(),a(69,"div",121)(70,"button",122),m("click",function(){_(e);let n=d();return g(n.tryCloseBookingModal())}),s(71," Cancelar "),l(),a(72,"button",123),m("click",function(){_(e);let n=d();return g(n.saveAppointment())}),u(73,gt,2,0,"span",23)(74,ut,2,0,"span",23),l()()()()}if(o&2){let e=d();r(10),c("img",e.icons.Plus),r(14),c("options",e.modalSpecialtyOptions)("ngModel",e.modalSpecialtyId()),r(6),c("options",e.modalDoctorOptions)("ngModel",e.modalDoctorId())("disabled",!e.modalSpecialtyId()),r(6),c("ngModel",e.modalDate()),r(6),c("options",e.modalPatientOptions)("ngModel",e.modalPatientId()),r(4),c("ngIf",e.availableSlotsForModal().length>0),r(),c("ngIf",e.availableSlotsForModal().length===0),r(5),I("flex flex-col items-center justify-center p-3 rounded-xl border-2 transition-all "+(e.modalPaymentMethod()==="CASH"?"border-primary bg-primary":"border-gray-200 bg-white hover:border-gray-300")),r(),$("text-primary",e.modalPaymentMethod()==="CASH"),r(2),I("flex flex-col items-center justify-center p-3 rounded-xl border-2 transition-all "+(e.modalPaymentMethod()==="YAPE"?"border-primary bg-primary":"border-gray-200 bg-white hover:border-gray-300")),r(),$("text-primary",e.modalPaymentMethod()==="YAPE"),r(2),I("flex flex-col items-center justify-center p-3 rounded-xl border-2 transition-all "+(e.modalPaymentMethod()==="PLIN"?"border-primary bg-primary":"border-gray-200 bg-white hover:border-gray-300")),r(),$("text-primary",e.modalPaymentMethod()==="PLIN"),r(2),I("flex flex-col items-center justify-center p-3 rounded-xl border-2 transition-all "+(e.modalPaymentMethod()==="CARD"?"border-primary bg-primary":"border-gray-200 bg-white hover:border-gray-300")),r(),$("text-primary",e.modalPaymentMethod()==="CARD"),r(2),c("ngIf",G(33,Ee).includes(e.modalPaymentMethod())),r(4),c("ngModel",e.modalNotes()),r(2),c("disabled",e.saving()),r(2),c("disabled",e.saving()||!e.modalPatientId()||!e.modalTime()||!e.modalDoctorId()),r(),c("ngIf",!e.saving()),r(),c("ngIf",e.saving())}}function ft(o,t){if(o&1){let e=w();a(0,"div",129)(1,"button",152),m("click",function(){_(e);let n=d(3);return g(n.validatePayment())}),h(2,"lucide-icon",7),s(3," Confirmar Pago Realizado "),l(),a(4,"p",153),s(5," Esta acci\xF3n marcar\xE1 la cita como "),a(6,"strong"),s(7,"Pagada"),l(),s(8," y "),a(9,"strong"),s(10,"Confirmada"),l(),s(11,". "),l()()}if(o&2){let e=d(3);r(2),c("img",e.icons.CheckCircle)}}function vt(o,t){if(o&1&&(a(0,"div",154)(1,"label",155),s(2,"Comprobante de Pago"),l(),a(3,"div",156),h(4,"img",157),a(5,"a",158)(6,"span",159),h(7,"lucide-icon",21),s(8," Ver completo "),l()()()()),o&2){let e=d(3);r(4),c("src",e.selectedAppointment.paymentProofUrl,L),r(),c("href",e.selectedAppointment.paymentProofUrl,L),r(2),c("img",e.icons.Search)}}function ht(o,t){if(o&1&&(a(0,"div",160)(1,"label",144),s(2,"Notas"),l(),a(3,"p",161),s(4),l()()),o&2){let e=d(3);r(4),M('"',e.selectedAppointment.notes,'"')}}function yt(o,t){if(o&1&&(a(0,"div",137)(1,"div",138)(2,"div",139),h(3,"lucide-icon",140),l(),a(4,"div")(5,"h3",141),s(6),l(),a(7,"p",142),s(8,"Paciente"),l()()(),a(9,"div",143)(10,"div")(11,"label",144),s(12,"M\xE9dico"),l(),a(13,"p",145),s(14),l()(),a(15,"div")(16,"label",144),s(17,"Especialidad"),l(),a(18,"p",145),s(19),l()(),h(20,"div",146),a(21,"div")(22,"label",144),s(23,"Fecha"),l(),a(24,"p",147),s(25),l()(),a(26,"div")(27,"label",144),s(28,"Horario"),l(),a(29,"p",145),s(30),l()()(),a(31,"div",148)(32,"div",149)(33,"label",144),s(34,"Estado"),l(),a(35,"span"),s(36),l()(),a(37,"div",149)(38,"label",144),s(39,"Pago"),l(),a(40,"p",145),s(41),l()()(),u(42,ft,12,1,"div",119)(43,vt,9,3,"div",150)(44,ht,5,1,"div",151),l()),o&2){let e=d(2);r(3),c("img",e.icons.User),r(3),y(e.getPatientName(e.selectedAppointment.patientId)),r(8),y(e.getDoctorName(e.selectedAppointment.doctorId)),r(5),y(e.getSpecialtyName(e.selectedAppointment.specialtyId)),r(6),y(e.formatDate(e.selectedAppointment.appointmentDate)),r(5),B(" ",e.formatTime12Hour(e.selectedAppointment.startTime)," - ",e.formatTime12Hour(e.selectedAppointment.endTime)," "),r(5),I("px-2 py-1 rounded text-xs font-bold "+e.getAppointmentColorClass(e.selectedAppointment)),r(),M(" ",e.getAppointmentStatusLabel(e.selectedAppointment)," "),r(5),y(e.selectedAppointment.paymentMethod),r(),c("ngIf",e.selectedAppointment.paymentStatus!=="PAID"),r(),c("ngIf",e.selectedAppointment.paymentProofUrl),r(),c("ngIf",e.selectedAppointment.notes)}}function bt(o,t){if(o&1){let e=w();a(0,"button",25),m("click",function(){let n=_(e).$implicit,p=d(3);return g(p.modalTime.set(n))}),s(1),l()}if(o&2){let e=t.$implicit,i=d(3);I("py-2 text-xs font-bold rounded-lg border transition-all "+(i.modalTime()===e?"bg-primary text-white border-primary":"bg-white text-gray-700 border-gray-200 hover:border-primary")),r(),M(" ",e," ")}}function Ct(o,t){if(o&1){let e=w();a(0,"div",137)(1,"div",162)(2,"p",163),s(3," Reprogramando cita. Selecciona una nueva fecha o m\xE9dico. "),l()(),a(4,"div",164)(5,"div")(6,"label",165),s(7,"Fecha"),l(),a(8,"input",166),m("ngModelChange",function(n){_(e);let p=d(2);return g(p.modalDate.set(n))}),l()(),a(9,"div",167)(10,"div")(11,"label",165),s(12,"Especialidad"),l(),a(13,"div",168),s(14),l()(),a(15,"div")(16,"label",165),s(17,"M\xE9dico"),l(),a(18,"app-searchable-select",169),m("ngModelChange",function(n){_(e);let p=d(2);return g(p.modalDoctorId.set(n.toString()))}),l()()(),a(19,"div")(20,"label",165),s(21,"Horario"),l(),a(22,"div",170),u(23,bt,2,3,"button",125),l()()()()}if(o&2){let e=d(2);r(8),c("ngModel",e.modalDate()),r(6),y(e.getSpecialtyName(e.modalSpecialtyId())),r(4),c("options",e.modalDoctorOptions)("ngModel",e.modalDoctorId()),r(5),c("ngForOf",e.availableSlotsForModal())}}function St(o,t){if(o&1){let e=w();a(0,"div",171)(1,"div",172),h(2,"lucide-icon",173),l(),a(3,"h3",174),s(4,"\xBFSeguro que deseas cancelar?"),l(),a(5,"p",175),s(6,"La cita de se eliminar\xE1 permanentemente de la agenda."),l(),a(7,"div",176)(8,"button",177),m("click",function(){_(e);let n=d(2);return g(n.cancelCancelConfirmation())}),s(9,"Volver"),l(),a(10,"button",178),m("click",function(){_(e);let n=d(2);return g(n.confirmCancel())}),s(11,"Confirmar"),l()()()}if(o&2){let e=d(2);r(2),c("img",e.icons.AlertCircle)}}function wt(o,t){if(o&1){let e=w();a(0,"button",185),m("click",function(){_(e);let n=d(3);return g(n.showCancelConfirmation())}),s(1," Cancelar "),l()}}function It(o,t){if(o&1){let e=w();a(0,"button",186),m("click",function(){_(e);let n=d(3);return g(n.startRescheduling())}),s(1," Reprogramar "),l()}}function Dt(o,t){if(o&1){let e=w();a(0,"button",187),m("click",function(){_(e);let n=d(3);return g(n.saveRescheduledAppointment())}),s(1," Guardar "),l()}if(o&2){let e=d(3);c("disabled",!e.modalTime())}}function Mt(o,t){if(o&1){let e=w();a(0,"div",179)(1,"button",180),m("click",function(){_(e);let n=d(2);return g(n.tryCloseDetailsModal())}),s(2," Cerrar "),l(),a(3,"div",181),u(4,wt,2,0,"button",182)(5,It,2,0,"button",183)(6,Dt,2,1,"button",184),l()()}if(o&2){let e=d(2);r(4),c("ngIf",!e.isRescheduling&&(e.selectedAppointment==null?null:e.selectedAppointment.status)!=="CANCELLED"),r(),c("ngIf",!e.isRescheduling&&(e.selectedAppointment==null?null:e.selectedAppointment.status)!=="CANCELLED"),r(),c("ngIf",e.isRescheduling)}}function At(o,t){if(o&1){let e=w();a(0,"div",91)(1,"div",92),m("click",function(){_(e);let n=d();return g(n.tryCloseDetailsModal())}),l(),a(2,"div",131)(3,"div")(4,"div")(5,"h2",95),s(6,"Detalles de la cita"),l(),a(7,"p",132),s(8,"Informaci\xF3n completa"),l()(),a(9,"button",97),m("click",function(){_(e);let n=d();return g(n.tryCloseDetailsModal())}),h(10,"lucide-icon",98),l()(),a(11,"div",133),u(12,yt,45,14,"div",134)(13,Ct,24,5,"div",134)(14,St,12,1,"div",135),l(),u(15,Mt,7,3,"div",136),l()()}if(o&2){let e=d();r(3),I(e.getDetailsHeaderClass()+" px-6 py-4 shrink-0 flex items-center justify-between shadow-md z-20 transition-colors duration-300"),r(7),c("img",e.icons.Plus),r(2),c("ngIf",e.selectedAppointment&&!e.isRescheduling&&!e.isConfirmingCancel),r(),c("ngIf",e.isRescheduling),r(),c("ngIf",e.isConfirmingCancel),r(),c("ngIf",!e.isConfirmingCancel)}}var Ie=class o{appointmentsService=O(_e);doctorService=O(ye);specialtyService=O(he);scheduleService=O(Se);patientsService=O(we);doctorSpecialtyService=O(be);configService=O(ve);route=O(ee);icons={ChevronLeft:ne,ChevronRight:ie,Calendar:te,User:ce,Clock:le,Plus:se,Search:de,AlertCircle:oe,CheckCircle:ae,HelpCircle:re};config=this.configService.settings;isWorkingDay(t){let e=(t+1)%7;return this.config().workingDays.includes(e)}isBreakTime(t){return!1}viewMode=A("week");doctors=P(()=>this.doctorService.doctors().filter(t=>t.active));specialties=this.specialtyService.specialties;patients=this.patientsService.patients;appointments=this.appointmentsService.appointments;selectedDoctorId=A("");selectedSpecialtyId=A("");constructor(){this.scheduleService.refreshSchedules(),q(()=>{let t=this.currentDate(),e=this.viewMode(),i,n;if(e==="week"){let p=this.getStartOfWeek(t),x=new Date(p);x.setDate(p.getDate()+6),i=p.toISOString().split("T")[0],n=x.toISOString().split("T")[0]}else i=n=t.toISOString().split("T")[0];this.appointmentsService.refreshAppointmentsByRange(i,n)}),this.route.queryParams.subscribe(t=>{let e=t.appointmentId;e&&this.appointmentsService.getAppointmentById(e).subscribe({next:i=>{if(i){let n=new Date(i.appointmentDate+"T00:00:00");this.currentDate.set(n),this.openAppointmentDetails(i)}}})})}currentDate=A(new Date);currentDateStr=P(()=>this.currentDate().toLocaleDateString("es-ES",{weekday:"long",year:"numeric",month:"long",day:"numeric"}));isModalOpen=!1;saving=A(!1);selectedSlot=null;modalPatientId=A("");modalSpecialtyId=A("");modalDoctorId=A("");modalDate=A(new Date().toISOString().split("T")[0]);modalTime=A("");modalNotes=A("");modalPaymentMethod=A("CASH");modalTransactionId=A("");modalPaymentProof=A("");isDetailsModalOpen=!1;selectedAppointment=null;isRescheduling=!1;isConfirmingCancel=!1;doctorsInCurrentSpecialty=P(()=>{let t=this.isRescheduling?this.modalSpecialtyId():this.selectedSpecialtyId();if(!t)return this.doctors();let i=this.doctorSpecialtyService.associations().filter(n=>n.specialtyId===t).map(n=>n.doctorId);return this.doctors().filter(n=>n.doctorId!=null&&i.includes(n.doctorId))});globalAppointments=P(()=>{let t=this.currentDate().toISOString().split("T")[0];return this.appointments().filter(e=>e.appointmentDate===t&&e.status!=="CANCELLED")});filteredDoctors=P(()=>{let t=this.selectedSpecialtyId();if(!t)return this.doctors();let i=this.doctorSpecialtyService.associations().filter(n=>n.specialtyId===t).map(n=>n.doctorId);return this.doctors().filter(n=>n.doctorId!=null&&i.includes(n.doctorId))});filteredDoctorsForModal=P(()=>{let t=this.modalSpecialtyId();if(!t)return[];let i=this.doctorSpecialtyService.associations().filter(n=>n.specialtyId===t).map(n=>n.doctorId);return this.doctors().filter(n=>n.doctorId!=null&&i.includes(n.doctorId))});get specialtyOptions(){return[{id:"",label:"Todas las especialidades"},...this.specialties().map(t=>({id:t.specialtyId,label:t.name}))]}get doctorOptions(){return[{id:"",label:"Todos los especialistas"},...this.filteredDoctors().map(t=>({id:t.doctorId||t.id,label:t.dni?`${t.dni} - ${t.fullName}`:t.fullName}))]}get modalSpecialtyOptions(){return[{id:"",label:"Seleccionar especialidad"},...this.specialties().map(t=>({id:t.specialtyId,label:t.name}))]}get modalDoctorOptions(){return[{id:"",label:"Seleccionar especialista"},...this.filteredDoctorsForModal().map(t=>({id:t.doctorId||t.id,label:t.dni?`${t.dni} - ${t.fullName}`:t.fullName}))]}get modalPatientOptions(){return[{id:"",label:"Seleccionar paciente"},...this.patients().map(t=>({id:t.patientId,label:t.dni?`${t.dni} - ${t.fullName}`:t.fullName}))]}availableSlotsForModal=P(()=>{let t=this.modalDoctorId(),e=this.modalSpecialtyId(),i=this.modalDate();if(!t||!e||!i)return[];let n=this.getDuration(t,e),p=this.scheduleService.getSchedulesForDoctor(t,e).filter(f=>f.date===i);if(p.length===0)return[];let x=[];for(let f of p){let C=this.getMinutes(this.normalizeTime(f.startTime)),b=this.getMinutes(this.normalizeTime(f.endTime)),v=C;for(;v+n<=b;)x.push(this.formatMinutes(v)),v+=n}return x.filter(f=>!this.appointments().some(b=>b.doctorId===t&&b.appointmentDate===i&&this.normalizeTime(b.startTime)===f&&b.status!=="CANCELLED"))});weekDays=P(()=>{let t=this.getStartOfWeek(this.currentDate()),e=[];for(let i=0;i<7;i++){let n=new Date(t);n.setDate(t.getDate()+i);let p=[n.getFullYear(),(n.getMonth()+1).toString().padStart(2,"0"),n.getDate().toString().padStart(2,"0")].join("-");e.push({date:n,iso:p,dayName:n.toLocaleDateString("es-ES",{weekday:"short"}).replace(".",""),dayNum:n.getDate(),monthName:n.toLocaleDateString("es-ES",{month:"short"}).replace(".","")})}return e});getMinutes(t){let[e,i]=t.split(":").map(Number);return e*60+i}formatMinutes(t){let e=Math.floor(t/60),i=t%60;return`${e.toString().padStart(2,"0")}:${i.toString().padStart(2,"0")}`}normalizeTime(t){if(!t)return"";let e=t.split(":");return e.length>=2?`${e[0].padStart(2,"0")}:${e[1].padStart(2,"0")}`:t}timeSlots=P(()=>{let t=this.selectedDoctorId(),e=this.selectedSpecialtyId(),i=this.viewMode(),n=this.currentDate(),p=new Set,x=t?[t]:this.doctorsInCurrentSpecialty().map(v=>v.doctorId||v.id),f=this.scheduleService.schedules(),C=this.appointments();for(let v of x){let S=f.filter(D=>D.doctorId===v);if(e&&(S=S.filter(D=>D.specialtyId===e)),i==="day"){let D=n.toISOString().split("T")[0];S=S.filter(N=>N.date===D)}else{let D=this.getStartOfWeek(n).toISOString().split("T")[0];S=S.filter(N=>N.date>=D)}for(let D of S){let N=this.getDuration(v,D.specialtyId),T=this.getMinutes(this.normalizeTime(D.startTime)),V=this.getMinutes(this.normalizeTime(D.endTime)),F=T;for(;F<V;)p.add(this.formatMinutes(F)),F+=N}}for(let v of C)t&&v.doctorId!==t||e&&v.specialtyId!==e||v.status!=="CANCELLED"&&(i==="day"&&v.appointmentDate!==n.toISOString().split("T")[0]||p.add(this.normalizeTime(v.startTime)));let b=Array.from(p).sort((v,S)=>this.getMinutes(v)-this.getMinutes(S));if(b.length===0){let v=480,S=1200;for(;v<S;)b.push(this.formatMinutes(v)),v+=30}return b});getStartOfWeek(t){let e=new Date(t),i=e.getDay(),n=e.getDate()-i+(i===0?-6:1);return new Date(e.setDate(n))}changeWeek(t){let e=new Date(this.currentDate());this.viewMode()==="week"?e.setDate(e.getDate()+t*7):e.setDate(e.getDate()+t);let i=new Date,n=this.getStartOfWeek(i);n.setHours(0,0,0,0);let p=this.viewMode()==="week"?this.getStartOfWeek(e):e;p.setHours(0,0,0,0),!(p<n)&&this.currentDate.set(e)}toggleView(t){this.viewMode.set(t)}isPastDate(t){let e=new Date;return e.setHours(0,0,0,0),new Date(t+"T00:00:00")<e}isPastTime(t,e){if(this.isPastDate(t))return!0;let i=new Date().toISOString().split("T")[0];if(t===i){let n=new Date,[p,x]=e.split(":").map(Number),f=new Date;return f.setHours(p,x,0,0),f<n}return!1}getSlotStatus(t,e,i){let n=[],p=this.isPastTime(t,e),x=this.selectedDoctorId()?[this.selectedDoctorId()]:this.doctorsInCurrentSpecialty().map(C=>C.doctorId||C.id),f=this.getMinutes(e);for(let C of x){let b=this.getDoctorName(C),v=this.appointments().find(T=>T.doctorId===C&&T.appointmentDate===t&&this.normalizeTime(T.startTime)===e&&T.status!=="CANCELLED");if(v){n.push({type:"booked",appointment:v});continue}if(p)continue;let S=!1,D="",N=T=>{for(let V of T)if(V.date===t){let F=this.normalizeTime(V.startTime),De=this.normalizeTime(V.endTime),z=this.getMinutes(F),Me=this.getMinutes(De);if(f>=z&&f<Me){let Ae=this.getDuration(C,V.specialtyId);if((f-z)%Ae===0){S=!0,D=V.specialtyId;return}}}};if(this.selectedSpecialtyId()){let T=this.scheduleService.getSchedulesForDoctor(C,this.selectedSpecialtyId());N(T)}else{let T=this.scheduleService.schedules().filter(V=>V.doctorId===C);N(T)}S&&n.push({type:"available",doctorId:C,doctorName:b,date:t,time:e,specialtyId:D,isPast:p})}return n}getAppointmentsForSlot(t,e){return this.getSlotStatus(t,e,0).filter(n=>n.type==="booked").map(n=>n.appointment)}openBookingModal(t,e,i,n){this.selectedSlot={date:t,time:e},this.modalPatientId.set(""),this.modalSpecialtyId.set(n||this.selectedSpecialtyId()||""),this.modalDoctorId.set(i||this.selectedDoctorId()||""),this.modalDate.set(t);let p=e;if(i&&n){let x=this.getDuration(i,n),f=b=>b.length>5?b.substring(0,5):b,C=this.scheduleService.getSchedulesForDoctor(i,n).find(b=>b.date===t);if(C){let b=this.getMinutes(f(C.startTime)),S=this.getMinutes(e)-b;if(S>=0){let D=Math.floor(S/x),N=b+D*x;p=this.formatMinutes(N)}}}this.modalTime.set(p),this.modalNotes.set(""),this.modalPaymentMethod.set("CASH"),this.modalTransactionId.set(""),this.modalPaymentProof.set(""),this.isModalOpen=!0}isBookingDirty(){return!!(this.modalDoctorId()||this.modalSpecialtyId()||this.modalPatientId()||this.modalTime())}tryCloseBookingModal(){this.isBookingDirty()?confirm("\xBFEst\xE1s seguro de que deseas cerrar? Se perder\xE1n los datos ingresados.")&&this.closeModal():this.closeModal()}tryCloseDetailsModal(){this.isRescheduling?confirm("Est\xE1s reprogramando una cita. \xBFSeguro que deseas cerrar sin guardar?")&&this.closeDetailsModal():this.closeDetailsModal()}closeModal(){this.isModalOpen=!1}formatDate(t){if(!t)return"";let[e,i,n]=t.split("-").map(Number),p=new Date(e,i-1,n),x=p.toLocaleDateString("es-ES",{weekday:"long"}),f=p.getDate(),C=p.toLocaleDateString("es-ES",{month:"long"}),b=p.getFullYear();return`${x} ${f} ${C} ${b}`}getDuration(t,e){let i=this.doctorSpecialtyService.associations().find(n=>n.doctorId===t&&n.specialtyId===e);return i&&i.durationMinutes>0?i.durationMinutes:30}formatTime12Hour(t){if(!t)return"";let[e,i]=t.split(":").map(Number),n=e>=12?"PM":"AM";return`${e%12||12}:${i.toString().padStart(2,"0")} ${n}`}saveAppointment(){let t=this.modalDoctorId(),e=this.modalSpecialtyId(),i=this.modalDate(),n=this.modalTime(),p=this.modalPatientId();if(t&&e&&i&&n&&p){let x=this.patients().find(C=>C.patientId===p),f=this.getDuration(t,e);this.saving.set(!0),this.appointmentsService.addAppointment({doctorId:t,specialtyId:e,patientId:p,patientName:x?.fullName||"Desconocido",appointmentDate:i,startTime:n,endTime:this.addMinutes(n,f),notes:this.modalNotes(),paymentMethod:this.modalPaymentMethod(),paymentStatus:this.modalPaymentMethod()==="CASH"?"PENDING":"PAID",transactionId:this.modalTransactionId(),paymentProofUrl:this.modalPaymentProof()}).subscribe({next:()=>{this.saving.set(!1),this.closeModal()},error:()=>this.saving.set(!1)})}}addMinutes(t,e){let[i,n]=t.split(":").map(Number),p=new Date;return p.setHours(i,n+e),`${p.getHours().toString().padStart(2,"0")}:${p.getMinutes().toString().padStart(2,"0")}`}getDoctorName(t){return this.doctors().find(e=>e.id===t||e.doctorId===t)?.fullName||"Desconocido"}getSpecialtyName(t){return this.specialties().find(e=>e.specialtyId===t)?.name||"Desconocido"}getPatientName(t){return this.patients().find(e=>e.patientId===t)?.fullName||"Paciente Desconocido"}getAppointmentColorClass(t){return t.paymentStatus==="PAID"?"bg-green-100 border-green-600 text-green-800":"bg-yellow-100 border-yellow-500 text-yellow-800"}openGenericBooking(){this.openBookingModal("","")}openAppointmentDetails(t){this.selectedAppointment=t,this.isDetailsModalOpen=!0,this.isRescheduling=!1}closeDetailsModal(){this.isDetailsModalOpen=!1,this.selectedAppointment=null,this.isRescheduling=!1,this.isConfirmingCancel=!1}startRescheduling(){this.selectedAppointment&&(this.isRescheduling=!0,this.isConfirmingCancel=!1,this.modalSpecialtyId.set(this.selectedAppointment.specialtyId),this.modalDoctorId.set(this.selectedAppointment.doctorId),this.modalDate.set(this.selectedAppointment.appointmentDate),this.modalTime.set(this.selectedAppointment.startTime),this.modalPatientId.set(this.selectedAppointment.patientId),this.modalNotes.set(this.selectedAppointment.notes||""),this.modalPaymentMethod.set(this.selectedAppointment.paymentMethod||"CASH"),this.modalTransactionId.set(this.selectedAppointment.transactionId||""))}showCancelConfirmation(){this.isConfirmingCancel=!0,this.isRescheduling=!1}cancelCancelConfirmation(){this.isConfirmingCancel=!1}confirmCancel(){this.selectedAppointment&&(this.appointmentsService.updatestatus(this.selectedAppointment.appointmentId,"CANCELLED"),this.closeDetailsModal(),this.isConfirmingCancel=!1)}saveRescheduledAppointment(){if(this.selectedAppointment&&this.modalTime()&&this.modalDate()){let t=this.modalDoctorId()||this.selectedAppointment.doctorId,e=this.modalSpecialtyId()||this.selectedAppointment.specialtyId,i=this.getDuration(t,e),n=j(R({},this.selectedAppointment),{doctorId:t,specialtyId:e,appointmentDate:this.modalDate(),startTime:this.modalTime(),endTime:this.addMinutes(this.modalTime(),i),notes:this.modalNotes(),paymentMethod:this.modalPaymentMethod(),transactionId:this.modalTransactionId()}),p=this.appointments(),x=p.findIndex(f=>f.appointmentId===this.selectedAppointment.appointmentId);x!==-1&&(p[x]=n,this.appointmentsService.appointments.set([...p])),this.closeDetailsModal()}}cancelAppointment(){this.selectedAppointment&&(this.appointmentsService.updatestatus(this.selectedAppointment.appointmentId,"CANCELLED"),this.closeDetailsModal())}validatePayment(){if(this.selectedAppointment){let t=j(R({},this.selectedAppointment),{paymentStatus:"PAID",status:"CONFIRMED"});this.appointments.update(e=>e.map(i=>i.appointmentId===t.appointmentId?t:i)),this.selectedAppointment=t,this.appointmentsService.updatePayment(this.selectedAppointment.appointmentId,this.selectedAppointment.paymentMethod||"CASH","PAID"),this.appointmentsService.updatestatus(this.selectedAppointment.appointmentId,"CONFIRMED")}}getAppointmentStatusLabel(t){return t.paymentStatus==="PAID"?"Pagada":(t.status==="CONFIRMED"&&t.paymentStatus==="PENDING","Reservada")}getDetailsHeaderClass(){return this.selectedAppointment?this.selectedAppointment.paymentStatus==="PAID"?"bg-green-600":"bg-yellow-500":"bg-blue-600"}static \u0275fac=function(e){return new(e||o)};static \u0275cmp=H({type:o,selectors:[["app-appointments-calendar"]],decls:52,vars:20,consts:[[1,"h-full","flex","flex-col"],[1,"bg-white","border-b","border-gray-200","px-6","py-4","flex","flex-col","gap-4"],[1,"flex","flex-col","md:flex-row","md:items-center","justify-between","gap-4"],[1,"text-xl","font-bold","text-gray-900"],[1,"text-sm","text-gray-500"],[1,"flex","items-center","gap-3"],[1,"flex","items-center","gap-2","bg-primary","hover:bg-primary","text-white","px-5","py-2.5","rounded-xl","text-sm","font-bold","shadow-lg","shadow-primary","transition-all","active:scale-95","whitespace-nowrap",3,"click"],[1,"w-5","h-5",3,"img"],[1,"flex","flex-wrap","items-center","gap-3","w-full"],[1,"min-w-[250px]","flex-1","md:flex-none"],["placeholder","Todas las especialidades","displayMode","compact",3,"ngModelChange","options","ngModel"],["placeholder","Todos los m\xE9dicos","displayMode","compact",3,"ngModelChange","options","ngModel"],[1,"flex-1","overflow-auto","bg-gray-50","p-2","sm:p-6","flex","flex-col"],[1,"flex","flex-col","xl:flex-row","items-center","justify-between","gap-4","mb-4","bg-white","p-2","rounded-xl","border","border-gray-200","shadow-sm"],[1,"flex","items-center","gap-3","text-[10px]","font-medium","text-gray-500","px-2"],[1,"flex","items-center","gap-1.5"],[1,"w-2.5","h-2.5","rounded-full","bg-green-500"],[1,"w-2.5","h-2.5","rounded-full","bg-yellow-400"],[1,"w-2.5","h-2.5","rounded","border","border-primary","border-dashed","bg-primary"],[1,"flex","items-center","bg-gray-50","rounded-lg","p-1","border","border-gray-100"],[1,"p-1.5","hover:bg-white","hover:shadow-sm","rounded-md","transition-all","text-gray-500","hover:text-gray-900",3,"click"],[1,"w-4","h-4",3,"img"],[1,"px-4","text-center","min-w-[160px]"],[4,"ngIf"],[1,"bg-gray-100","p-1","rounded-lg","flex"],[3,"click"],[1,"bg-white","rounded-xl","shadow","border","border-gray-200","overflow-hidden","min-w-[800px]"],[1,"grid","border-b","border-gray-200","bg-gray-50","sticky","top-0","z-10"],[1,"p-4","text-xs","font-semibold","text-gray-400","uppercase","tracking-wider","text-center","border-r","border-gray-200","w-20","flex","items-center","justify-center"],[1,"relative"],["class","grid border-b border-gray-100 last:border-b-0 min-h-[3.5rem]",3,"class",4,"ngFor","ngForOf"],["class","fixed inset-0 z-50 flex items-center justify-center p-4 sm:p-6",4,"ngIf"],[1,"block","text-xs","font-bold","text-gray-900","leading-none","mb-0.5"],[1,"block","text-[9px]","font-bold","text-gray-400","uppercase","tracking-wider"],[1,"block","text-xs","font-bold","text-gray-900","capitalize","leading-none"],["class","p-4 text-center border-r border-gray-200 last:border-r-0",4,"ngFor","ngForOf"],[1,"p-4","text-center","border-r","border-gray-200","last:border-r-0"],[1,"text-xs","font-semibold","text-gray-500","uppercase","mb-1"],[1,"flex","flex-col","items-center","leading-none"],[1,"text-lg","font-bold","text-gray-900"],[1,"text-[10px]","font-bold","text-gray-400","uppercase","mt-0.5"],[1,"p-4","text-center"],[1,"text-xs","font-semibold","text-gray-500","uppercase"],[1,"grid","border-b","border-gray-100","last:border-b-0","min-h-[3.5rem]"],[1,"w-20","p-2","text-xs","font-medium","text-gray-500","text-center","border-r","border-gray-100","flex","items-center","justify-center","bg-gray-50/50"],[3,"class",4,"ngFor","ngForOf"],["class","absolute inset-0 bg-gray-50/50 -z-10",4,"ngIf"],[1,"w-full","h-full","relative","z-10",3,"ngClass"],[4,"ngFor","ngForOf"],[1,"absolute","inset-0","bg-gray-50/50","-z-10"],["class","rounded border transition-all group flex flex-col justify-center items-center gap-0.5 relative",3,"disabled","ngClass","click",4,"ngIf"],[3,"ngClass","class","click",4,"ngIf"],[1,"rounded","border","transition-all","group","flex","flex-col","justify-center","items-center","gap-0.5","relative",3,"click","disabled","ngClass"],["class","w-4 h-4 text-primary",3,"img",4,"ngIf"],[1,"absolute","bottom-full","left-1/2","-translate-x-1/2","mb-2","w-max","max-w-[150px]","bg-gray-900","text-white","text-[10px]","rounded","px-2","py-1","opacity-0","group-hover:opacity-100","transition-opacity","pointer-events-none","z-50","shadow-lg","text-center"],[1,"opacity-75"],[1,"text-[9px]","text-primary","opacity-80","truncate","w-full","text-center","pb-0.5"],[1,"w-4","h-4","text-primary",3,"img"],[3,"click","ngClass"],["class","w-full h-full flex items-center justify-center",4,"ngIf"],[1,"absolute","bottom-full","left-1/2","-translate-x-1/2","mb-2","w-max","max-w-[150px]","bg-gray-900","text-white","text-[10px]","rounded","px-2","py-1","opacity-0","group-hover:opacity-100","transition-opacity","pointer-events-none","z-50","shadow-lg","text-left"],[1,"font-bold"],[1,"font-bold","text-[10px]","truncate","w-full"],[1,"truncate","text-[9px]","opacity-80","w-full"],[1,"w-full","h-full","flex","items-center","justify-center"],["class","w-4 h-4 text-green-600",3,"img",4,"ngIf"],["class","w-4 h-4 text-yellow-600",3,"img",4,"ngIf"],["class","text-[9px] font-bold",4,"ngIf"],[1,"w-4","h-4","text-green-600",3,"img"],[1,"w-4","h-4","text-yellow-600",3,"img"],[1,"text-[9px]","font-bold"],[1,"relative","p-2","bg-white"],["class","absolute inset-0 bg-gray-50/40 pattern-diagonal-lines",4,"ngIf"],[1,"absolute","inset-0","bg-gray-50/40","pattern-diagonal-lines"],["class","rounded-lg bg-primary border border-primary border-dashed hover:bg-primary hover:border-solid hover:shadow-md transition-all flex items-center gap-2 group/card cursor-pointer relative",3,"ngClass","click",4,"ngIf"],[1,"rounded-lg","bg-primary","border","border-primary","border-dashed","hover:bg-primary","hover:border-solid","hover:shadow-md","transition-all","flex","items-center","gap-2","group/card","cursor-pointer","relative",3,"click","ngClass"],["class","text-left overflow-hidden",4,"ngIf"],["class","w-6 h-6 rounded-full bg-primary flex items-center justify-center flex-shrink-0 group-hover/card:bg-primary transition-colors",4,"ngIf"],[1,"absolute","bottom-full","left-1/2","-translate-x-1/2","mb-2","w-max","max-w-[200px]","bg-gray-900","text-white","text-xs","rounded","px-2","py-1","opacity-0","group-hover/card:opacity-100","transition-opacity","pointer-events-none","z-50","shadow-lg"],[1,"text-left","overflow-hidden"],[1,"text-xs","font-bold","text-primary","truncate","group-hover/card:text-primary"],[1,"text-[10px]","text-primary","font-medium","truncate"],[1,"w-6","h-6","rounded-full","bg-primary","flex","items-center","justify-center","flex-shrink-0","group-hover/card:bg-primary","transition-colors"],[1,"w-3","h-3","text-primary",3,"img"],["class","overflow-hidden w-full",4,"ngIf"],[1,"absolute","bottom-full","left-1/2","-translate-x-1/2","mb-2","w-max","max-w-[200px]","bg-gray-900","text-white","text-xs","rounded","px-2","py-1","opacity-0","group-hover/card:opacity-100","transition-opacity","pointer-events-none","z-50","shadow-lg","text-left"],[1,"overflow-hidden","w-full"],[1,"font-bold","text-xs","truncate"],[1,"text-[10px]","opacity-90","truncate"],["class","text-[10px] font-bold text-center",4,"ngIf"],[1,"text-[10px]","font-bold","text-center"],[1,"fixed","inset-0","z-50","flex","items-center","justify-center","p-4","sm:p-6"],[1,"absolute","inset-0","bg-black","bg-opacity-60","transition-opacity","backdrop-blur-sm",3,"click"],[1,"bg-white","rounded-2xl","shadow-2xl","w-full","max-w-3xl","max-h-[90vh]","flex","flex-col","relative","z-10","overflow-hidden","animate-fade-in-up"],[1,"bg-primary","px-6","py-4","shrink-0","flex","items-center","justify-between","shadow-md","z-20"],[1,"text-xl","font-bold","text-white"],[1,"text-primary","text-sm"],[1,"text-white","hover:bg-white/20","rounded-lg","p-2","transition-all",3,"click"],[1,"w-6","h-6","rotate-45",3,"img"],[1,"p-6","overflow-y-auto","custom-scrollbar","flex-1"],[1,"grid","grid-cols-1","lg:grid-cols-2","gap-8"],[1,"space-y-5"],[1,"text-sm","font-bold","text-gray-700","uppercase","tracking-wide","mb-2"],[1,"text-xs","text-gray-500"],[1,"block","text-xs","font-bold","text-gray-600","uppercase","tracking-wide","mb-2"],[1,"text-red-500"],["placeholder","Seleccionar especialidad","displayMode","default",3,"ngModelChange","options","ngModel"],["placeholder","Seleccionar m\xE9dico","displayMode","default",3,"ngModelChange","options","ngModel","disabled"],["type","date",1,"w-full","rounded-xl","border-2","border-gray-200","py-3","px-4","text-sm","font-medium","focus:border-primary","focus:ring-2","focus:ring-primary","transition-all","outline-none",3,"ngModelChange","ngModel"],["placeholder","Seleccionar paciente","displayMode","default",3,"ngModelChange","options","ngModel"],[1,"bg-gradient-to-br","from-gray-50","to-primary","rounded-2xl","p-6","border-2","border-gray-100","flex","flex-col","h-full","min-h-[300px]"],[1,"text-sm","font-bold","text-gray-700","uppercase","tracking-wide","mb-2","text-center"],["class","flex-1 grid grid-cols-3 gap-3 content-start overflow-y-auto pr-1 custom-scrollbar max-h-[300px]",4,"ngIf"],["class","flex-1 flex flex-col items-center justify-center text-center text-gray-400",4,"ngIf"],[1,"mt-8","pt-6","border-t","border-gray-100"],[1,"text-sm","font-bold","text-gray-700","uppercase","tracking-wide","mb-4"],[1,"grid","grid-cols-2","sm:grid-cols-4","gap-3","mb-6"],["type","button",3,"click"],[1,"text-xs","font-bold"],["class","mb-6 animate-fade-in",4,"ngIf"],["placeholder","Observaciones...","rows","2",1,"w-full","rounded-xl","border-2","border-gray-200","py-2","px-4","text-sm","focus:border-primary","outline-none","resize-none",3,"ngModelChange","ngModel"],[1,"bg-gray-50","px-6","py-4","flex","gap-3","border-t","border-gray-200","shrink-0"],["type","button",1,"flex-1","py-3","bg-white","border-2","border-gray-300","text-gray-700","font-bold","rounded-xl","hover:bg-gray-50","transition-all",3,"click","disabled"],["type","button",1,"flex-1","py-3","bg-primary","text-white","font-bold","rounded-xl","shadow-lg","shadow-primary","hover:bg-primary","transition-all","disabled:opacity-50","disabled:shadow-none",3,"click","disabled"],[1,"flex-1","grid","grid-cols-3","gap-3","content-start","overflow-y-auto","pr-1","custom-scrollbar","max-h-[300px]"],[3,"class","click",4,"ngFor","ngForOf"],[1,"flex-1","flex","flex-col","items-center","justify-center","text-center","text-gray-400"],[1,"w-12","h-12","mb-3","opacity-20",3,"img"],[1,"text-sm","font-medium","px-4","leading-relaxed"],[1,"mb-6","animate-fade-in"],["type","text","placeholder","Pegar enlace de la imagen...",1,"w-full","rounded-xl","border-2","border-gray-200","py-3","px-4","text-sm","focus:border-primary","focus:ring-2","focus:ring-primary","transition-all","outline-none",3,"ngModelChange","ngModel"],[1,"bg-white","rounded-2xl","shadow-2xl","w-full","max-w-2xl","max-h-[90vh]","flex","flex-col","relative","z-10","overflow-hidden","animate-fade-in-up"],[1,"text-white","text-opacity-90","text-sm"],[1,"p-6","overflow-y-auto","custom-scrollbar","flex-1","bg-white"],["class","space-y-6",4,"ngIf"],["class","text-center py-8",4,"ngIf"],["class","bg-gray-50 px-6 py-4 flex flex-col-reverse sm:flex-row gap-3 border-t border-gray-200 shrink-0",4,"ngIf"],[1,"space-y-6"],[1,"bg-primary","rounded-xl","p-4","border","border-primary","flex","items-center","gap-4"],[1,"bg-white","p-2","rounded-full","shadow-sm","text-primary"],[1,"w-6","h-6",3,"img"],[1,"text-lg","font-bold","text-gray-900","leading-tight"],[1,"text-sm","text-primary","font-medium"],[1,"grid","grid-cols-2","gap-x-8","gap-y-6"],[1,"block","text-xs","font-bold","text-gray-400","uppercase","mb-1"],[1,"text-sm","font-bold","text-gray-800"],[1,"col-span-2","border-t","border-gray-100"],[1,"text-sm","font-bold","text-gray-800","capitalize"],[1,"grid","grid-cols-2","gap-4","mb-6"],[1,"col-span-1"],["class","bg-gray-50 p-4 rounded-xl border border-gray-200 mb-6",4,"ngIf"],["class","bg-gray-50 p-4 rounded-xl border border-gray-200",4,"ngIf"],[1,"w-full","py-3","bg-green-600","text-white","font-bold","rounded-xl","hover:bg-green-700","shadow-md","transition-all","flex","items-center","justify-center","gap-2",3,"click"],[1,"text-xs","text-gray-500","text-center","mt-2"],[1,"bg-gray-50","p-4","rounded-xl","border","border-gray-200","mb-6"],[1,"block","text-xs","font-bold","text-gray-400","uppercase","mb-2"],[1,"relative","group","cursor-pointer","overflow-hidden","rounded-lg","border","border-gray-200"],["alt","Comprobante",1,"w-full","h-auto","max-h-[200px]","object-cover","hover:scale-105","transition-transform",3,"src"],["target","_blank",1,"absolute","inset-0","bg-black/50","opacity-0","group-hover:opacity-100","flex","items-center","justify-center","transition-opacity","z-10","w-full","h-full",3,"href"],[1,"text-white","text-xs","font-bold","flex","items-center","gap-2"],[1,"bg-gray-50","p-4","rounded-xl","border","border-gray-200"],[1,"text-sm","text-gray-600","italic"],[1,"bg-yellow-50","border-l-4","border-yellow-400","p-4"],[1,"text-sm","text-yellow-800","font-medium"],[1,"space-y-4"],[1,"block","text-xs","font-bold","text-gray-600","uppercase","mb-2"],["type","date",1,"w-full","rounded-xl","border-gray-300","shadow-sm","focus:border-primary","focus:ring-primary",3,"ngModelChange","ngModel"],[1,"grid","grid-cols-2","gap-4"],[1,"w-full","py-2","px-3","bg-gray-100","rounded-lg","text-gray-500","text-sm","font-bold"],["placeholder","Seleccionar m\xE9dico","displayMode","default",3,"ngModelChange","options","ngModel"],[1,"grid","grid-cols-4","gap-2","max-h-40","overflow-y-auto","custom-scrollbar"],[1,"text-center","py-8"],[1,"w-16","h-16","bg-red-100","text-red-600","rounded-full","flex","items-center","justify-center","mx-auto","mb-4"],[1,"w-8","h-8",3,"img"],[1,"text-xl","font-bold","text-gray-900","mb-2"],[1,"text-gray-600","text-sm","mb-8","px-8"],[1,"flex","gap-4"],[1,"flex-1","py-3","bg-gray-100","text-gray-700","font-bold","rounded-xl","hover:bg-gray-200",3,"click"],[1,"flex-1","py-3","bg-red-600","text-white","font-bold","rounded-xl","hover:bg-red-700","shadow-lg","shadow-red-200",3,"click"],[1,"bg-gray-50","px-6","py-4","flex","flex-col-reverse","sm:flex-row","gap-3","border-t","border-gray-200","shrink-0"],[1,"flex-1","py-3","bg-white","border","border-gray-300","text-gray-700","font-bold","rounded-xl","hover:bg-gray-50",3,"click"],[1,"flex","flex-1","gap-2"],["class","flex-1 py-3 bg-red-100 text-red-700 font-bold rounded-xl hover:bg-red-200",3,"click",4,"ngIf"],["class","flex-1 py-3 bg-primary text-white font-bold rounded-xl shadow-lg shadow-primary hover:bg-primary",3,"click",4,"ngIf"],["class","flex-1 py-3 bg-green-600 text-white font-bold rounded-xl shadow-lg shadow-green-200 hover:bg-green-700 disabled:opacity-50",3,"disabled","click",4,"ngIf"],[1,"flex-1","py-3","bg-red-100","text-red-700","font-bold","rounded-xl","hover:bg-red-200",3,"click"],[1,"flex-1","py-3","bg-primary","text-white","font-bold","rounded-xl","shadow-lg","shadow-primary","hover:bg-primary",3,"click"],[1,"flex-1","py-3","bg-green-600","text-white","font-bold","rounded-xl","shadow-lg","shadow-green-200","hover:bg-green-700","disabled:opacity-50",3,"click","disabled"]],template:function(e,i){e&1&&(a(0,"div",0)(1,"div",1)(2,"div",2)(3,"div")(4,"h1",3),s(5,"Agenda de citas"),l(),a(6,"p",4),s(7,"Gestiona los turnos y citas m\xE9dicas globales."),l()(),a(8,"div",5)(9,"button",6),m("click",function(){return i.openGenericBooking()}),h(10,"lucide-icon",7),s(11," Nueva cita "),l()()(),a(12,"div",8)(13,"div",9)(14,"app-searchable-select",10),m("ngModelChange",function(p){return i.selectedSpecialtyId.set(p.toString()),i.selectedDoctorId.set("")}),l()(),a(15,"div",9)(16,"app-searchable-select",11),m("ngModelChange",function(p){return i.selectedDoctorId.set(p.toString())}),l()()()(),a(17,"div",12)(18,"div",13)(19,"div",14)(20,"div",15),h(21,"div",16),s(22," Pagada "),l(),a(23,"div",15),h(24,"div",17),s(25," Reservada "),l(),a(26,"div",15),h(27,"div",18),s(28," Disponible "),l()(),a(29,"div",19)(30,"button",20),m("click",function(){return i.changeWeek(-1)}),h(31,"lucide-icon",21),l(),a(32,"div",22),u(33,ke,5,5,"ng-container",23)(34,Te,4,3,"ng-container",23),l(),a(35,"button",20),m("click",function(){return i.changeWeek(1)}),h(36,"lucide-icon",21),l()(),a(37,"div",24)(38,"button",25),m("click",function(){return i.toggleView("day")}),s(39," D\xEDa "),l(),a(40,"button",25),m("click",function(){return i.toggleView("week")}),s(41," Semana "),l()()(),a(42,"div",26)(43,"div",27)(44,"div",28),s(45," Hora "),l(),u(46,Pe,2,1,"ng-container",23)(47,Ve,4,1,"ng-container",23),l(),a(48,"div",29),u(49,dt,5,5,"div",30),l()()()(),u(50,xt,75,34,"div",31)(51,At,16,7,"div",31)),e&2&&(r(10),c("img",i.icons.Plus),r(4),c("options",i.specialtyOptions)("ngModel",i.selectedSpecialtyId()),r(2),c("options",i.doctorOptions)("ngModel",i.selectedDoctorId()),r(15),c("img",i.icons.ChevronLeft),r(2),c("ngIf",i.viewMode()==="week"),r(),c("ngIf",i.viewMode()==="day"),r(2),c("img",i.icons.ChevronRight),r(2),I("px-3 py-1 text-xs font-bold rounded-md transition-all "+(i.viewMode()==="day"?"bg-white text-primary shadow-sm":"text-gray-500 hover:text-gray-900")),r(2),I("px-3 py-1 text-xs font-bold rounded-md transition-all "+(i.viewMode()==="week"?"bg-white text-primary shadow-sm":"text-gray-500 hover:text-gray-900")),r(3),I(i.viewMode()==="week"?"grid-cols-8":"grid-cols-[auto_1fr]"),r(3),c("ngIf",i.viewMode()==="week"),r(),c("ngIf",i.viewMode()==="day"),r(2),c("ngForOf",i.timeSlots()),r(),c("ngIf",i.isModalOpen),r(),c("ngIf",i.isDetailsModalOpen))},dependencies:[Z,J,K,Q,fe,ge,ue,xe,me,pe,Ce,X],styles:[".custom-scrollbar[_ngcontent-%COMP%]::-webkit-scrollbar{width:6px}.custom-scrollbar[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#f1f5f9;border-radius:10px}.custom-scrollbar[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#cbd5e1;border-radius:10px}.custom-scrollbar[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:#94a3b8}.scale-102[_ngcontent-%COMP%]{transform:scale(1.02)}"]})};export{Ie as AppointmentsCalendarComponent};
