import{a as n}from"./chunk-MZ3EZVY4.js";import{J as i,N as d,S as c,ac as h,ea as o}from"./chunk-SWYYGHOG.js";var l=class r{http=c(h);apiUrl=`${n.apiUrl}/scheduling`;schedules=o([]);constructor(){this.refreshSchedules()}refreshSchedules(e){if(!e?.doctorId){console.warn("Need a doctorId to fetch schedules");return}this.http.get(`${this.apiUrl}/doctors/${e.doctorId}/schedules`).subscribe(t=>{this.schedules.set(t)})}getSchedules(){return this.schedules()}addSchedule(e,t){return this.http.post(`${this.apiUrl}/doctors/${e}/schedules`,{items:t}).pipe(i(()=>this.refreshSchedules({doctorId:e})))}removeSchedule(e){!e.id||!e.doctorId||this.http.delete(`${this.apiUrl}/schedules/${e.id}`).subscribe(()=>{this.refreshSchedules({doctorId:e.doctorId})})}getSchedulesForDoctor(e,t){return this.schedules().filter(s=>s.doctorId===e&&s.specialtyId===t)}static \u0275fac=function(t){return new(t||r)};static \u0275prov=d({token:r,factory:r.\u0275fac,providedIn:"root"})};export{l as a};
