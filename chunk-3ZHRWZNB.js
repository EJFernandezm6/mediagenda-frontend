import{a as pe}from"./chunk-T2FOTUBD.js";import{a as Se}from"./chunk-OESIKTYC.js";import{a as we}from"./chunk-R52KNCKC.js";import{a as be}from"./chunk-GJR7MOP5.js";import{a as ye}from"./chunk-UPSZFPM3.js";import{c as X}from"./chunk-QH3LZKOO.js";import{a as Ce}from"./chunk-GPAGCD4O.js";import{b as me,d as _e,g as ge,l as ue,m as xe,n as fe,s as ve}from"./chunk-PDYZXUXT.js";import{a as he}from"./chunk-WBX75YZ3.js";import"./chunk-MZ3EZVY4.js";import{$ as g,Ba as r,Cd as de,Fb as B,Gd as se,Hd as ce,Ib as G,Ic as Z,Jb as W,Lc as ee,Mc as te,Oc as ne,Pc as ie,Qb as N,Ra as z,Rb as U,Rc as oe,Tc as ae,Va as _,W as T,a as $,aa as u,ab as s,b as R,bb as a,cb as l,db as y,eb as M,fb as E,gc as Y,hb as S,hc as q,ia as A,ib as m,ic as J,jb as c,kc as K,mc as Q,od as re,rd as le,sb as O,tb as w,ub as d,vb as b,wb as C,xa as j,xb as L,yb as H}from"./chunk-MMESFILH.js";var Ae=()=>["YAPE","PLIN"];function De(t,n){if(t&1&&(a(0,"option",26),d(1),l()),t&2){let e=n.$implicit;s("value",e.specialtyId),r(),b(e.name)}}function Me(t,n){if(t&1&&(M(0),a(1,"span",27),d(2),l(),a(3,"span",28),d(4),l(),E()),t&2){let e=c();r(2),H(" ",e.weekDays()[0].dayNum," ",e.weekDays()[0].monthName," - ",e.weekDays()[6].dayNum," ",e.weekDays()[6].monthName," "),r(2),C(" ",e.weekDays()[0].date.getFullYear()," ")}}function Ee(t,n){if(t&1&&(M(0),a(1,"span",29),d(2),G(3,"titlecase"),l(),E()),t&2){let e=c();r(2),C(" ",W(3,1,e.currentDateStr())," ")}}function ke(t,n){if(t&1&&(a(0,"div",31)(1,"p",32),d(2),l(),a(3,"div",33)(4,"span",34),d(5),l(),a(6,"span",35),d(7),l()()()),t&2){let e=n.$implicit;r(2),b(e.dayName),r(3),b(e.dayNum),r(2),b(e.monthName)}}function Te(t,n){if(t&1&&(M(0),_(1,ke,8,3,"div",30),E()),t&2){let e=c();r(),s("ngForOf",e.weekDays())}}function Pe(t,n){if(t&1&&(M(0),a(1,"div",36)(2,"p",37),d(3),l()(),E()),t&2){let e=c();r(3),b(e.currentDateStr())}}function Ne(t,n){t&1&&y(0,"div",44)}function Ve(t,n){if(t&1&&(M(0),a(1,"span"),d(2),l(),a(3,"span",51),d(4),l(),E()),t&2){let e=c(2).$implicit,i=c(5);r(),w(e.isPast?"text-[9px] font-medium truncate w-full text-center":"text-[9px] font-medium text-blue-600 truncate w-full text-center"),r(),b(e.doctorName),r(2),b(i.getSpecialtyName(e.specialtyId))}}function Fe(t,n){if(t&1&&y(0,"lucide-icon",52),t&2){let e=c(7);s("img",e.icons.Plus)}}function Oe(t,n){if(t&1){let e=S();a(0,"button",47),m("click",function(){g(e);let o=c().$implicit,p=c(2).$implicit,f=c(2).$implicit,v=c();return u(!o.isPast&&v.openBookingModal(p.iso,f,o.doctorId,o.specialtyId))}),_(1,Ve,5,4,"ng-container",16)(2,Fe,1,1,"lucide-icon",48),a(3,"div",49)(4,"div"),d(5),l(),a(6,"div",50),d(7),l()()()}if(t&2){let e=c().$implicit,i=c().ngIf,o=c(4);s("disabled",e.isPast)("ngClass",(i.length>=3?"w-8 h-8 p-0 justify-center ":"w-full min-h-[30px] p-0.5 ")+(e.isPast?"opacity-100 cursor-not-allowed bg-gray-200 border-gray-300 border-dashed text-gray-500":"cursor-pointer hover:bg-blue-100 hover:border-solid hover:shadow-md bg-blue-50 border-blue-200 border-dashed")),r(),s("ngIf",i.length<3),r(),s("ngIf",i.length>=3),r(3),b(e.doctorName),r(2),b(o.getSpecialtyName(e.specialtyId))}}function $e(t,n){if(t&1&&(M(0),a(1,"div",57),d(2),l(),a(3,"div",58),d(4),l(),E()),t&2){let e=c(2).$implicit,i=c(5);r(2),b(i.getPatientName(e.appointment.patientId)),r(2),b(i.getSpecialtyName(e.appointment.specialtyId))}}function Re(t,n){if(t&1&&y(0,"lucide-icon",63),t&2){let e=c(8);s("img",e.icons.CheckCircle)}}function je(t,n){if(t&1&&y(0,"lucide-icon",64),t&2){let e=c(8);s("img",e.icons.HelpCircle)}}function Le(t,n){if(t&1&&(a(0,"div",65),d(1),l()),t&2){let e=c(3).$implicit,i=c(5);r(),C(" ",i.getPatientName(e.appointment.patientId).charAt(0)," ")}}function ze(t,n){if(t&1&&(a(0,"div",59),_(1,Re,1,1,"lucide-icon",60)(2,je,1,1,"lucide-icon",61)(3,Le,2,1,"div",62),l()),t&2){let e=c(2).$implicit;r(),s("ngIf",e.appointment.paymentStatus==="PAID"),r(),s("ngIf",e.appointment.status==="CONFIRMED"&&e.appointment.paymentStatus==="PENDING"),r(),s("ngIf",e.appointment.paymentStatus!=="PAID"&&!(e.appointment.status==="CONFIRMED"&&e.appointment.paymentStatus==="PENDING"))}}function He(t,n){if(t&1){let e=S();a(0,"button",53),m("click",function(o){g(e);let p=c().$implicit;return c(5).openAppointmentDetails(p.appointment),u(o.stopPropagation())}),_(1,$e,5,2,"ng-container",16)(2,ze,4,3,"div",54),a(3,"div",55)(4,"div",56),d(5),l(),a(6,"div"),d(7),l(),a(8,"div",50),d(9),l()()()}if(t&2){let e=c().$implicit,i=c().ngIf,o=c(4);w("rounded border-l-4 shadow-sm cursor-pointer hover:shadow-md transition-all relative group flex flex-col justify-center "+o.getAppointmentColorClass(e.appointment)),s("ngClass",i.length>=3?"w-8 h-8 p-0 justify-center items-center":"w-full min-h-[40px] p-1.5 text-left"),r(),s("ngIf",i.length<3),r(),s("ngIf",i.length>=3),r(3),C("",o.getPatientName(e.appointment.patientId)," "),r(2),b(o.getSpecialtyName(e.appointment.specialtyId)),r(2),b(o.getAppointmentStatusLabel(e.appointment))}}function Be(t,n){if(t&1&&(M(0),_(1,Oe,8,6,"button",45)(2,He,10,8,"button",46),E()),t&2){let e=n.$implicit;r(),s("ngIf",e.type==="available"),r(),s("ngIf",e.type==="booked")}}function Ge(t,n){if(t&1&&(M(0),_(1,Ne,1,0,"div",41),a(2,"div",42),_(3,Be,3,2,"ng-container",43),l(),E()),t&2){let e=n.ngIf;r(),s("ngIf",e.length===0),r(),s("ngClass",e.length>=3?"flex flex-row flex-wrap content-start gap-1 p-1":"flex flex-col gap-1"),r(),s("ngForOf",e)}}function We(t,n){if(t&1&&(a(0,"div"),_(1,Ge,4,3,"ng-container",16),l()),t&2){let e=n.$implicit,i=n.index,o=c(2).$implicit,p=c();w((!p.isWorkingDay(i)||p.isPastDate(e.iso)?"bg-gray-100/70 ":"")+"border-r border-gray-100 last:border-r-0 relative p-1 min-h-[3.5rem]"),r(),s("ngIf",p.getSlotStatus(e.iso,o,i))}}function Ue(t,n){if(t&1&&(M(0),_(1,We,2,3,"div",40),E()),t&2){let e=c(2);r(),s("ngForOf",e.weekDays())}}function Ye(t,n){t&1&&y(0,"div",68)}function qe(t,n){if(t&1&&(a(0,"div",74)(1,"div",75),d(2),l(),a(3,"div",76),d(4),l()()),t&2){let e=c(2).$implicit,i=c(4);r(2),C(" ",e.doctorName),r(2),b(i.getSpecialtyName(e.specialtyId))}}function Je(t,n){if(t&1&&(a(0,"div",77),y(1,"lucide-icon",78),l()),t&2){let e=c(6);r(),s("img",e.icons.Plus)}}function Ke(t,n){if(t&1&&y(0,"lucide-icon",52),t&2){let e=c(6);s("img",e.icons.Plus)}}function Qe(t,n){if(t&1){let e=S();a(0,"button",70),m("click",function(){g(e);let o=c().$implicit,p=c(3).$implicit,f=c();return u(f.openBookingModal(f.currentDate().toISOString().split("T")[0],p,o.doctorId,o.specialtyId))}),_(1,qe,5,2,"div",71)(2,Je,2,1,"div",72)(3,Ke,1,1,"lucide-icon",48),a(4,"div",73)(5,"div"),d(6),l(),a(7,"div",50),d(8),l()()()}if(t&2){let e=c().$implicit,i=c().ngIf,o=c(3);s("ngClass",i.length>=3?"w-8 h-8 p-0 justify-center":"flex-1 p-2 justify-between min-w-[140px]"),r(),s("ngIf",i.length<3),r(),s("ngIf",i.length<3),r(),s("ngIf",i.length>=3),r(3),b(e.doctorName),r(2),b(o.getSpecialtyName(e.specialtyId))}}function Xe(t,n){if(t&1&&(a(0,"div",81)(1,"div",82),d(2),l(),a(3,"div",83),d(4),l()()),t&2){let e=c(2).$implicit,i=c(4);r(2),C("",i.getPatientName(e.appointment.patientId)," "),r(2),b(i.getSpecialtyName(e.appointment.specialtyId))}}function Ze(t,n){if(t&1&&y(0,"lucide-icon",63),t&2){let e=c(7);s("img",e.icons.CheckCircle)}}function et(t,n){if(t&1&&y(0,"lucide-icon",64),t&2){let e=c(7);s("img",e.icons.HelpCircle)}}function tt(t,n){if(t&1&&(a(0,"div",85),d(1),l()),t&2){let e=c(3).$implicit,i=c(4);r(),C(" ",i.getPatientName(e.appointment.patientId).charAt(0)," ")}}function nt(t,n){if(t&1&&(a(0,"div",59),_(1,Ze,1,1,"lucide-icon",60)(2,et,1,1,"lucide-icon",61)(3,tt,2,1,"div",84),l()),t&2){let e=c(2).$implicit;r(),s("ngIf",e.appointment.paymentStatus==="PAID"),r(),s("ngIf",e.appointment.status==="CONFIRMED"&&e.appointment.paymentStatus==="PENDING"),r(),s("ngIf",e.appointment.paymentStatus!=="PAID"&&!(e.appointment.status==="CONFIRMED"&&e.appointment.paymentStatus==="PENDING"))}}function it(t,n){if(t&1){let e=S();a(0,"div",53),m("click",function(){g(e);let o=c().$implicit,p=c(4);return u(p.openAppointmentDetails(o.appointment))}),_(1,Xe,5,2,"div",79)(2,nt,4,3,"div",54),a(3,"div",80)(4,"div",56),d(5),l(),a(6,"div"),d(7),l(),a(8,"div",50),d(9),l()()()}if(t&2){let e=c().$implicit,i=c().ngIf,o=c(3);w("rounded-lg border-l-4 shadow-sm cursor-pointer hover:shadow hover:scale-[1.01] transition-all relative group/card flex items-center "+o.getAppointmentColorClass(e.appointment)),s("ngClass",i.length>=3?"w-8 h-8 p-0 justify-center":"flex-1 p-2 min-w-[140px]"),r(),s("ngIf",i.length<3),r(),s("ngIf",i.length>=3),r(3),C("",o.getPatientName(e.appointment.patientId)," "),r(2),b(o.getSpecialtyName(e.appointment.specialtyId)),r(2),C("",o.getAppointmentStatusLabel(e.appointment)," ")}}function ot(t,n){if(t&1&&(M(0),_(1,Qe,9,6,"button",69)(2,it,10,8,"div",46),E()),t&2){let e=n.$implicit;r(),s("ngIf",e.type==="available"),r(),s("ngIf",e.type==="booked")}}function at(t,n){if(t&1&&(M(0),_(1,Ye,1,0,"div",67),a(2,"div",42),_(3,ot,3,2,"ng-container",43),l(),E()),t&2){let e=n.ngIf;r(),s("ngIf",e.length===0),r(),s("ngClass",e.length>=3?"flex flex-wrap content-start gap-1 p-1":"flex gap-2"),r(),s("ngForOf",e)}}function rt(t,n){if(t&1&&(M(0),a(1,"div",66),_(2,at,4,3,"ng-container",16),l(),E()),t&2){let e=c().$implicit,i=c();r(2),s("ngIf",i.getSlotStatus(i.currentDate().toISOString().split("T")[0],e,0))}}function lt(t,n){if(t&1&&(a(0,"div",38)(1,"div",39),d(2),l(),_(3,Ue,2,1,"ng-container",16)(4,rt,3,1,"ng-container",16),l()),t&2){let e=n.$implicit,i=c();w((i.viewMode()==="week"?"grid-cols-8":"grid-cols-[auto_1fr]")+(i.isBreakTime(e)?" bg-gray-100":"")),r(2),C(" ",e," "),r(),s("ngIf",i.viewMode()==="week"),r(),s("ngIf",i.viewMode()==="day")}}function dt(t,n){if(t&1&&(a(0,"option",26),d(1),l()),t&2){let e=n.$implicit;s("value",e.specialtyId),r(),b(e.name)}}function st(t,n){if(t&1&&(a(0,"option",26),d(1),l()),t&2){let e=n.$implicit;s("value",e.doctorId),r(),C("",e.fullName," ")}}function ct(t,n){if(t&1&&(a(0,"option",26),d(1),l()),t&2){let e=n.$implicit;s("value",e.patientId),r(),L("",e.fullName," (",e.dni,") ")}}function pt(t,n){if(t&1){let e=S();a(0,"button",20),m("click",function(){let o=g(e).$implicit,p=c(3);return u(p.modalTime.set(o))}),d(1),l()}if(t&2){let e=n.$implicit,i=c(3);w("py-2 px-1 h-10 flex items-center justify-center text-sm font-bold rounded-xl border-2 transition-all duration-200 "+(i.modalTime()===e?"bg-blue-600 border-blue-600 text-white shadow-lg shadow-blue-200 scale-105":"bg-white border-gray-200 text-gray-700 hover:border-blue-400 hover:shadow-md hover:scale-102")),r(),C(" ",e," ")}}function mt(t,n){if(t&1&&(a(0,"div",119),_(1,pt,2,3,"button",120),l()),t&2){let e=c(2);r(),s("ngForOf",e.availableSlotsForModal())}}function _t(t,n){if(t&1&&(a(0,"div",121),y(1,"lucide-icon",122),a(2,"p",123),d(3),l()()),t&2){let e=c(2);r(),s("img",e.icons.Clock),r(2),C(" ",!e.modalDoctorId()||!e.modalDate()?"Selecciona m\xE9dico y fecha para ver horarios.":"No hay horarios disponibles para esta fecha."," ")}}function gt(t,n){if(t&1){let e=S();a(0,"div",124)(1,"label",99),d(2," Comprobante de Pago (URL) "),l(),a(3,"input",125),m("ngModelChange",function(o){g(e);let p=c(2);return u(p.modalPaymentProof.set(o))}),l()()}if(t&2){let e=c(2);r(3),s("ngModel",e.modalPaymentProof())}}function ut(t,n){t&1&&(a(0,"span"),d(1,"Confirmar Cita"),l())}function xt(t,n){t&1&&(a(0,"span"),d(1,"Guardando..."),l())}function ft(t,n){if(t&1){let e=S();a(0,"div",86)(1,"div",87),m("click",function(){g(e);let o=c();return u(o.tryCloseBookingModal())}),l(),a(2,"div",88)(3,"div",89)(4,"div")(5,"h2",90),d(6,"Agendar nueva cita"),l(),a(7,"p",91),d(8,"Selecciona los detalles de tu consulta"),l()(),a(9,"button",92),m("click",function(){g(e);let o=c();return u(o.tryCloseBookingModal())}),y(10,"lucide-icon",93),l()(),a(11,"div",94)(12,"div",95)(13,"div",96)(14,"div")(15,"h3",97),d(16,"Detalles"),l(),a(17,"p",98),d(18,"Completa la informaci\xF3n requerida"),l()(),a(19,"div")(20,"label",99),d(21," Especialidad "),a(22,"span",100),d(23,"*"),l()(),a(24,"select",101),m("ngModelChange",function(o){g(e);let p=c();return p.modalSpecialtyId.set(o),u(p.modalDoctorId.set(""))}),a(25,"option",102),d(26,"Seleccionar especialidad"),l(),_(27,dt,2,2,"option",8),l()(),a(28,"div")(29,"label",99),d(30," M\xE9dico "),a(31,"span",100),d(32,"*"),l()(),a(33,"select",103),m("ngModelChange",function(o){g(e);let p=c();return u(p.modalDoctorId.set(o))}),a(34,"option",102),d(35,"Seleccionar m\xE9dico"),l(),_(36,st,2,2,"option",8),l()(),a(37,"div")(38,"label",99),d(39," Fecha "),a(40,"span",100),d(41,"*"),l()(),a(42,"input",104),m("ngModelChange",function(o){g(e);let p=c();return u(p.modalDate.set(o))}),l()(),a(43,"div")(44,"label",99),d(45," Paciente "),a(46,"span",100),d(47,"*"),l()(),a(48,"select",101),m("ngModelChange",function(o){g(e);let p=c();return u(p.modalPatientId.set(o))}),a(49,"option",102),d(50,"Seleccionar paciente"),l(),_(51,ct,2,3,"option",8),l()()(),a(52,"div",105)(53,"h3",106),d(54," Horarios disponibles "),l(),_(55,mt,2,1,"div",107)(56,_t,4,2,"div",108),l()(),a(57,"div",109)(58,"h3",110),d(59,"Informaci\xF3n Adicional"),l(),a(60,"div",111)(61,"button",112),m("click",function(){g(e);let o=c();return u(o.modalPaymentMethod.set("CASH"))}),a(62,"span",113),d(63,"Efectivo"),l()(),a(64,"button",112),m("click",function(){g(e);let o=c();return u(o.modalPaymentMethod.set("YAPE"))}),a(65,"span",113),d(66,"Yape"),l()(),a(67,"button",112),m("click",function(){g(e);let o=c();return u(o.modalPaymentMethod.set("PLIN"))}),a(68,"span",113),d(69,"Plin"),l()(),a(70,"button",112),m("click",function(){g(e);let o=c();return u(o.modalPaymentMethod.set("CARD"))}),a(71,"span",113),d(72,"Tarjeta"),l()()(),_(73,gt,4,1,"div",114),a(74,"div")(75,"label",99),d(76,"Notas"),l(),a(77,"textarea",115),m("ngModelChange",function(o){g(e);let p=c();return u(p.modalNotes.set(o))}),l()()()(),a(78,"div",116)(79,"button",117),m("click",function(){g(e);let o=c();return u(o.tryCloseBookingModal())}),d(80," Cancelar "),l(),a(81,"button",118),m("click",function(){g(e);let o=c();return u(o.saveAppointment())}),_(82,ut,2,0,"span",16)(83,xt,2,0,"span",16),l()()()()}if(t&2){let e=c();r(10),s("img",e.icons.Plus),r(14),s("ngModel",e.modalSpecialtyId()),r(3),s("ngForOf",e.specialties()),r(6),s("ngModel",e.modalDoctorId())("disabled",!e.modalSpecialtyId()),r(3),s("ngForOf",e.filteredDoctorsForModal()),r(6),s("ngModel",e.modalDate()),r(6),s("ngModel",e.modalPatientId()),r(3),s("ngForOf",e.patients()),r(4),s("ngIf",e.availableSlotsForModal().length>0),r(),s("ngIf",e.availableSlotsForModal().length===0),r(5),w("flex flex-col items-center justify-center p-3 rounded-xl border-2 transition-all "+(e.modalPaymentMethod()==="CASH"?"border-blue-600 bg-blue-50":"border-gray-200 bg-white hover:border-gray-300")),r(),O("text-blue-600",e.modalPaymentMethod()==="CASH"),r(2),w("flex flex-col items-center justify-center p-3 rounded-xl border-2 transition-all "+(e.modalPaymentMethod()==="YAPE"?"border-blue-600 bg-blue-50":"border-gray-200 bg-white hover:border-gray-300")),r(),O("text-blue-600",e.modalPaymentMethod()==="YAPE"),r(2),w("flex flex-col items-center justify-center p-3 rounded-xl border-2 transition-all "+(e.modalPaymentMethod()==="PLIN"?"border-blue-600 bg-blue-50":"border-gray-200 bg-white hover:border-gray-300")),r(),O("text-blue-600",e.modalPaymentMethod()==="PLIN"),r(2),w("flex flex-col items-center justify-center p-3 rounded-xl border-2 transition-all "+(e.modalPaymentMethod()==="CARD"?"border-blue-600 bg-blue-50":"border-gray-200 bg-white hover:border-gray-300")),r(),O("text-blue-600",e.modalPaymentMethod()==="CARD"),r(2),s("ngIf",B(33,Ae).includes(e.modalPaymentMethod())),r(4),s("ngModel",e.modalNotes()),r(2),s("disabled",e.saving()),r(2),s("disabled",e.saving()||!e.modalPatientId()||!e.modalTime()||!e.modalDoctorId()),r(),s("ngIf",!e.saving()),r(),s("ngIf",e.saving())}}function vt(t,n){if(t&1){let e=S();a(0,"div",124)(1,"button",147),m("click",function(){g(e);let o=c(3);return u(o.validatePayment())}),y(2,"lucide-icon",12),d(3," Confirmar Pago Realizado "),l(),a(4,"p",148),d(5," Esta acci\xF3n marcar\xE1 la cita como "),a(6,"strong"),d(7,"Pagada"),l(),d(8," y "),a(9,"strong"),d(10,"Confirmada"),l(),d(11,". "),l()()}if(t&2){let e=c(3);r(2),s("img",e.icons.CheckCircle)}}function bt(t,n){if(t&1&&(a(0,"div",149)(1,"label",150),d(2,"Comprobante de Pago"),l(),a(3,"div",151),y(4,"img",152),a(5,"a",153)(6,"span",154),y(7,"lucide-icon",155),d(8," Ver completo "),l()()()()),t&2){let e=c(3);r(4),s("src",e.selectedAppointment.paymentProofUrl,j),r(),s("href",e.selectedAppointment.paymentProofUrl,j),r(2),s("img",e.icons.Search)}}function ht(t,n){if(t&1&&(a(0,"div",156)(1,"label",139),d(2,"Notas"),l(),a(3,"p",157),d(4),l()()),t&2){let e=c(3);r(4),C('"',e.selectedAppointment.notes,'"')}}function yt(t,n){if(t&1&&(a(0,"div",132)(1,"div",133)(2,"div",134),y(3,"lucide-icon",135),l(),a(4,"div")(5,"h3",136),d(6),l(),a(7,"p",137),d(8,"Paciente"),l()()(),a(9,"div",138)(10,"div")(11,"label",139),d(12,"M\xE9dico"),l(),a(13,"p",140),d(14),l()(),a(15,"div")(16,"label",139),d(17,"Especialidad"),l(),a(18,"p",140),d(19),l()(),y(20,"div",141),a(21,"div")(22,"label",139),d(23,"Fecha"),l(),a(24,"p",142),d(25),l()(),a(26,"div")(27,"label",139),d(28,"Horario"),l(),a(29,"p",140),d(30),l()()(),a(31,"div",143)(32,"div",144)(33,"label",139),d(34,"Estado"),l(),a(35,"span"),d(36),l()(),a(37,"div",144)(38,"label",139),d(39,"Pago"),l(),a(40,"p",140),d(41),l()()(),_(42,vt,12,1,"div",114)(43,bt,9,3,"div",145)(44,ht,5,1,"div",146),l()),t&2){let e=c(2);r(3),s("img",e.icons.User),r(3),b(e.getPatientName(e.selectedAppointment.patientId)),r(8),b(e.getDoctorName(e.selectedAppointment.doctorId)),r(5),b(e.getSpecialtyName(e.selectedAppointment.specialtyId)),r(6),b(e.formatDate(e.selectedAppointment.appointmentDate)),r(5),L(" ",e.formatTime12Hour(e.selectedAppointment.startTime)," - ",e.formatTime12Hour(e.selectedAppointment.endTime)," "),r(5),w("px-2 py-1 rounded text-xs font-bold "+e.getAppointmentColorClass(e.selectedAppointment)),r(),C(" ",e.getAppointmentStatusLabel(e.selectedAppointment)," "),r(5),b(e.selectedAppointment.paymentMethod),r(),s("ngIf",e.selectedAppointment.paymentStatus!=="PAID"),r(),s("ngIf",e.selectedAppointment.paymentProofUrl),r(),s("ngIf",e.selectedAppointment.notes)}}function Ct(t,n){if(t&1&&(a(0,"option",26),d(1),l()),t&2){let e=n.$implicit;s("value",e.id),r(),C("",e.fullName," ")}}function St(t,n){if(t&1){let e=S();a(0,"button",20),m("click",function(){let o=g(e).$implicit,p=c(3);return u(p.modalTime.set(o))}),d(1),l()}if(t&2){let e=n.$implicit,i=c(3);w("py-2 text-xs font-bold rounded-lg border transition-all "+(i.modalTime()===e?"bg-blue-600 text-white border-blue-600":"bg-white text-gray-700 border-gray-200 hover:border-blue-300")),r(),C(" ",e," ")}}function wt(t,n){if(t&1){let e=S();a(0,"div",132)(1,"div",158)(2,"p",159),d(3," Reprogramando cita. Selecciona una nueva fecha o m\xE9dico. "),l()(),a(4,"div",160)(5,"div")(6,"label",161),d(7,"Fecha"),l(),a(8,"input",162),m("ngModelChange",function(o){g(e);let p=c(2);return u(p.modalDate.set(o))}),l()(),a(9,"div",163)(10,"div")(11,"label",161),d(12,"Especialidad"),l(),a(13,"div",164),d(14),l()(),a(15,"div")(16,"label",161),d(17,"M\xE9dico"),l(),a(18,"select",165),m("ngModelChange",function(o){g(e);let p=c(2);return u(p.modalDoctorId.set(o))}),_(19,Ct,2,2,"option",8),l()()(),a(20,"div")(21,"label",161),d(22,"Horario"),l(),a(23,"div",166),_(24,St,2,3,"button",120),l()()()()}if(t&2){let e=c(2);r(8),s("ngModel",e.modalDate()),r(6),b(e.getSpecialtyName(e.modalSpecialtyId())),r(4),s("ngModel",e.modalDoctorId()),r(),s("ngForOf",e.doctorsInCurrentSpecialty()),r(5),s("ngForOf",e.availableSlotsForModal())}}function It(t,n){if(t&1){let e=S();a(0,"div",167)(1,"div",168),y(2,"lucide-icon",169),l(),a(3,"h3",170),d(4,"\xBFSeguro que deseas cancelar?"),l(),a(5,"p",171),d(6,"La cita de se eliminar\xE1 permanentemente de la agenda."),l(),a(7,"div",172)(8,"button",173),m("click",function(){g(e);let o=c(2);return u(o.cancelCancelConfirmation())}),d(9,"Volver"),l(),a(10,"button",174),m("click",function(){g(e);let o=c(2);return u(o.confirmCancel())}),d(11,"Confirmar"),l()()()}if(t&2){let e=c(2);r(2),s("img",e.icons.AlertCircle)}}function At(t,n){if(t&1){let e=S();a(0,"button",181),m("click",function(){g(e);let o=c(3);return u(o.showCancelConfirmation())}),d(1," Cancelar "),l()}}function Dt(t,n){if(t&1){let e=S();a(0,"button",182),m("click",function(){g(e);let o=c(3);return u(o.startRescheduling())}),d(1," Reprogramar "),l()}}function Mt(t,n){if(t&1){let e=S();a(0,"button",183),m("click",function(){g(e);let o=c(3);return u(o.saveRescheduledAppointment())}),d(1," Guardar "),l()}if(t&2){let e=c(3);s("disabled",!e.modalTime())}}function Et(t,n){if(t&1){let e=S();a(0,"div",175)(1,"button",176),m("click",function(){g(e);let o=c(2);return u(o.tryCloseDetailsModal())}),d(2," Cerrar "),l(),a(3,"div",177),_(4,At,2,0,"button",178)(5,Dt,2,0,"button",179)(6,Mt,2,1,"button",180),l()()}if(t&2){let e=c(2);r(4),s("ngIf",!e.isRescheduling&&(e.selectedAppointment==null?null:e.selectedAppointment.status)!=="CANCELLED"),r(),s("ngIf",!e.isRescheduling&&(e.selectedAppointment==null?null:e.selectedAppointment.status)!=="CANCELLED"),r(),s("ngIf",e.isRescheduling)}}function kt(t,n){if(t&1){let e=S();a(0,"div",86)(1,"div",87),m("click",function(){g(e);let o=c();return u(o.tryCloseDetailsModal())}),l(),a(2,"div",126)(3,"div")(4,"div")(5,"h2",90),d(6,"Detalles de la cita"),l(),a(7,"p",127),d(8,"Informaci\xF3n completa"),l()(),a(9,"button",92),m("click",function(){g(e);let o=c();return u(o.tryCloseDetailsModal())}),y(10,"lucide-icon",93),l()(),a(11,"div",128),_(12,yt,45,14,"div",129)(13,wt,25,5,"div",129)(14,It,12,1,"div",130),l(),_(15,Et,7,3,"div",131),l()()}if(t&2){let e=c();r(3),w(e.getDetailsHeaderClass()+" px-6 py-4 shrink-0 flex items-center justify-between shadow-md z-20 transition-colors duration-300"),r(7),s("img",e.icons.Plus),r(2),s("ngIf",e.selectedAppointment&&!e.isRescheduling&&!e.isConfirmingCancel),r(),s("ngIf",e.isRescheduling),r(),s("ngIf",e.isConfirmingCancel),r(),s("ngIf",!e.isConfirmingCancel)}}var Ie=class t{appointmentsService=T(pe);doctorService=T(he);specialtyService=T(Ce);scheduleService=T(Se);patientsService=T(ye);doctorSpecialtyService=T(be);configService=T(we);route=T(X);icons={ChevronLeft:ee,ChevronRight:te,Calendar:Z,User:de,Clock:ae,Plus:re,Search:le,AlertCircle:ne,CheckCircle:ie,HelpCircle:oe};config=this.configService.settings;isWorkingDay(n){let e=(n+1)%7;return this.config().workingDays.includes(e)}isBreakTime(n){let e=this.config().breakStartTime,i=this.config().breakEndTime;return!e||!i?!1:n>=e&&n<i}viewMode=A("week");doctors=this.doctorService.doctors;specialties=this.specialtyService.specialties;patients=this.patientsService.patients;appointments=this.appointmentsService.appointments;selectedDoctorId=A("");selectedSpecialtyId=A("");constructor(){this.scheduleService.refreshSchedules(),U(()=>{let n=this.currentDate(),e=this.viewMode(),i,o;if(e==="week"){let p=this.getStartOfWeek(n),f=new Date(p);f.setDate(p.getDate()+6),i=p.toISOString().split("T")[0],o=f.toISOString().split("T")[0]}else i=o=n.toISOString().split("T")[0];this.appointmentsService.refreshAppointmentsByRange(i,o)}),this.route.queryParams.subscribe(n=>{let e=n.appointmentId;e&&this.appointmentsService.getAppointmentById(e).subscribe({next:i=>{if(i){let o=new Date(i.appointmentDate+"T00:00:00");this.currentDate.set(o),this.openAppointmentDetails(i)}}})})}currentDate=A(new Date);currentDateStr=N(()=>this.currentDate().toLocaleDateString("es-ES",{weekday:"long",year:"numeric",month:"long",day:"numeric"}));isModalOpen=!1;saving=A(!1);selectedSlot=null;modalPatientId=A("");modalSpecialtyId=A("");modalDoctorId=A("");modalDate=A(new Date().toISOString().split("T")[0]);modalTime=A("");modalNotes=A("");modalPaymentMethod=A("CASH");modalTransactionId=A("");modalPaymentProof=A("");isDetailsModalOpen=!1;selectedAppointment=null;isRescheduling=!1;isConfirmingCancel=!1;doctorsInCurrentSpecialty=N(()=>{let n=this.isRescheduling?this.modalSpecialtyId():this.selectedSpecialtyId();if(!n)return this.doctors();let i=this.doctorSpecialtyService.associations().filter(o=>o.specialtyId===n).map(o=>o.doctorId);return this.doctors().filter(o=>o.doctorId!=null&&i.includes(o.doctorId))});globalAppointments=N(()=>{let n=this.currentDate().toISOString().split("T")[0];return this.appointments().filter(e=>e.appointmentDate===n&&e.status!=="CANCELLED")});filteredDoctorsForModal=N(()=>{let n=this.modalSpecialtyId();if(!n)return[];let i=this.doctorSpecialtyService.associations().filter(o=>o.specialtyId===n).map(o=>o.doctorId);return this.doctors().filter(o=>o.doctorId!=null&&i.includes(o.doctorId))});availableSlotsForModal=N(()=>{let n=this.modalDoctorId(),e=this.modalSpecialtyId(),i=this.modalDate();if(!n||!e||!i)return[];let o=this.getDuration(n,e),p=x=>x.length>5?x.substring(0,5):x,f=this.scheduleService.getSchedulesForDoctor(n,e).filter(x=>x.date===i);if(f.length===0)return[];let v=[];for(let x of f){let h=this.getMinutes(p(x.startTime)),D=this.getMinutes(p(x.endTime)),k=h;for(;k+o<=D;)v.push(this.formatMinutes(k)),k+=o}return v.filter(x=>!this.appointments().some(D=>D.doctorId===n&&D.appointmentDate===i&&D.startTime===x&&D.status!=="CANCELLED"))});weekDays=N(()=>{let n=this.getStartOfWeek(this.currentDate()),e=[];for(let i=0;i<7;i++){let o=new Date(n);o.setDate(n.getDate()+i);let p=[o.getFullYear(),(o.getMonth()+1).toString().padStart(2,"0"),o.getDate().toString().padStart(2,"0")].join("-");e.push({date:o,iso:p,dayName:o.toLocaleDateString("es-ES",{weekday:"short"}).replace(".",""),dayNum:o.getDate(),monthName:o.toLocaleDateString("es-ES",{month:"short"}).replace(".","")})}return e});getMinutes(n){let[e,i]=n.split(":").map(Number);return e*60+i}formatMinutes(n){let e=Math.floor(n/60),i=n%60;return`${e.toString().padStart(2,"0")}:${i.toString().padStart(2,"0")}`}timeSlots=N(()=>{let n=30,e=this.selectedDoctorId(),i=this.selectedSpecialtyId();if(e&&i){let x=this.doctorSpecialtyService.associations().find(h=>h.doctorId===e&&h.specialtyId===i);x&&x.durationMinutes>0&&(n=x.durationMinutes)}let o=480,p=1200;if(e){let x=this.scheduleService.schedules().filter(h=>h.doctorId===e);if(i&&(x=x.filter(h=>h.specialtyId===i)),x.length>0){let h=x.map(I=>this.getMinutes(I.startTime)),D=x.map(I=>this.getMinutes(I.endTime)),k=Math.min(...h),P=Math.max(...D);o=k,p=P}}let f=[],v=o;for(;v+n<=p;)f.push(this.formatMinutes(v)),v+=n;return f});getStartOfWeek(n){let e=new Date(n),i=e.getDay(),o=e.getDate()-i+(i===0?-6:1);return new Date(e.setDate(o))}changeWeek(n){let e=new Date(this.currentDate());this.viewMode()==="week"?e.setDate(e.getDate()+n*7):e.setDate(e.getDate()+n),this.currentDate.set(e)}toggleView(n){this.viewMode.set(n)}isPastDate(n){let e=new Date;return e.setHours(0,0,0,0),new Date(n+"T00:00:00")<e}isPastTime(n,e){if(this.isPastDate(n))return!0;let i=new Date().toISOString().split("T")[0];if(n===i){let o=new Date,[p,f]=e.split(":").map(Number),v=new Date;return v.setHours(p,f,0,0),v<o}return!1}getSlotStatus(n,e,i){let o=[],p=this.isPastTime(n,e),f=this.selectedDoctorId()?[this.selectedDoctorId()]:this.doctorsInCurrentSpecialty().map(v=>v.doctorId||v.id);for(let v of f){let x=this.getDoctorName(v),h=this.appointments().find(I=>I.doctorId===v&&I.appointmentDate===n&&I.startTime===e&&I.status!=="CANCELLED");if(h){o.push({type:"booked",appointment:h});continue}let D=!1,k="",P=I=>I.length>5?I.substring(0,5):I;if(this.selectedSpecialtyId())D=this.scheduleService.getSchedulesForDoctor(v,this.selectedSpecialtyId()).some(V=>V.date===n&&e>=P(V.startTime)&&e<P(V.endTime)),k=this.selectedSpecialtyId();else{let V=this.scheduleService.schedules().filter(F=>F.doctorId===v).find(F=>F.date===n&&e>=P(F.startTime)&&e<P(F.endTime));V&&(D=!0,k=V.specialtyId)}D&&o.push({type:"available",doctorId:v,doctorName:x,date:n,time:e,specialtyId:k,isPast:p})}return o}getAppointmentsForSlot(n,e){return this.getSlotStatus(n,e,0).filter(o=>o.type==="booked").map(o=>o.appointment)}openBookingModal(n,e,i,o){this.selectedSlot={date:n,time:e},this.modalPatientId.set(""),this.modalSpecialtyId.set(o||this.selectedSpecialtyId()||""),this.modalDoctorId.set(i||this.selectedDoctorId()||""),this.modalDate.set(n);let p=e;if(i&&o){let f=this.getDuration(i,o),v=h=>h.length>5?h.substring(0,5):h,x=this.scheduleService.getSchedulesForDoctor(i,o).find(h=>h.date===n);if(x){let h=this.getMinutes(v(x.startTime)),k=this.getMinutes(e)-h;if(k>=0){let P=Math.floor(k/f),I=h+P*f;p=this.formatMinutes(I)}}}this.modalTime.set(p),this.modalNotes.set(""),this.modalPaymentMethod.set("CASH"),this.modalTransactionId.set(""),this.modalPaymentProof.set(""),this.isModalOpen=!0}isBookingDirty(){return!!(this.modalDoctorId()||this.modalSpecialtyId()||this.modalPatientId()||this.modalTime())}tryCloseBookingModal(){this.isBookingDirty()?confirm("\xBFEst\xE1s seguro de que deseas cerrar? Se perder\xE1n los datos ingresados.")&&this.closeModal():this.closeModal()}tryCloseDetailsModal(){this.isRescheduling?confirm("Est\xE1s reprogramando una cita. \xBFSeguro que deseas cerrar sin guardar?")&&this.closeDetailsModal():this.closeDetailsModal()}closeModal(){this.isModalOpen=!1}formatDate(n){if(!n)return"";let[e,i,o]=n.split("-").map(Number),p=new Date(e,i-1,o),f=p.toLocaleDateString("es-ES",{weekday:"long"}),v=p.getDate(),x=p.toLocaleDateString("es-ES",{month:"long"}),h=p.getFullYear();return`${f} ${v} ${x} ${h}`}getDuration(n,e){let i=this.doctorSpecialtyService.associations().find(o=>o.doctorId===n&&o.specialtyId===e);return i&&i.durationMinutes>0?i.durationMinutes:30}formatTime12Hour(n){if(!n)return"";let[e,i]=n.split(":").map(Number),o=e>=12?"PM":"AM";return`${e%12||12}:${i.toString().padStart(2,"0")} ${o}`}saveAppointment(){let n=this.modalDoctorId(),e=this.modalSpecialtyId(),i=this.modalDate(),o=this.modalTime(),p=this.modalPatientId();if(n&&e&&i&&o&&p){let f=this.patients().find(x=>x.patientId===p),v=this.getDuration(n,e);this.saving.set(!0),this.appointmentsService.addAppointment({doctorId:n,specialtyId:e,patientId:p,patientName:f?.fullName||"Desconocido",appointmentDate:i,startTime:o,endTime:this.addMinutes(o,v),notes:this.modalNotes(),paymentMethod:this.modalPaymentMethod(),paymentStatus:this.modalPaymentMethod()==="CASH"?"PENDING":"PAID",transactionId:this.modalTransactionId(),paymentProofUrl:this.modalPaymentProof()}).subscribe({next:()=>{this.saving.set(!1),this.closeModal()},error:()=>this.saving.set(!1)})}}addMinutes(n,e){let[i,o]=n.split(":").map(Number),p=new Date;return p.setHours(i,o+e),`${p.getHours().toString().padStart(2,"0")}:${p.getMinutes().toString().padStart(2,"0")}`}getDoctorName(n){return this.doctors().find(e=>e.id===n||e.doctorId===n)?.fullName||"Desconocido"}getSpecialtyName(n){return this.specialties().find(e=>e.specialtyId===n)?.name||"Desconocido"}getPatientName(n){return this.patients().find(e=>e.patientId===n)?.fullName||"Paciente Desconocido"}getAppointmentColorClass(n){return n.paymentStatus==="PAID"?"bg-green-100 border-green-600 text-green-800":"bg-yellow-100 border-yellow-500 text-yellow-800"}openGenericBooking(){this.openBookingModal("","")}openAppointmentDetails(n){this.selectedAppointment=n,this.isDetailsModalOpen=!0,this.isRescheduling=!1}closeDetailsModal(){this.isDetailsModalOpen=!1,this.selectedAppointment=null,this.isRescheduling=!1,this.isConfirmingCancel=!1}startRescheduling(){this.selectedAppointment&&(this.isRescheduling=!0,this.isConfirmingCancel=!1,this.modalSpecialtyId.set(this.selectedAppointment.specialtyId),this.modalDoctorId.set(this.selectedAppointment.doctorId),this.modalDate.set(this.selectedAppointment.appointmentDate),this.modalTime.set(this.selectedAppointment.startTime),this.modalPatientId.set(this.selectedAppointment.patientId),this.modalNotes.set(this.selectedAppointment.notes||""),this.modalPaymentMethod.set(this.selectedAppointment.paymentMethod||"CASH"),this.modalTransactionId.set(this.selectedAppointment.transactionId||""))}showCancelConfirmation(){this.isConfirmingCancel=!0,this.isRescheduling=!1}cancelCancelConfirmation(){this.isConfirmingCancel=!1}confirmCancel(){this.selectedAppointment&&(this.appointmentsService.updatestatus(this.selectedAppointment.appointmentId,"CANCELLED"),this.closeDetailsModal(),this.isConfirmingCancel=!1)}saveRescheduledAppointment(){if(this.selectedAppointment&&this.modalTime()&&this.modalDate()){let n=this.modalDoctorId()||this.selectedAppointment.doctorId,e=this.modalSpecialtyId()||this.selectedAppointment.specialtyId,i=this.getDuration(n,e),o=R($({},this.selectedAppointment),{doctorId:n,specialtyId:e,appointmentDate:this.modalDate(),startTime:this.modalTime(),endTime:this.addMinutes(this.modalTime(),i),notes:this.modalNotes(),paymentMethod:this.modalPaymentMethod(),transactionId:this.modalTransactionId()}),p=this.appointments(),f=p.findIndex(v=>v.appointmentId===this.selectedAppointment.appointmentId);f!==-1&&(p[f]=o,this.appointmentsService.appointments.set([...p])),this.closeDetailsModal()}}cancelAppointment(){this.selectedAppointment&&(this.appointmentsService.updatestatus(this.selectedAppointment.appointmentId,"CANCELLED"),this.closeDetailsModal())}validatePayment(){if(this.selectedAppointment){let n=R($({},this.selectedAppointment),{paymentStatus:"PAID",status:"CONFIRMED"});this.appointments.update(e=>e.map(i=>i.appointmentId===n.appointmentId?n:i)),this.selectedAppointment=n,this.appointmentsService.updatePayment(this.selectedAppointment.appointmentId,this.selectedAppointment.paymentMethod||"CASH","PAID"),this.appointmentsService.updatestatus(this.selectedAppointment.appointmentId,"CONFIRMED")}}getAppointmentStatusLabel(n){return n.paymentStatus==="PAID"?"Pagada":(n.status==="CONFIRMED"&&n.paymentStatus==="PENDING","Reservada")}getDetailsHeaderClass(){return this.selectedAppointment?this.selectedAppointment.paymentStatus==="PAID"?"bg-green-600":"bg-yellow-500":"bg-blue-600"}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=z({type:t,selectors:[["app-appointments-calendar"]],decls:43,vars:19,consts:[[1,"h-full","flex","flex-col"],[1,"bg-white","border-b","border-gray-200","px-6","py-4","flex","flex-col","md:flex-row","md:items-center","justify-between","gap-4"],[1,"text-xl","font-bold","text-gray-900"],[1,"text-sm","text-gray-500"],[1,"flex","items-center","gap-4"],[1,"relative"],[1,"appearance-none","bg-white","border","border-gray-300","text-gray-700","text-sm","rounded-xl","focus:ring-blue-500","focus:border-blue-500","block","w-full","pl-3","pr-8","py-2.5","shadow-sm","hover:border-gray-400","transition-colors","cursor-pointer","font-medium",3,"ngModelChange","ngModel"],["value",""],[3,"value",4,"ngFor","ngForOf"],[1,"pointer-events-none","absolute","inset-y-0","right-0","flex","items-center","px-2","text-gray-500"],[1,"w-4","h-4","rotate-90",3,"img"],[1,"flex","items-center","gap-2","bg-blue-600","hover:bg-blue-700","text-white","px-6","py-2.5","rounded-xl","text-sm","font-bold","shadow-lg","shadow-blue-200","transition-all","active:scale-95","whitespace-nowrap",3,"click"],[1,"w-5","h-5",3,"img"],[1,"flex","items-center","bg-gray-100","rounded-xl","p-1","shadow-inner"],[1,"p-2","hover:bg-white","hover:shadow-sm","rounded-lg","transition-all","text-gray-600",3,"click"],[1,"px-4","text-center","min-w-[180px]"],[4,"ngIf"],[1,"flex-1","overflow-auto","bg-gray-50","p-2","sm:p-6"],[1,"flex","items-center","justify-end","mb-4","px-1"],[1,"bg-gray-200","p-1","rounded-lg","inline-flex"],[3,"click"],[1,"bg-white","rounded-xl","shadow","border","border-gray-200","overflow-hidden","min-w-[800px]"],[1,"grid","border-b","border-gray-200","bg-gray-50","sticky","top-0","z-10"],[1,"p-4","text-xs","font-semibold","text-gray-400","uppercase","tracking-wider","text-center","border-r","border-gray-200","w-20","flex","items-center","justify-center"],["class","grid border-b border-gray-100 last:border-b-0 min-h-[3.5rem]",3,"class",4,"ngFor","ngForOf"],["class","fixed inset-0 z-50 flex items-center justify-center p-4 sm:p-6",4,"ngIf"],[3,"value"],[1,"block","text-sm","font-bold","text-gray-900","leading-none","mb-1"],[1,"block","text-[10px]","font-bold","text-gray-500","uppercase","tracking-wider"],[1,"block","text-sm","font-bold","text-gray-900","capitalize","leading-none"],["class","p-4 text-center border-r border-gray-200 last:border-r-0",4,"ngFor","ngForOf"],[1,"p-4","text-center","border-r","border-gray-200","last:border-r-0"],[1,"text-xs","font-semibold","text-gray-500","uppercase","mb-1"],[1,"flex","flex-col","items-center","leading-none"],[1,"text-lg","font-bold","text-gray-900"],[1,"text-[10px]","font-bold","text-gray-400","uppercase","mt-0.5"],[1,"p-4","text-center"],[1,"text-xs","font-semibold","text-gray-500","uppercase"],[1,"grid","border-b","border-gray-100","last:border-b-0","min-h-[3.5rem]"],[1,"w-20","p-2","text-xs","font-medium","text-gray-500","text-center","border-r","border-gray-100","flex","items-center","justify-center","bg-gray-50/50"],[3,"class",4,"ngFor","ngForOf"],["class","absolute inset-0 bg-gray-50/50 -z-10",4,"ngIf"],[1,"w-full","h-full","relative","z-10",3,"ngClass"],[4,"ngFor","ngForOf"],[1,"absolute","inset-0","bg-gray-50/50","-z-10"],["class","rounded border transition-all group flex flex-col justify-center items-center gap-0.5 relative",3,"disabled","ngClass","click",4,"ngIf"],[3,"ngClass","class","click",4,"ngIf"],[1,"rounded","border","transition-all","group","flex","flex-col","justify-center","items-center","gap-0.5","relative",3,"click","disabled","ngClass"],["class","w-4 h-4 text-blue-500",3,"img",4,"ngIf"],[1,"absolute","bottom-full","left-1/2","-translate-x-1/2","mb-2","w-max","max-w-[150px]","bg-gray-900","text-white","text-[10px]","rounded","px-2","py-1","opacity-0","group-hover:opacity-100","transition-opacity","pointer-events-none","z-50","shadow-lg","text-center"],[1,"opacity-75"],[1,"text-[9px]","text-blue-500","opacity-80","truncate","w-full","text-center","pb-0.5"],[1,"w-4","h-4","text-blue-500",3,"img"],[3,"click","ngClass"],["class","w-full h-full flex items-center justify-center",4,"ngIf"],[1,"absolute","bottom-full","left-1/2","-translate-x-1/2","mb-2","w-max","max-w-[150px]","bg-gray-900","text-white","text-[10px]","rounded","px-2","py-1","opacity-0","group-hover:opacity-100","transition-opacity","pointer-events-none","z-50","shadow-lg","text-left"],[1,"font-bold"],[1,"font-bold","text-[10px]","truncate","w-full"],[1,"truncate","text-[9px]","opacity-80","w-full"],[1,"w-full","h-full","flex","items-center","justify-center"],["class","w-4 h-4 text-green-600",3,"img",4,"ngIf"],["class","w-4 h-4 text-yellow-600",3,"img",4,"ngIf"],["class","text-[9px] font-bold",4,"ngIf"],[1,"w-4","h-4","text-green-600",3,"img"],[1,"w-4","h-4","text-yellow-600",3,"img"],[1,"text-[9px]","font-bold"],[1,"relative","p-2","bg-white"],["class","absolute inset-0 bg-gray-50/40 pattern-diagonal-lines",4,"ngIf"],[1,"absolute","inset-0","bg-gray-50/40","pattern-diagonal-lines"],["class","rounded-lg bg-blue-50 border border-blue-200 border-dashed hover:bg-blue-100 hover:border-solid hover:shadow-md transition-all flex items-center gap-2 group/card cursor-pointer relative",3,"ngClass","click",4,"ngIf"],[1,"rounded-lg","bg-blue-50","border","border-blue-200","border-dashed","hover:bg-blue-100","hover:border-solid","hover:shadow-md","transition-all","flex","items-center","gap-2","group/card","cursor-pointer","relative",3,"click","ngClass"],["class","text-left overflow-hidden",4,"ngIf"],["class","w-6 h-6 rounded-full bg-blue-100 flex items-center justify-center flex-shrink-0 group-hover/card:bg-blue-200 transition-colors",4,"ngIf"],[1,"absolute","bottom-full","left-1/2","-translate-x-1/2","mb-2","w-max","max-w-[200px]","bg-gray-900","text-white","text-xs","rounded","px-2","py-1","opacity-0","group-hover/card:opacity-100","transition-opacity","pointer-events-none","z-50","shadow-lg"],[1,"text-left","overflow-hidden"],[1,"text-xs","font-bold","text-blue-600","truncate","group-hover/card:text-blue-700"],[1,"text-[10px]","text-blue-500","font-medium","truncate"],[1,"w-6","h-6","rounded-full","bg-blue-100","flex","items-center","justify-center","flex-shrink-0","group-hover/card:bg-blue-200","transition-colors"],[1,"w-3","h-3","text-blue-600",3,"img"],["class","overflow-hidden w-full",4,"ngIf"],[1,"absolute","bottom-full","left-1/2","-translate-x-1/2","mb-2","w-max","max-w-[200px]","bg-gray-900","text-white","text-xs","rounded","px-2","py-1","opacity-0","group-hover/card:opacity-100","transition-opacity","pointer-events-none","z-50","shadow-lg","text-left"],[1,"overflow-hidden","w-full"],[1,"font-bold","text-xs","truncate"],[1,"text-[10px]","opacity-90","truncate"],["class","text-[10px] font-bold text-center",4,"ngIf"],[1,"text-[10px]","font-bold","text-center"],[1,"fixed","inset-0","z-50","flex","items-center","justify-center","p-4","sm:p-6"],[1,"absolute","inset-0","bg-black","bg-opacity-60","transition-opacity","backdrop-blur-sm",3,"click"],[1,"bg-white","rounded-2xl","shadow-2xl","w-full","max-w-3xl","max-h-[90vh]","flex","flex-col","relative","z-10","overflow-hidden","animate-fade-in-up"],[1,"bg-blue-600","px-6","py-4","shrink-0","flex","items-center","justify-between","shadow-md","z-20"],[1,"text-xl","font-bold","text-white"],[1,"text-blue-100","text-sm"],[1,"text-white","hover:bg-white/20","rounded-lg","p-2","transition-all",3,"click"],[1,"w-6","h-6","rotate-45",3,"img"],[1,"p-6","overflow-y-auto","custom-scrollbar","flex-1"],[1,"grid","grid-cols-1","lg:grid-cols-2","gap-8"],[1,"space-y-5"],[1,"text-sm","font-bold","text-gray-700","uppercase","tracking-wide","mb-2"],[1,"text-xs","text-gray-500"],[1,"block","text-xs","font-bold","text-gray-600","uppercase","tracking-wide","mb-2"],[1,"text-red-500"],[1,"w-full","rounded-xl","border-2","border-gray-200","py-3","px-4","text-sm","font-medium","focus:border-blue-500","focus:ring-2","focus:ring-blue-200","transition-all","outline-none",3,"ngModelChange","ngModel"],["value","","disabled","","selected",""],[1,"w-full","rounded-xl","border-2","border-gray-200","py-3","px-4","text-sm","font-medium","focus:border-blue-500","focus:ring-2","focus:ring-blue-200","transition-all","outline-none","disabled:bg-gray-50","disabled:text-gray-400",3,"ngModelChange","ngModel","disabled"],["type","date",1,"w-full","rounded-xl","border-2","border-gray-200","py-3","px-4","text-sm","font-medium","focus:border-blue-500","focus:ring-2","focus:ring-blue-200","transition-all","outline-none",3,"ngModelChange","ngModel"],[1,"bg-gradient-to-br","from-gray-50","to-blue-50","rounded-2xl","p-6","border-2","border-gray-100","flex","flex-col","h-full","min-h-[300px]"],[1,"text-sm","font-bold","text-gray-700","uppercase","tracking-wide","mb-2","text-center"],["class","flex-1 grid grid-cols-3 gap-3 content-start overflow-y-auto pr-1 custom-scrollbar max-h-[300px]",4,"ngIf"],["class","flex-1 flex flex-col items-center justify-center text-center text-gray-400",4,"ngIf"],[1,"mt-8","pt-6","border-t","border-gray-100"],[1,"text-sm","font-bold","text-gray-700","uppercase","tracking-wide","mb-4"],[1,"grid","grid-cols-2","sm:grid-cols-4","gap-3","mb-6"],["type","button",3,"click"],[1,"text-xs","font-bold"],["class","mb-6 animate-fade-in",4,"ngIf"],["placeholder","Observaciones...","rows","2",1,"w-full","rounded-xl","border-2","border-gray-200","py-2","px-4","text-sm","focus:border-blue-500","outline-none","resize-none",3,"ngModelChange","ngModel"],[1,"bg-gray-50","px-6","py-4","flex","gap-3","border-t","border-gray-200","shrink-0"],["type","button",1,"flex-1","py-3","bg-white","border-2","border-gray-300","text-gray-700","font-bold","rounded-xl","hover:bg-gray-50","transition-all",3,"click","disabled"],["type","button",1,"flex-1","py-3","bg-blue-600","text-white","font-bold","rounded-xl","shadow-lg","shadow-blue-200","hover:bg-blue-700","transition-all","disabled:opacity-50","disabled:shadow-none",3,"click","disabled"],[1,"flex-1","grid","grid-cols-3","gap-3","content-start","overflow-y-auto","pr-1","custom-scrollbar","max-h-[300px]"],[3,"class","click",4,"ngFor","ngForOf"],[1,"flex-1","flex","flex-col","items-center","justify-center","text-center","text-gray-400"],[1,"w-12","h-12","mb-3","opacity-20",3,"img"],[1,"text-sm","font-medium","px-4","leading-relaxed"],[1,"mb-6","animate-fade-in"],["type","text","placeholder","Pegar enlace de la imagen...",1,"w-full","rounded-xl","border-2","border-gray-200","py-3","px-4","text-sm","focus:border-blue-500","focus:ring-2","focus:ring-blue-200","transition-all","outline-none",3,"ngModelChange","ngModel"],[1,"bg-white","rounded-2xl","shadow-2xl","w-full","max-w-2xl","max-h-[90vh]","flex","flex-col","relative","z-10","overflow-hidden","animate-fade-in-up"],[1,"text-white","text-opacity-90","text-sm"],[1,"p-6","overflow-y-auto","custom-scrollbar","flex-1","bg-white"],["class","space-y-6",4,"ngIf"],["class","text-center py-8",4,"ngIf"],["class","bg-gray-50 px-6 py-4 flex flex-col-reverse sm:flex-row gap-3 border-t border-gray-200 shrink-0",4,"ngIf"],[1,"space-y-6"],[1,"bg-blue-50","rounded-xl","p-4","border","border-blue-100","flex","items-center","gap-4"],[1,"bg-white","p-2","rounded-full","shadow-sm","text-blue-600"],[1,"w-6","h-6",3,"img"],[1,"text-lg","font-bold","text-gray-900","leading-tight"],[1,"text-sm","text-blue-600","font-medium"],[1,"grid","grid-cols-2","gap-x-8","gap-y-6"],[1,"block","text-xs","font-bold","text-gray-400","uppercase","mb-1"],[1,"text-sm","font-bold","text-gray-800"],[1,"col-span-2","border-t","border-gray-100"],[1,"text-sm","font-bold","text-gray-800","capitalize"],[1,"grid","grid-cols-2","gap-4","mb-6"],[1,"col-span-1"],["class","bg-gray-50 p-4 rounded-xl border border-gray-200 mb-6",4,"ngIf"],["class","bg-gray-50 p-4 rounded-xl border border-gray-200",4,"ngIf"],[1,"w-full","py-3","bg-green-600","text-white","font-bold","rounded-xl","hover:bg-green-700","shadow-md","transition-all","flex","items-center","justify-center","gap-2",3,"click"],[1,"text-xs","text-gray-500","text-center","mt-2"],[1,"bg-gray-50","p-4","rounded-xl","border","border-gray-200","mb-6"],[1,"block","text-xs","font-bold","text-gray-400","uppercase","mb-2"],[1,"relative","group","cursor-pointer","overflow-hidden","rounded-lg","border","border-gray-200"],["alt","Comprobante",1,"w-full","h-auto","max-h-[200px]","object-cover","hover:scale-105","transition-transform",3,"src"],["target","_blank",1,"absolute","inset-0","bg-black/50","opacity-0","group-hover:opacity-100","flex","items-center","justify-center","transition-opacity","z-10","w-full","h-full",3,"href"],[1,"text-white","text-xs","font-bold","flex","items-center","gap-2"],[1,"w-4","h-4",3,"img"],[1,"bg-gray-50","p-4","rounded-xl","border","border-gray-200"],[1,"text-sm","text-gray-600","italic"],[1,"bg-yellow-50","border-l-4","border-yellow-400","p-4"],[1,"text-sm","text-yellow-800","font-medium"],[1,"space-y-4"],[1,"block","text-xs","font-bold","text-gray-600","uppercase","mb-2"],["type","date",1,"w-full","rounded-xl","border-gray-300","shadow-sm","focus:border-blue-500","focus:ring-blue-500",3,"ngModelChange","ngModel"],[1,"grid","grid-cols-2","gap-4"],[1,"w-full","py-2","px-3","bg-gray-100","rounded-lg","text-gray-500","text-sm","font-bold"],[1,"w-full","rounded-xl","border-gray-300","shadow-sm","focus:border-blue-500","focus:ring-blue-500",3,"ngModelChange","ngModel"],[1,"grid","grid-cols-4","gap-2","max-h-40","overflow-y-auto","custom-scrollbar"],[1,"text-center","py-8"],[1,"w-16","h-16","bg-red-100","text-red-600","rounded-full","flex","items-center","justify-center","mx-auto","mb-4"],[1,"w-8","h-8",3,"img"],[1,"text-xl","font-bold","text-gray-900","mb-2"],[1,"text-gray-600","text-sm","mb-8","px-8"],[1,"flex","gap-4"],[1,"flex-1","py-3","bg-gray-100","text-gray-700","font-bold","rounded-xl","hover:bg-gray-200",3,"click"],[1,"flex-1","py-3","bg-red-600","text-white","font-bold","rounded-xl","hover:bg-red-700","shadow-lg","shadow-red-200",3,"click"],[1,"bg-gray-50","px-6","py-4","flex","flex-col-reverse","sm:flex-row","gap-3","border-t","border-gray-200","shrink-0"],[1,"flex-1","py-3","bg-white","border","border-gray-300","text-gray-700","font-bold","rounded-xl","hover:bg-gray-50",3,"click"],[1,"flex","flex-1","gap-2"],["class","flex-1 py-3 bg-red-100 text-red-700 font-bold rounded-xl hover:bg-red-200",3,"click",4,"ngIf"],["class","flex-1 py-3 bg-blue-600 text-white font-bold rounded-xl shadow-lg shadow-blue-200 hover:bg-blue-700",3,"click",4,"ngIf"],["class","flex-1 py-3 bg-green-600 text-white font-bold rounded-xl shadow-lg shadow-green-200 hover:bg-green-700 disabled:opacity-50",3,"disabled","click",4,"ngIf"],[1,"flex-1","py-3","bg-red-100","text-red-700","font-bold","rounded-xl","hover:bg-red-200",3,"click"],[1,"flex-1","py-3","bg-blue-600","text-white","font-bold","rounded-xl","shadow-lg","shadow-blue-200","hover:bg-blue-700",3,"click"],[1,"flex-1","py-3","bg-green-600","text-white","font-bold","rounded-xl","shadow-lg","shadow-green-200","hover:bg-green-700","disabled:opacity-50",3,"click","disabled"]],template:function(e,i){e&1&&(a(0,"div",0)(1,"div",1)(2,"div")(3,"h1",2),d(4,"Agenda de citas"),l(),a(5,"p",3),d(6,"Gestiona los turnos y citas m\xE9dicas globales."),l()(),a(7,"div",4)(8,"div",5)(9,"select",6),m("ngModelChange",function(p){return i.selectedSpecialtyId.set(p)}),a(10,"option",7),d(11,"Todas las especialidades"),l(),_(12,De,2,2,"option",8),l(),a(13,"div",9),y(14,"lucide-icon",10),l()(),a(15,"button",11),m("click",function(){return i.openGenericBooking()}),y(16,"lucide-icon",12),d(17," Nueva cita "),l(),a(18,"div",13)(19,"button",14),m("click",function(){return i.changeWeek(-1)}),y(20,"lucide-icon",12),l(),a(21,"div",15),_(22,Me,5,5,"ng-container",16)(23,Ee,4,3,"ng-container",16),l(),a(24,"button",14),m("click",function(){return i.changeWeek(1)}),y(25,"lucide-icon",12),l()()()(),a(26,"div",17)(27,"div",18)(28,"div",19)(29,"button",20),m("click",function(){return i.toggleView("day")}),d(30," D\xEDa "),l(),a(31,"button",20),m("click",function(){return i.toggleView("week")}),d(32," Semana "),l()()(),a(33,"div",21)(34,"div",22)(35,"div",23),d(36," Hora "),l(),_(37,Te,2,1,"ng-container",16)(38,Pe,4,1,"ng-container",16),l(),a(39,"div",5),_(40,lt,5,5,"div",24),l()()()(),_(41,ft,84,34,"div",25)(42,kt,16,7,"div",25)),e&2&&(r(9),s("ngModel",i.selectedSpecialtyId()),r(3),s("ngForOf",i.specialties()),r(2),s("img",i.icons.ChevronRight),r(2),s("img",i.icons.Plus),r(4),s("img",i.icons.ChevronLeft),r(2),s("ngIf",i.viewMode()==="week"),r(),s("ngIf",i.viewMode()==="day"),r(2),s("img",i.icons.ChevronRight),r(4),w("px-4 py-1.5 text-sm font-bold rounded-md transition-all "+(i.viewMode()==="day"?"bg-white text-blue-600 shadow-sm":"text-gray-600 hover:text-gray-800")),r(2),w("px-4 py-1.5 text-sm font-bold rounded-md transition-all "+(i.viewMode()==="week"?"bg-white text-blue-600 shadow-sm":"text-gray-600 hover:text-gray-800")),r(3),w(i.viewMode()==="week"?"grid-cols-8":"grid-cols-[auto_1fr]"),r(3),s("ngIf",i.viewMode()==="week"),r(),s("ngIf",i.viewMode()==="day"),r(2),s("ngForOf",i.timeSlots()),r(),s("ngIf",i.isModalOpen),r(),s("ngIf",i.isDetailsModalOpen))},dependencies:[Q,Y,q,J,ve,xe,fe,me,ue,_e,ge,ce,se,K],styles:[".custom-scrollbar[_ngcontent-%COMP%]::-webkit-scrollbar{width:6px}.custom-scrollbar[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#f1f5f9;border-radius:10px}.custom-scrollbar[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#cbd5e1;border-radius:10px}.custom-scrollbar[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:#94a3b8}.scale-102[_ngcontent-%COMP%]{transform:scale(1.02)}"]})};export{Ie as AppointmentsCalendarComponent};
