import{a as ye}from"./chunk-JUXHH7AY.js";import{a as Ce}from"./chunk-Z2SEGAVW.js";import{a as he}from"./chunk-AIRRNDN5.js";import{a as Se}from"./chunk-WGKWTJVN.js";import{a as be}from"./chunk-E2DB3U2O.js";import{b as pe,c as me,f as _e,i as ge,j as ue,k as xe,o as fe}from"./chunk-TOTPKQWX.js";import{a as ve}from"./chunk-PGBLF2PH.js";import{a as ce}from"./chunk-MZ3EZVY4.js";import{$ as u,$a as d,Aa as o,Ad as de,Bd as se,Fc as X,Gb as z,Hb as U,Ic as Z,Jc as ee,Lc as te,Mc as ne,Ob as T,Oc as ie,Qa as H,Qc as oe,R,Ua as _,W as k,a as $,aa as x,ab as a,b as L,bb as r,cb as f,db as D,dc as G,eb as M,ec as W,fc as Y,gb as w,hb as m,hc as q,ia as S,ib as c,jc as J,jd as ae,md as re,rc as K,sb as b,sc as Q,tb as s,ub as g,vb as A,wb as O,wd as le,xb as B}from"./chunk-ILFQ2RSF.js";var j=class n{http=k(Q);apiUrl=`${ce.apiUrl}/appointments`;appointments=S([]);constructor(){this.refreshAppointments()}refreshAppointments(t){let e=new K;t?.doctorId&&(e=e.set("doctorId",t.doctorId)),t?.date&&(e=e.set("date",t.date)),this.http.get(this.apiUrl,{params:e}).subscribe(i=>{this.appointments.set(i)})}getAppointments(){return this.appointments()}getAppointmentsForDateRange(t,e,i){return this.appointments()}addAppointment(t){this.http.post(this.apiUrl,t).subscribe(e=>{this.appointments.update(i=>[...i,e])})}updatestatus(t,e){this.http.put(`${this.apiUrl}/${t}/status`,{status:e}).subscribe(i=>{this.appointments.update(l=>l.map(p=>p.appointmentId===t?i:p))})}cancelAppointment(t){this.updatestatus(t,"CANCELLED")}static \u0275fac=function(e){return new(e||n)};static \u0275prov=R({token:n,factory:n.\u0275fac,providedIn:"root"})};function Ae(n,t){if(n&1&&(a(0,"option",28),s(1),r()),n&2){let e=t.$implicit;d("value",e.specialtyId),o(),g(e.name)}}function Ee(n,t){if(n&1&&(a(0,"div",30)(1,"p",31),s(2),r(),a(3,"div",32)(4,"span",33),s(5),r(),a(6,"span",34),s(7),r()()()),n&2){let e=t.$implicit;o(2),g(e.dayName),o(3),g(e.dayNum),o(2),g(e.monthName)}}function De(n,t){if(n&1&&(D(0),_(1,Ee,8,3,"div",29),M()),n&2){let e=c();o(),d("ngForOf",e.weekDays())}}function Me(n,t){if(n&1&&(D(0),a(1,"div",35)(2,"p",36),s(3),r()(),M()),n&2){let e=c();o(3),g(e.currentDateStr())}}function ke(n,t){n&1&&f(0,"div",43)}function Te(n,t){if(n&1&&(D(0),a(1,"span"),s(2),r(),a(3,"span",50),s(4),r(),M()),n&2){let e=c(2).$implicit,i=c(5);o(),b(e.isPast?"text-[9px] font-medium truncate w-full text-center":"text-[9px] font-medium text-blue-600 truncate w-full text-center"),o(),g(e.doctorName),o(2),g(i.getSpecialtyName(e.specialtyId))}}function Ne(n,t){if(n&1&&f(0,"lucide-icon",51),n&2){let e=c(7);d("img",e.icons.Plus)}}function Pe(n,t){if(n&1){let e=w();a(0,"button",46),m("click",function(){u(e);let l=c().$implicit,p=c(2).$implicit,y=c(2).$implicit,v=c();return x(!l.isPast&&v.openBookingModal(p.iso,y))}),_(1,Te,5,4,"ng-container",25)(2,Ne,1,1,"lucide-icon",47),a(3,"div",48)(4,"div"),s(5),r(),a(6,"div",49),s(7),r()()()}if(n&2){let e=c().$implicit,i=c().ngIf,l=c(4);d("disabled",e.isPast)("ngClass",(i.length>=3?"w-8 h-8 p-0 justify-center ":"w-full min-h-[30px] p-0.5 ")+(e.isPast?"opacity-100 cursor-not-allowed bg-gray-200 border-gray-300 border-dashed text-gray-500":"cursor-pointer hover:bg-blue-100 hover:border-solid hover:shadow-md bg-blue-50 border-blue-200 border-dashed")),o(),d("ngIf",i.length<3),o(),d("ngIf",i.length>=3),o(3),g(e.doctorName),o(2),g(l.getSpecialtyName(e.specialtyId))}}function Ve(n,t){if(n&1&&(D(0),a(1,"div",56),s(2),r(),a(3,"div",57),s(4),r(),M()),n&2){let e=c(2).$implicit,i=c(5);o(2),g(e.appointment.patientName),o(2),g(i.getDoctorName(e.appointment.doctorId))}}function Fe(n,t){if(n&1&&f(0,"lucide-icon",62),n&2){let e=c(8);d("img",e.icons.CheckCircle)}}function Oe(n,t){if(n&1&&f(0,"lucide-icon",63),n&2){let e=c(8);d("img",e.icons.HelpCircle)}}function je(n,t){if(n&1&&(a(0,"div",64),s(1),r()),n&2){let e=c(3).$implicit;o(),A(" ",e.appointment.patientName.charAt(0)," ")}}function $e(n,t){if(n&1&&(a(0,"div",58),_(1,Fe,1,1,"lucide-icon",59)(2,Oe,1,1,"lucide-icon",60)(3,je,2,1,"div",61),r()),n&2){let e=c(2).$implicit;o(),d("ngIf",e.appointment.paymentStatus==="PAID"),o(),d("ngIf",e.appointment.status==="CONFIRMED"&&e.appointment.paymentStatus==="PENDING"),o(),d("ngIf",e.appointment.paymentStatus!=="PAID"&&!(e.appointment.status==="CONFIRMED"&&e.appointment.paymentStatus==="PENDING"))}}function Le(n,t){if(n&1){let e=w();a(0,"button",52),m("click",function(l){u(e);let p=c().$implicit;return c(5).openAppointmentDetails(p.appointment),x(l.stopPropagation())}),_(1,Ve,5,2,"ng-container",25)(2,$e,4,3,"div",53),a(3,"div",54)(4,"div",55),s(5),r(),a(6,"div"),s(7),r(),a(8,"div",49),s(9),r()()()}if(n&2){let e=c().$implicit,i=c().ngIf,l=c(4);b("rounded border-l-4 shadow-sm cursor-pointer hover:shadow-md transition-all relative group flex flex-col justify-center "+l.getAppointmentColorClass(e.appointment)),d("ngClass",i.length>=3?"w-8 h-8 p-0 justify-center items-center":"w-full min-h-[40px] p-1.5 text-left"),o(),d("ngIf",i.length<3),o(),d("ngIf",i.length>=3),o(3),g(e.appointment.patientName),o(2),g(l.getDoctorName(e.appointment.doctorId)),o(2),g(l.getAppointmentStatusLabel(e.appointment))}}function Re(n,t){if(n&1&&(D(0),_(1,Pe,8,6,"button",44)(2,Le,10,8,"button",45),M()),n&2){let e=t.$implicit;o(),d("ngIf",e.type==="available"),o(),d("ngIf",e.type==="booked")}}function He(n,t){if(n&1&&(D(0),_(1,ke,1,0,"div",40),a(2,"div",41),_(3,Re,3,2,"ng-container",42),r(),M()),n&2){let e=t.ngIf;o(),d("ngIf",e.length===0),o(),d("ngClass",e.length>=3?"flex flex-row flex-wrap content-start gap-1 p-1":"flex flex-col gap-1"),o(),d("ngForOf",e)}}function Be(n,t){if(n&1&&(a(0,"div"),_(1,He,4,3,"ng-container",25),r()),n&2){let e=t.$implicit,i=t.index,l=c(2).$implicit,p=c();b((!p.isWorkingDay(i)||p.isPastDate(e.iso)?"bg-gray-100/70 ":"")+"border-r border-gray-100 last:border-r-0 relative p-1 min-h-[3.5rem]"),o(),d("ngIf",p.getSlotStatus(e.iso,l,i))}}function ze(n,t){if(n&1&&(D(0),_(1,Be,2,3,"div",39),M()),n&2){let e=c(2);o(),d("ngForOf",e.weekDays())}}function Ue(n,t){n&1&&f(0,"div",67)}function Ge(n,t){if(n&1&&(a(0,"div",73)(1,"div",74),s(2),r(),a(3,"div",75),s(4),r()()),n&2){let e=c(2).$implicit,i=c(4);o(2),A(" ",e.doctorName),o(2),g(i.getSpecialtyName(e.specialtyId))}}function We(n,t){if(n&1&&(a(0,"div",76),f(1,"lucide-icon",77),r()),n&2){let e=c(6);o(),d("img",e.icons.Plus)}}function Ye(n,t){if(n&1&&f(0,"lucide-icon",51),n&2){let e=c(6);d("img",e.icons.Plus)}}function qe(n,t){if(n&1){let e=w();a(0,"button",69),m("click",function(){u(e);let l=c(4).$implicit,p=c();return x(p.openBookingModal(p.currentDate().toISOString().split("T")[0],l))}),_(1,Ge,5,2,"div",70)(2,We,2,1,"div",71)(3,Ye,1,1,"lucide-icon",47),a(4,"div",72)(5,"div"),s(6),r(),a(7,"div",49),s(8),r()()()}if(n&2){let e=c().$implicit,i=c().ngIf,l=c(3);d("ngClass",i.length>=3?"w-8 h-8 p-0 justify-center":"flex-1 p-2 justify-between min-w-[140px]"),o(),d("ngIf",i.length<3),o(),d("ngIf",i.length<3),o(),d("ngIf",i.length>=3),o(3),g(e.doctorName),o(2),g(l.getSpecialtyName(e.specialtyId))}}function Je(n,t){if(n&1&&(a(0,"div",80)(1,"div",81),s(2),r(),a(3,"div",82),s(4),r()()),n&2){let e=c(2).$implicit,i=c(4);o(2),g(e.appointment.patientName),o(2),g(i.getDoctorName(e.appointment.doctorId))}}function Ke(n,t){if(n&1&&f(0,"lucide-icon",62),n&2){let e=c(7);d("img",e.icons.CheckCircle)}}function Qe(n,t){if(n&1&&f(0,"lucide-icon",63),n&2){let e=c(7);d("img",e.icons.HelpCircle)}}function Xe(n,t){if(n&1&&(a(0,"div",84),s(1),r()),n&2){let e,i=c(3).$implicit;o(),O(" ",i.appointment.patientName.charAt(0),"",((e=i.appointment.patientName.split(" ")[1])==null?null:e.charAt(0))||""," ")}}function Ze(n,t){if(n&1&&(a(0,"div",58),_(1,Ke,1,1,"lucide-icon",59)(2,Qe,1,1,"lucide-icon",60)(3,Xe,2,2,"div",83),r()),n&2){let e=c(2).$implicit;o(),d("ngIf",e.appointment.paymentStatus==="PAID"),o(),d("ngIf",e.appointment.status==="CONFIRMED"&&e.appointment.paymentStatus==="PENDING"),o(),d("ngIf",e.appointment.paymentStatus!=="PAID"&&!(e.appointment.status==="CONFIRMED"&&e.appointment.paymentStatus==="PENDING"))}}function et(n,t){if(n&1){let e=w();a(0,"div",52),m("click",function(){u(e);let l=c().$implicit,p=c(4);return x(p.openAppointmentDetails(l.appointment))}),_(1,Je,5,2,"div",78)(2,Ze,4,3,"div",53),a(3,"div",79)(4,"div",55),s(5),r(),a(6,"div"),s(7),r(),a(8,"div",49),s(9),r()()()}if(n&2){let e=c().$implicit,i=c().ngIf,l=c(3);b("rounded-lg border-l-4 shadow-sm cursor-pointer hover:shadow hover:scale-[1.01] transition-all relative group/card flex items-center "+l.getAppointmentColorClass(e.appointment)),d("ngClass",i.length>=3?"w-8 h-8 p-0 justify-center":"flex-1 p-2 min-w-[140px]"),o(),d("ngIf",i.length<3),o(),d("ngIf",i.length>=3),o(3),g(e.appointment.patientName),o(2),g(l.getDoctorName(e.appointment.doctorId)),o(2),g(l.getAppointmentStatusLabel(e.appointment))}}function tt(n,t){if(n&1&&(D(0),_(1,qe,9,6,"button",68)(2,et,10,8,"div",45),M()),n&2){let e=t.$implicit;o(),d("ngIf",e.type==="available"),o(),d("ngIf",e.type==="booked")}}function nt(n,t){if(n&1&&(D(0),_(1,Ue,1,0,"div",66),a(2,"div",41),_(3,tt,3,2,"ng-container",42),r(),M()),n&2){let e=t.ngIf;o(),d("ngIf",e.length===0),o(),d("ngClass",e.length>=3?"flex flex-wrap content-start gap-1 p-1":"flex gap-2"),o(),d("ngForOf",e)}}function it(n,t){if(n&1&&(D(0),a(1,"div",65),_(2,nt,4,3,"ng-container",25),r(),M()),n&2){let e=c().$implicit,i=c();o(2),d("ngIf",i.getSlotStatus(i.currentDate().toISOString().split("T")[0],e,0))}}function ot(n,t){if(n&1&&(a(0,"div",37)(1,"div",38),s(2),r(),_(3,ze,2,1,"ng-container",25)(4,it,3,1,"ng-container",25),r()),n&2){let e=t.$implicit,i=c();b((i.viewMode()==="week"?"grid-cols-8":"grid-cols-[auto_1fr]")+(i.isBreakTime(e)?" bg-gray-100":"")),o(2),A(" ",e," "),o(),d("ngIf",i.viewMode()==="week"),o(),d("ngIf",i.viewMode()==="day")}}function at(n,t){if(n&1&&(a(0,"option",28),s(1),r()),n&2){let e=t.$implicit;d("value",e.specialtyId),o(),g(e.name)}}function rt(n,t){if(n&1&&(a(0,"option",28),s(1),r()),n&2){let e=t.$implicit;d("value",e.id),o(),A("",e.fullName," ")}}function lt(n,t){if(n&1&&(a(0,"option",28),s(1),r()),n&2){let e=t.$implicit;d("value",e.patientId),o(),O("",e.fullName," (",e.dni,") ")}}function dt(n,t){if(n&1){let e=w();a(0,"button",21),m("click",function(){let l=u(e).$implicit,p=c(3);return x(p.modalTime.set(l))}),s(1),r()}if(n&2){let e=t.$implicit,i=c(3);b("py-3 px-2 text-sm font-bold rounded-xl border-2 transition-all duration-200 "+(i.modalTime()===e?"bg-blue-600 border-blue-600 text-white shadow-lg shadow-blue-200 scale-105":"bg-white border-gray-200 text-gray-700 hover:border-blue-400 hover:shadow-md hover:scale-102")),o(),A(" ",e," ")}}function st(n,t){if(n&1&&(a(0,"div",119),_(1,dt,2,3,"button",120),r()),n&2){let e=c(2);o(),d("ngForOf",e.availableSlotsForModal())}}function ct(n,t){if(n&1&&(a(0,"div",121),f(1,"lucide-icon",122),a(2,"p",123),s(3,"Selecciona m\xE9dico y fecha para ver disponibilidad "),r()()),n&2){let e=c(2);o(),d("img",e.icons.Clock)}}function pt(n,t){if(n&1){let e=w();a(0,"div",85)(1,"div",86)(2,"div",87)(3,"div",88)(4,"div")(5,"h2",89),s(6,"Agendar nueva cita"),r(),a(7,"p",90),s(8,"Selecciona los detalles de tu consulta"),r()(),a(9,"button",91),m("click",function(){u(e);let l=c();return x(l.closeModal())}),f(10,"lucide-icon",92),r()()(),a(11,"div",93)(12,"div",94)(13,"div",95)(14,"div")(15,"h3",96),s(16,"Detalles de la cita"),r(),a(17,"p",97),s(18,"Selecciona los detalles de tu consulta"),r()(),a(19,"div")(20,"label",98),s(21," Especialidad "),r(),a(22,"select",99),m("ngModelChange",function(l){u(e);let p=c();return p.modalSpecialtyId.set(l),x(p.modalDoctorId.set(""))}),a(23,"option",100),s(24,"Seleccionar especialidad"),r(),_(25,at,2,2,"option",8),r()(),a(26,"div")(27,"label",98),s(28," M\xE9dico "),r(),a(29,"select",101),m("ngModelChange",function(l){u(e);let p=c();return x(p.modalDoctorId.set(l))}),a(30,"option",100),s(31,"Seleccionar m\xE9dico"),r(),_(32,rt,2,2,"option",8),r()(),a(33,"div")(34,"label",98),s(35," Fecha "),r(),a(36,"input",102),m("ngModelChange",function(l){u(e);let p=c();return x(p.modalDate.set(l))}),r()(),a(37,"div")(38,"label",98),s(39," Seleccionar paciente "),r(),a(40,"select",99),m("ngModelChange",function(l){u(e);let p=c();return x(p.modalPatientId.set(l))}),a(41,"option",100),s(42,"Seleccionar paciente"),r(),_(43,lt,2,3,"option",8),r()()(),a(44,"div",103)(45,"h3",104),s(46," Horarios disponibles "),r(),a(47,"p",105),s(48,"Elige una hora disponible"),r(),_(49,st,2,1,"div",106)(50,ct,4,1,"div",107),r()(),a(51,"div",108)(52,"h3",109),s(53,"M\xE9todo de pago"),r(),a(54,"div",110)(55,"button",111),m("click",function(){u(e);let l=c();return x(l.modalPaymentMethod.set("CASH"))}),f(56,"lucide-icon",112),a(57,"span"),s(58," Efectivo "),r(),a(59,"span",113),s(60,"En cl\xEDnica"),r()(),a(61,"button",111),m("click",function(){u(e);let l=c();return x(l.modalPaymentMethod.set("YAPE"))}),f(62,"lucide-icon",112),a(63,"span"),s(64," Yape "),r()(),a(65,"button",111),m("click",function(){u(e);let l=c();return x(l.modalPaymentMethod.set("PLIN"))}),f(66,"lucide-icon",112),a(67,"span"),s(68," Plin "),r()(),a(69,"button",111),m("click",function(){u(e);let l=c();return x(l.modalPaymentMethod.set("CARD"))}),f(70,"lucide-icon",112),a(71,"span"),s(72," Tarjeta "),r()()(),a(73,"div")(74,"label",98),s(75," Notas adicionales "),r(),a(76,"textarea",114),m("ngModelChange",function(l){u(e);let p=c();return x(p.modalNotes.set(l))}),r()()()(),a(77,"div",115)(78,"button",116),m("click",function(){u(e);let l=c();return x(l.closeModal())}),f(79,"lucide-icon",117),s(80," Cancelar "),r(),a(81,"button",118),m("click",function(){u(e);let l=c();return x(l.saveAppointment())}),f(82,"lucide-icon",12),s(83," Confirmar cita "),r()()()()}if(n&2){let e=c();o(10),d("img",e.icons.AlertCircle),o(12),d("ngModel",e.modalSpecialtyId()),o(3),d("ngForOf",e.specialties()),o(4),d("ngModel",e.modalDoctorId())("disabled",!e.modalSpecialtyId()),o(3),d("ngForOf",e.filteredDoctorsForModal()),o(4),d("ngModel",e.modalDate()),o(4),d("ngModel",e.modalPatientId()),o(3),d("ngForOf",e.patients()),o(6),d("ngIf",e.availableSlotsForModal().length>0),o(),d("ngIf",e.availableSlotsForModal().length===0),o(5),b("relative flex flex-col items-center justify-center p-4 rounded-xl border-2 transition-all "+(e.modalPaymentMethod()==="CASH"?"border-blue-600 bg-blue-50 shadow-md":"border-gray-200 bg-white hover:border-blue-300")),o(),b(e.modalPaymentMethod()==="CASH"?"text-blue-600":"text-gray-400"),d("img",e.icons.User),o(),b("text-xs font-bold "+(e.modalPaymentMethod()==="CASH"?"text-blue-600":"text-gray-600")),o(4),b("relative flex flex-col items-center justify-center p-4 rounded-xl border-2 transition-all "+(e.modalPaymentMethod()==="YAPE"?"border-blue-600 bg-blue-50 shadow-md":"border-gray-200 bg-white hover:border-blue-300")),o(),b(e.modalPaymentMethod()==="YAPE"?"text-blue-600":"text-gray-400"),d("img",e.icons.User),o(),b("text-xs font-bold "+(e.modalPaymentMethod()==="YAPE"?"text-blue-600":"text-gray-600")),o(2),b("relative flex flex-col items-center justify-center p-4 rounded-xl border-2 transition-all "+(e.modalPaymentMethod()==="PLIN"?"border-blue-600 bg-blue-50 shadow-md":"border-gray-200 bg-white hover:border-blue-300")),o(),b(e.modalPaymentMethod()==="PLIN"?"text-blue-600":"text-gray-400"),d("img",e.icons.User),o(),b("text-xs font-bold "+(e.modalPaymentMethod()==="PLIN"?"text-blue-600":"text-gray-600")),o(2),b("relative flex flex-col items-center justify-center p-4 rounded-xl border-2 transition-all "+(e.modalPaymentMethod()==="CARD"?"border-blue-600 bg-blue-50 shadow-md":"border-gray-200 bg-white hover:border-blue-300")),o(),b(e.modalPaymentMethod()==="CARD"?"text-blue-600":"text-gray-400"),d("img",e.icons.User),o(),b("text-xs font-bold "+(e.modalPaymentMethod()==="CARD"?"text-blue-600":"text-gray-600")),o(5),d("ngModel",e.modalNotes()),o(3),d("img",e.icons.AlertCircle),o(2),d("disabled",!e.modalPatientId()||!e.modalTime()||!e.modalDoctorId()),o(),d("img",e.icons.CheckCircle)}}function mt(n,t){if(n&1&&(a(0,"div",138)(1,"label",135),s(2,"Notas"),r(),a(3,"p",139),s(4),r()()),n&2){let e=c(3);o(4),g(e.selectedAppointment.notes)}}function _t(n,t){if(n&1&&(a(0,"div",93)(1,"div",130)(2,"div",131),f(3,"lucide-icon",132),a(4,"div")(5,"h3",33),s(6),r(),a(7,"p",133),s(8,"Paciente"),r()()()(),a(9,"div",134)(10,"div")(11,"label",135),s(12,"M\xE9dico"),r(),a(13,"p",136),s(14),r()(),a(15,"div")(16,"label",135),s(17,"Especialidad"),r(),a(18,"p",136),s(19),r()(),a(20,"div")(21,"label",135),s(22,"Fecha"),r(),a(23,"p",136),s(24),r()(),a(25,"div")(26,"label",135),s(27,"Horario"),r(),a(28,"p",136),s(29),r()(),a(30,"div")(31,"label",135),s(32,"Estado"),r(),a(33,"span"),s(34),r()(),a(35,"div")(36,"label",135),s(37,"M\xE9todo de pago"),r(),a(38,"p",136),s(39),r()()(),_(40,mt,5,1,"div",137),r()),n&2){let e=c(2);o(3),d("img",e.icons.User),o(3),g(e.selectedAppointment.patientName),o(8),g(e.getDoctorName(e.selectedAppointment.doctorId)),o(5),A("",e.getSpecialtyName(e.selectedAppointment.specialtyId)," "),o(5),g(e.selectedAppointment.appointmentDate),o(5),O("",e.selectedAppointment.startTime," - ",e.selectedAppointment.endTime),o(4),b("inline-block px-3 py-1 rounded-full text-xs font-bold "+(e.selectedAppointment.status==="CONFIRMED"?"bg-green-100 text-green-700":e.selectedAppointment.status==="COMPLETED"?"bg-blue-100 text-blue-700":e.selectedAppointment.status==="CANCELLED"?"bg-red-100 text-red-700":"bg-yellow-100 text-yellow-700")),o(),A(" ",e.selectedAppointment.status," "),o(5),g(e.selectedAppointment.paymentMethod||"N/A"),o(),d("ngIf",e.selectedAppointment.notes)}}function gt(n,t){if(n&1&&(a(0,"option",28),s(1),r()),n&2){let e=t.$implicit;d("value",e.id),o(),A(" ",e.fullName," ")}}function ut(n,t){if(n&1){let e=w();a(0,"button",21),m("click",function(){let l=u(e).$implicit,p=c(3);return x(p.modalTime.set(l))}),s(1),r()}if(n&2){let e=t.$implicit,i=c(3);b("py-2 px-2 text-sm font-bold rounded-lg border-2 transition-all "+(i.modalTime()===e?"bg-blue-600 border-blue-600 text-white":"bg-white border-gray-200 text-gray-700 hover:border-blue-400")),o(),A(" ",e," ")}}function xt(n,t){if(n&1){let e=w();a(0,"div",93)(1,"div",95)(2,"div",140)(3,"p",141),s(4," Solo puedes cambiar el m\xE9dico y el horario para esta especialidad. "),r()(),a(5,"div",142)(6,"div")(7,"label",98),s(8,"Especialidad"),r(),a(9,"div",143),s(10),r()(),a(11,"div")(12,"label",98),s(13,"M\xE9dico"),r(),a(14,"select",144),m("ngModelChange",function(l){u(e);let p=c(2);return x(p.modalDoctorId.set(l))}),_(15,gt,2,2,"option",8),r()()(),a(16,"div")(17,"label",98),s(18,"Nueva fecha"),r(),a(19,"input",102),m("ngModelChange",function(l){u(e);let p=c(2);return x(p.modalDate.set(l))}),r()(),a(20,"div")(21,"label",98),s(22,"Nuevo horario"),r(),a(23,"div",145),_(24,ut,2,3,"button",120),r()()()()}if(n&2){let e=c(2);o(10),A(" ",e.getSpecialtyName(e.modalSpecialtyId())," "),o(4),d("ngModel",e.modalDoctorId()),o(),d("ngForOf",e.doctorsInCurrentSpecialty()),o(4),d("ngModel",e.modalDate()),o(5),d("ngForOf",e.availableSlotsForModal())}}function ft(n,t){if(n&1){let e=w();a(0,"div",146)(1,"div",147),f(2,"lucide-icon",148),r(),a(3,"h3",149),s(4,"\xBFConfirmar cancelaci\xF3n?"),r(),a(5,"p",150),s(6),r(),a(7,"div",151)(8,"button",152),m("click",function(){u(e);let l=c(2);return x(l.cancelCancelConfirmation())}),s(9," No, mantener cita "),r(),a(10,"button",153),m("click",function(){u(e);let l=c(2);return x(l.confirmCancel())}),s(11," S\xED, cancelar cita "),r()()()}if(n&2){let e=c(2);o(2),d("img",e.icons.AlertCircle),o(4),A(" \xBFEst\xE1s seguro de que deseas cancelar la cita de **",e.selectedAppointment==null?null:e.selectedAppointment.patientName,"**? Esta acci\xF3n no se puede deshacer. ")}}function bt(n,t){if(n&1){let e=w();a(0,"button",158),m("click",function(){u(e);let l=c(3);return x(l.showCancelConfirmation())}),f(1,"lucide-icon",12),s(2," Cancelar cita "),r()}if(n&2){let e=c(3);o(),d("img",e.icons.AlertCircle)}}function vt(n,t){if(n&1){let e=w();a(0,"button",159),m("click",function(){u(e);let l=c(3);return x(l.startRescheduling())}),f(1,"lucide-icon",12),s(2," Reprogramar "),r()}if(n&2){let e=c(3);o(),d("img",e.icons.Calendar)}}function ht(n,t){if(n&1){let e=w();a(0,"button",160),m("click",function(){u(e);let l=c(3);return x(l.saveRescheduledAppointment())}),f(1,"lucide-icon",12),s(2," Guardar cambios "),r()}if(n&2){let e=c(3);d("disabled",!e.modalTime()||!e.modalDate()||!e.modalDoctorId()),o(),d("img",e.icons.CheckCircle)}}function yt(n,t){if(n&1){let e=w();a(0,"div",115)(1,"button",116),m("click",function(){u(e);let l=c(2);return x(l.closeDetailsModal())}),s(2," Cerrar "),r(),a(3,"div",154),_(4,bt,3,1,"button",155)(5,vt,3,1,"button",156)(6,ht,3,2,"button",157),r()()}if(n&2){let e=c(2);o(4),d("ngIf",!e.isRescheduling&&(e.selectedAppointment==null?null:e.selectedAppointment.status)!=="CANCELLED"),o(),d("ngIf",!e.isRescheduling&&(e.selectedAppointment==null?null:e.selectedAppointment.status)!=="CANCELLED"),o(),d("ngIf",e.isRescheduling)}}function Ct(n,t){if(n&1){let e=w();a(0,"div",85)(1,"div",124)(2,"div",125)(3,"div",88)(4,"div")(5,"h2",89),s(6,"Detalles de la cita"),r(),a(7,"p",126),s(8,"Informaci\xF3n completa de la consulta"),r()(),a(9,"button",91),m("click",function(){u(e);let l=c();return x(l.closeDetailsModal())}),f(10,"lucide-icon",92),r()()(),_(11,_t,41,12,"div",127)(12,xt,25,5,"div",127)(13,ft,12,2,"div",128)(14,yt,7,3,"div",129),r()()}if(n&2){let e=c();o(10),d("img",e.icons.AlertCircle),o(),d("ngIf",e.selectedAppointment&&!e.isRescheduling&&!e.isConfirmingCancel),o(),d("ngIf",e.isRescheduling),o(),d("ngIf",e.isConfirmingCancel),o(),d("ngIf",!e.isConfirmingCancel)}}var we=class n{appointmentsService=k(j);doctorService=k(ve);specialtyService=k(be);scheduleService=k(ye);patientsService=k(Se);doctorSpecialtyService=k(he);configService=k(Ce);icons={ChevronLeft:Z,ChevronRight:ee,Calendar:X,User:le,Clock:oe,Plus:ae,Search:re,AlertCircle:te,CheckCircle:ne,HelpCircle:ie};config=this.configService.settings;isWorkingDay(t){let e=(t+1)%7;return this.config().workingDays.includes(e)}isBreakTime(t){let e=this.config().breakStartTime,i=this.config().breakEndTime;return!e||!i?!1:t>=e&&t<i}viewMode=S("week");doctors=this.doctorService.doctors;specialties=this.specialtyService.specialties;patients=this.patientsService.patients;appointments=this.appointmentsService.appointments;selectedDoctorId=S("");selectedSpecialtyId=S("");constructor(){this.scheduleService.refreshSchedules()}currentDate=S(new Date);currentDateStr=T(()=>this.currentDate().toLocaleDateString("es-ES",{weekday:"long",year:"numeric",month:"long",day:"numeric"}));isModalOpen=!1;selectedSlot=null;modalPatientId=S("");modalSpecialtyId=S("");modalDoctorId=S("");modalDate=S(new Date().toISOString().split("T")[0]);modalTime=S("");modalNotes=S("");modalPaymentMethod=S("CASH");modalTransactionId=S("");isDetailsModalOpen=!1;selectedAppointment=null;isRescheduling=!1;isConfirmingCancel=!1;doctorsInCurrentSpecialty=T(()=>{let t=this.isRescheduling?this.modalSpecialtyId():this.selectedSpecialtyId();if(!t)return this.doctors();let i=this.doctorSpecialtyService.associations().filter(l=>l.specialtyId===t).map(l=>l.doctorId);return this.doctors().filter(l=>i.includes(l.id))});globalAppointments=T(()=>{let t=this.currentDate().toISOString().split("T")[0];return this.appointments().filter(e=>e.appointmentDate===t&&e.status!=="CANCELLED")});filteredDoctorsForModal=T(()=>{let t=this.modalSpecialtyId();if(!t)return[];let i=this.doctorSpecialtyService.associations().filter(l=>l.specialtyId===t).map(l=>l.doctorId);return this.doctors().filter(l=>i.includes(l.id))});availableSlotsForModal=T(()=>{let t=this.modalDoctorId(),e=this.modalSpecialtyId(),i=this.modalDate();if(!t||!e||!i)return[];let l=this.scheduleService.getSchedulesForDoctor(t,e),[p,y,v]=i.split("-").map(Number);return this.timeSlots().filter(h=>l.some(I=>I.date===i&&h>=I.startTime&&h<I.endTime)?!this.appointments().some(I=>I.doctorId===t&&I.appointmentDate===i&&I.startTime===h&&I.status!=="CANCELLED"):!1)});weekDays=T(()=>{let t=this.getStartOfWeek(this.currentDate()),e=[];for(let i=0;i<7;i++){let l=new Date(t);l.setDate(t.getDate()+i);let p=[l.getFullYear(),(l.getMonth()+1).toString().padStart(2,"0"),l.getDate().toString().padStart(2,"0")].join("-");e.push({date:l,iso:p,dayName:l.toLocaleDateString("es-ES",{weekday:"short"}).replace(".",""),dayNum:l.getDate(),monthName:l.toLocaleDateString("es-ES",{month:"short"}).replace(".","")})}return e});getMinutes(t){let[e,i]=t.split(":").map(Number);return e*60+i}formatMinutes(t){let e=Math.floor(t/60),i=t%60;return`${e.toString().padStart(2,"0")}:${i.toString().padStart(2,"0")}`}timeSlots=T(()=>{let t=30,e=this.selectedDoctorId(),i=this.selectedSpecialtyId();if(e&&i){let h=this.doctorSpecialtyService.associations().find(E=>E.doctorId===e&&E.specialtyId===i);h&&h.durationMinutes>0&&(t=h.durationMinutes)}let l=480,p=1200;if(e){let h=this.scheduleService.schedules().filter(E=>E.doctorId===e);if(i&&(h=h.filter(E=>E.specialtyId===i)),h.length>0){let E=h.map(C=>this.getMinutes(C.startTime)),N=h.map(C=>this.getMinutes(C.endTime)),I=Math.min(...E),P=Math.max(...N);l=I,p=P}}let y=[],v=l;for(;v+t<=p;)y.push(this.formatMinutes(v)),v+=t;return y});getStartOfWeek(t){let e=new Date(t),i=e.getDay(),l=e.getDate()-i+(i===0?-6:1);return new Date(e.setDate(l))}changeWeek(t){let e=new Date(this.currentDate());this.viewMode()==="week"?e.setDate(e.getDate()+t*7):e.setDate(e.getDate()+t),this.currentDate.set(e)}toggleView(t){this.viewMode.set(t)}isPastDate(t){let e=new Date;return e.setHours(0,0,0,0),new Date(t+"T00:00:00")<e}isPastTime(t,e){if(this.isPastDate(t))return!0;let i=new Date().toISOString().split("T")[0];if(t===i){let l=new Date,[p,y]=e.split(":").map(Number),v=new Date;return v.setHours(p,y,0,0),v<l}return!1}getSlotStatus(t,e,i){let l=[],p=this.isPastTime(t,e),y=this.selectedDoctorId()?[this.selectedDoctorId()]:this.doctorsInCurrentSpecialty().map(v=>v.doctorId||v.id);for(let v of y){let h=this.getDoctorName(v),E=this.appointments().find(C=>C.doctorId===v&&(!this.selectedSpecialtyId()||C.specialtyId===this.selectedSpecialtyId())&&C.appointmentDate===t&&C.startTime===e&&C.status!=="CANCELLED");if(E){l.push({type:"booked",appointment:E});continue}let N=!1,I="",P=C=>C.length>5?C.substring(0,5):C;if(this.selectedSpecialtyId())N=this.scheduleService.getSchedulesForDoctor(v,this.selectedSpecialtyId()).some(V=>V.date===t&&e>=P(V.startTime)&&e<P(V.endTime)),I=this.selectedSpecialtyId();else{let V=this.scheduleService.schedules().filter(F=>F.doctorId===v).find(F=>F.date===t&&e>=P(F.startTime)&&e<P(F.endTime));V&&(N=!0,I=V.specialtyId)}N&&l.push({type:"available",doctorId:v,doctorName:h,date:t,time:e,specialtyId:I,isPast:p})}return l}getAppointmentsForSlot(t,e){return this.getSlotStatus(t,e,0).filter(l=>l.type==="booked").map(l=>l.appointment)}openBookingModal(t,e){this.selectedSlot={date:t,time:e},this.modalPatientId.set(""),this.modalSpecialtyId.set(this.selectedSpecialtyId()||""),this.modalDoctorId.set(this.selectedDoctorId()||""),this.modalDate.set(t),this.modalTime.set(e),this.modalNotes.set(""),this.modalPaymentMethod.set("CASH"),this.modalTransactionId.set(""),this.isModalOpen=!0}closeModal(){this.isModalOpen=!1}getDuration(t,e){let i=this.doctorSpecialtyService.associations().find(l=>l.doctorId===t&&l.specialtyId===e);return i&&i.durationMinutes>0?i.durationMinutes:30}saveAppointment(){let t=this.modalDoctorId(),e=this.modalSpecialtyId(),i=this.modalDate(),l=this.modalTime(),p=this.modalPatientId();if(t&&e&&i&&l&&p){let y=this.patients().find(h=>h.patientId===p),v=this.getDuration(t,e);this.appointmentsService.addAppointment({doctorId:t,specialtyId:e,patientId:p,patientName:y?.fullName||"Desconocido",appointmentDate:i,startTime:l,endTime:this.addMinutes(l,v),notes:this.modalNotes(),paymentMethod:this.modalPaymentMethod(),paymentStatus:this.modalPaymentMethod()==="CASH"?"PENDING":"PAID",transactionId:this.modalTransactionId()}),this.closeModal()}}addMinutes(t,e){let[i,l]=t.split(":").map(Number),p=new Date;return p.setHours(i,l+e),`${p.getHours().toString().padStart(2,"0")}:${p.getMinutes().toString().padStart(2,"0")}`}getDoctorName(t){return this.doctors().find(e=>e.id===t||e.doctorId===t)?.fullName||"Desconocido"}getSpecialtyName(t){return this.specialties().find(e=>e.specialtyId===t)?.name||"Desconocido"}getAppointmentColorClass(t){return t.paymentStatus==="PAID"?"bg-green-100 border-green-600 text-green-800":"bg-yellow-100 border-yellow-500 text-yellow-800"}openGenericBooking(){let t=new Date().toISOString().split("T")[0],e=this.timeSlots(),i=e.find(l=>this.getSlotStatus(t,l,0).some(p=>p.type==="available"));i?this.openBookingModal(t,i):this.openBookingModal(t,e[0]||"09:00")}openAppointmentDetails(t){this.selectedAppointment=t,this.isDetailsModalOpen=!0,this.isRescheduling=!1}closeDetailsModal(){this.isDetailsModalOpen=!1,this.selectedAppointment=null,this.isRescheduling=!1,this.isConfirmingCancel=!1}startRescheduling(){this.selectedAppointment&&(this.isRescheduling=!0,this.isConfirmingCancel=!1,this.modalSpecialtyId.set(this.selectedAppointment.specialtyId),this.modalDoctorId.set(this.selectedAppointment.doctorId),this.modalDate.set(this.selectedAppointment.appointmentDate),this.modalTime.set(this.selectedAppointment.startTime),this.modalPatientId.set(this.selectedAppointment.patientId),this.modalNotes.set(this.selectedAppointment.notes||""),this.modalPaymentMethod.set(this.selectedAppointment.paymentMethod||"CASH"),this.modalTransactionId.set(this.selectedAppointment.transactionId||""))}showCancelConfirmation(){this.isConfirmingCancel=!0,this.isRescheduling=!1}cancelCancelConfirmation(){this.isConfirmingCancel=!1}confirmCancel(){this.selectedAppointment&&(this.appointmentsService.updatestatus(this.selectedAppointment.appointmentId,"CANCELLED"),this.closeDetailsModal(),this.isConfirmingCancel=!1)}saveRescheduledAppointment(){if(this.selectedAppointment&&this.modalTime()&&this.modalDate()){let t=this.modalDoctorId()||this.selectedAppointment.doctorId,e=this.modalSpecialtyId()||this.selectedAppointment.specialtyId,i=this.getDuration(t,e),l=L($({},this.selectedAppointment),{doctorId:t,specialtyId:e,appointmentDate:this.modalDate(),startTime:this.modalTime(),endTime:this.addMinutes(this.modalTime(),i),notes:this.modalNotes(),paymentMethod:this.modalPaymentMethod(),transactionId:this.modalTransactionId()}),p=this.appointments(),y=p.findIndex(v=>v.appointmentId===this.selectedAppointment.appointmentId);y!==-1&&(p[y]=l,this.appointmentsService.appointments.set([...p])),this.closeDetailsModal()}}cancelAppointment(){this.selectedAppointment&&(this.appointmentsService.updatestatus(this.selectedAppointment.appointmentId,"CANCELLED"),this.closeDetailsModal())}getAppointmentStatusLabel(t){return t.paymentStatus==="PAID"?"Pagada":(t.status==="CONFIRMED"&&t.paymentStatus==="PENDING","Reservada")}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=H({type:n,selectors:[["app-appointments-calendar"]],decls:46,vars:23,consts:[[1,"h-full","flex","flex-col"],[1,"bg-white","border-b","border-gray-200","px-6","py-4","flex","flex-col","md:flex-row","md:items-center","justify-between","gap-4"],[1,"text-xl","font-bold","text-gray-900"],[1,"text-sm","text-gray-500"],[1,"flex","items-center","gap-4"],[1,"relative"],[1,"appearance-none","bg-white","border","border-gray-300","text-gray-700","text-sm","rounded-xl","focus:ring-blue-500","focus:border-blue-500","block","w-full","pl-3","pr-8","py-2.5","shadow-sm","hover:border-gray-400","transition-colors","cursor-pointer","font-medium",3,"ngModelChange","ngModel"],["value",""],[3,"value",4,"ngFor","ngForOf"],[1,"pointer-events-none","absolute","inset-y-0","right-0","flex","items-center","px-2","text-gray-500"],[1,"w-4","h-4","rotate-90",3,"img"],[1,"flex","items-center","gap-2","bg-blue-600","hover:bg-blue-700","text-white","px-6","py-2.5","rounded-xl","text-sm","font-bold","shadow-lg","shadow-blue-200","transition-all","active:scale-95",3,"click"],[1,"w-5","h-5",3,"img"],[1,"flex","items-center","bg-gray-100","rounded-xl","p-1","shadow-inner"],[1,"p-2","hover:bg-white","hover:shadow-sm","rounded-lg","transition-all","text-gray-600",3,"click"],[1,"px-4","text-center","min-w-[180px]"],[1,"block","text-sm","font-bold","text-gray-900","capitalize","leading-none","mb-1"],[1,"block","text-[10px]","font-bold","text-gray-500","uppercase","tracking-wider"],[1,"flex-1","overflow-auto","bg-gray-50","p-2","sm:p-6"],[1,"flex","items-center","justify-end","mb-4","px-1"],[1,"bg-gray-200","p-1","rounded-lg","inline-flex"],[3,"click"],[1,"bg-white","rounded-xl","shadow","border","border-gray-200","overflow-hidden","min-w-[800px]"],[1,"grid","border-b","border-gray-200","bg-gray-50","sticky","top-0","z-10"],[1,"p-4","text-xs","font-semibold","text-gray-400","uppercase","tracking-wider","text-center","border-r","border-gray-200","w-20","flex","items-center","justify-center"],[4,"ngIf"],["class","grid border-b border-gray-100 last:border-b-0 min-h-[3.5rem]",3,"class",4,"ngFor","ngForOf"],["class","fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",4,"ngIf"],[3,"value"],["class","p-4 text-center border-r border-gray-200 last:border-r-0",4,"ngFor","ngForOf"],[1,"p-4","text-center","border-r","border-gray-200","last:border-r-0"],[1,"text-xs","font-semibold","text-gray-500","uppercase","mb-1"],[1,"flex","flex-col","items-center","leading-none"],[1,"text-lg","font-bold","text-gray-900"],[1,"text-[10px]","font-bold","text-gray-400","uppercase","mt-0.5"],[1,"p-4","text-center"],[1,"text-xs","font-semibold","text-gray-500","uppercase"],[1,"grid","border-b","border-gray-100","last:border-b-0","min-h-[3.5rem]"],[1,"w-20","p-2","text-xs","font-medium","text-gray-500","text-center","border-r","border-gray-100","flex","items-center","justify-center","bg-gray-50/50"],[3,"class",4,"ngFor","ngForOf"],["class","absolute inset-0 bg-gray-50/50 -z-10",4,"ngIf"],[1,"w-full","h-full","relative","z-10",3,"ngClass"],[4,"ngFor","ngForOf"],[1,"absolute","inset-0","bg-gray-50/50","-z-10"],["class","rounded border transition-all group flex flex-col justify-center items-center gap-0.5 relative",3,"disabled","ngClass","click",4,"ngIf"],[3,"ngClass","class","click",4,"ngIf"],[1,"rounded","border","transition-all","group","flex","flex-col","justify-center","items-center","gap-0.5","relative",3,"click","disabled","ngClass"],["class","w-4 h-4 text-blue-500",3,"img",4,"ngIf"],[1,"absolute","bottom-full","left-1/2","-translate-x-1/2","mb-2","w-max","max-w-[150px]","bg-gray-900","text-white","text-[10px]","rounded","px-2","py-1","opacity-0","group-hover:opacity-100","transition-opacity","pointer-events-none","z-50","shadow-lg","text-center"],[1,"opacity-75"],[1,"text-[9px]","text-blue-500","opacity-80","truncate","w-full","text-center","pb-0.5"],[1,"w-4","h-4","text-blue-500",3,"img"],[3,"click","ngClass"],["class","w-full h-full flex items-center justify-center",4,"ngIf"],[1,"absolute","bottom-full","left-1/2","-translate-x-1/2","mb-2","w-max","max-w-[150px]","bg-gray-900","text-white","text-[10px]","rounded","px-2","py-1","opacity-0","group-hover:opacity-100","transition-opacity","pointer-events-none","z-50","shadow-lg","text-left"],[1,"font-bold"],[1,"font-bold","text-[10px]","truncate","w-full"],[1,"truncate","text-[9px]","opacity-80","w-full"],[1,"w-full","h-full","flex","items-center","justify-center"],["class","w-4 h-4 text-green-600",3,"img",4,"ngIf"],["class","w-4 h-4 text-yellow-600",3,"img",4,"ngIf"],["class","text-[9px] font-bold",4,"ngIf"],[1,"w-4","h-4","text-green-600",3,"img"],[1,"w-4","h-4","text-yellow-600",3,"img"],[1,"text-[9px]","font-bold"],[1,"relative","p-2","bg-white"],["class","absolute inset-0 bg-gray-50/40 pattern-diagonal-lines",4,"ngIf"],[1,"absolute","inset-0","bg-gray-50/40","pattern-diagonal-lines"],["class","rounded-lg bg-blue-50 border border-blue-200 border-dashed hover:bg-blue-100 hover:border-solid hover:shadow-md transition-all flex items-center gap-2 group/card cursor-pointer relative",3,"ngClass","click",4,"ngIf"],[1,"rounded-lg","bg-blue-50","border","border-blue-200","border-dashed","hover:bg-blue-100","hover:border-solid","hover:shadow-md","transition-all","flex","items-center","gap-2","group/card","cursor-pointer","relative",3,"click","ngClass"],["class","text-left overflow-hidden",4,"ngIf"],["class","w-6 h-6 rounded-full bg-blue-100 flex items-center justify-center flex-shrink-0 group-hover/card:bg-blue-200 transition-colors",4,"ngIf"],[1,"absolute","bottom-full","left-1/2","-translate-x-1/2","mb-2","w-max","max-w-[200px]","bg-gray-900","text-white","text-xs","rounded","px-2","py-1","opacity-0","group-hover/card:opacity-100","transition-opacity","pointer-events-none","z-50","shadow-lg"],[1,"text-left","overflow-hidden"],[1,"text-xs","font-bold","text-blue-600","truncate","group-hover/card:text-blue-700"],[1,"text-[10px]","text-blue-500","font-medium","truncate"],[1,"w-6","h-6","rounded-full","bg-blue-100","flex","items-center","justify-center","flex-shrink-0","group-hover/card:bg-blue-200","transition-colors"],[1,"w-3","h-3","text-blue-600",3,"img"],["class","overflow-hidden w-full",4,"ngIf"],[1,"absolute","bottom-full","left-1/2","-translate-x-1/2","mb-2","w-max","max-w-[200px]","bg-gray-900","text-white","text-xs","rounded","px-2","py-1","opacity-0","group-hover/card:opacity-100","transition-opacity","pointer-events-none","z-50","shadow-lg","text-left"],[1,"overflow-hidden","w-full"],[1,"font-bold","text-xs","truncate"],[1,"text-[10px]","opacity-90","truncate"],["class","text-[10px] font-bold text-center",4,"ngIf"],[1,"text-[10px]","font-bold","text-center"],[1,"fixed","inset-0","bg-black","bg-opacity-50","flex","items-center","justify-center","z-50","p-4"],[1,"bg-white","rounded-2xl","shadow-2xl","w-full","max-w-3xl","max-h-[90vh]","overflow-y-auto"],[1,"bg-gradient-to-r","from-blue-600","to-blue-700","px-8","py-6","rounded-t-2xl"],[1,"flex","items-center","justify-between"],[1,"text-2xl","font-bold","text-white"],[1,"text-blue-100","text-sm","mt-1"],[1,"text-white","hover:bg-white","hover:bg-opacity-20","rounded-lg","p-2","transition-all",3,"click"],[1,"w-6","h-6","rotate-45",3,"img"],[1,"p-8"],[1,"grid","grid-cols-1","lg:grid-cols-2","gap-8"],[1,"space-y-5"],[1,"text-sm","font-bold","text-gray-700","uppercase","tracking-wide","mb-4"],[1,"text-xs","text-gray-500","mb-4"],[1,"block","text-xs","font-bold","text-gray-600","uppercase","tracking-wide","mb-2"],[1,"w-full","rounded-xl","border-2","border-gray-200","py-3","px-4","text-sm","font-medium","focus:border-blue-500","focus:ring-2","focus:ring-blue-200","transition-all","outline-none",3,"ngModelChange","ngModel"],["value","","disabled",""],[1,"w-full","rounded-xl","border-2","border-gray-200","py-3","px-4","text-sm","font-medium","focus:border-blue-500","focus:ring-2","focus:ring-blue-200","transition-all","outline-none","disabled:bg-gray-50","disabled:text-gray-400",3,"ngModelChange","ngModel","disabled"],["type","date",1,"w-full","rounded-xl","border-2","border-gray-200","py-3","px-4","text-sm","font-medium","focus:border-blue-500","focus:ring-2","focus:ring-blue-200","transition-all","outline-none",3,"ngModelChange","ngModel"],[1,"bg-gradient-to-br","from-gray-50","to-blue-50","rounded-2xl","p-6","border-2","border-gray-100"],[1,"text-sm","font-bold","text-gray-700","uppercase","tracking-wide","mb-2","text-center"],[1,"text-xs","text-gray-500","mb-4","text-center"],["class","grid grid-cols-3 gap-3 max-h-[320px] overflow-y-auto pr-2 custom-scrollbar",4,"ngIf"],["class","h-[320px] flex flex-col items-center justify-center text-center text-gray-400",4,"ngIf"],[1,"mt-8","pt-8","border-t-2","border-gray-100"],[1,"text-sm","font-bold","text-gray-700","uppercase","tracking-wide","mb-5"],[1,"grid","grid-cols-2","md:grid-cols-4","gap-3","mb-6"],["type","button",3,"click"],[1,"w-6","h-6","mb-2",3,"img"],[1,"text-xs","text-gray-500","mt-1"],["placeholder","Escribe cualquier nota relevante para el m\xE9dico...","rows","3",1,"w-full","rounded-xl","border-2","border-gray-200","py-3","px-4","text-sm","focus:border-blue-500","focus:ring-2","focus:ring-blue-200","transition-all","outline-none","resize-none",3,"ngModelChange","ngModel"],[1,"bg-gray-50","px-8","py-5","flex","flex-col-reverse","sm:flex-row","gap-3","border-t-2","border-gray-100","rounded-b-2xl"],["type","button",1,"flex-1","sm:flex-none","inline-flex","items-center","justify-center","gap-2","rounded-xl","bg-white","border-2","border-gray-300","px-6","py-3","text-sm","font-bold","text-gray-700","hover:bg-gray-50","transition-all",3,"click"],[1,"w-5","h-5","rotate-45",3,"img"],["type","button",1,"flex-1","inline-flex","items-center","justify-center","gap-2","rounded-xl","bg-blue-600","px-8","py-3","text-sm","font-bold","text-white","shadow-lg","shadow-blue-200","hover:bg-blue-700","transition-all","disabled:opacity-50","disabled:cursor-not-allowed","disabled:shadow-none",3,"click","disabled"],[1,"grid","grid-cols-3","gap-3","max-h-[320px]","overflow-y-auto","pr-2","custom-scrollbar"],[3,"class","click",4,"ngFor","ngForOf"],[1,"h-[320px]","flex","flex-col","items-center","justify-center","text-center","text-gray-400"],[1,"w-16","h-16","mb-4","opacity-20",3,"img"],[1,"text-sm","font-medium","px-6"],[1,"bg-white","rounded-2xl","shadow-2xl","w-full","max-w-2xl","max-h-[90vh]","overflow-y-auto"],[1,"bg-gradient-to-r","from-indigo-600","to-purple-700","px-8","py-6","rounded-t-2xl"],[1,"text-indigo-100","text-sm","mt-1"],["class","p-8",4,"ngIf"],["class","p-12 text-center",4,"ngIf"],["class","bg-gray-50 px-8 py-5 flex flex-col-reverse sm:flex-row gap-3 border-t-2 border-gray-100 rounded-b-2xl",4,"ngIf"],[1,"bg-gradient-to-br","from-blue-50","to-indigo-50","rounded-xl","p-6","mb-6","border-2","border-blue-100"],[1,"flex","items-center","gap-3"],[1,"w-8","h-8","text-blue-600",3,"img"],[1,"text-sm","text-gray-600"],[1,"grid","grid-cols-2","gap-6","mb-6"],[1,"block","text-xs","font-bold","text-gray-500","uppercase","mb-2"],[1,"text-sm","font-medium","text-gray-900"],["class","bg-gray-50 rounded-xl p-4",4,"ngIf"],[1,"bg-gray-50","rounded-xl","p-4"],[1,"text-sm","text-gray-700"],[1,"bg-yellow-50","border-l-4","border-yellow-400","p-4","mb-4"],[1,"text-sm","text-yellow-700","italic"],[1,"grid","grid-cols-2","gap-4"],[1,"w-full","rounded-xl","border-2","border-gray-100","bg-gray-50","py-3","px-4","text-sm","font-bold","text-gray-500","italic"],[1,"w-full","rounded-xl","border-2","border-gray-200","py-3","px-4","text-sm","font-medium","focus:border-blue-500","outline-none","transition-all",3,"ngModelChange","ngModel"],[1,"grid","grid-cols-4","gap-2","max-h-48","overflow-y-auto","pr-2","custom-scrollbar"],[1,"p-12","text-center"],[1,"w-20","h-20","bg-red-100","rounded-full","flex","items-center","justify-center","mx-auto","mb-6"],[1,"w-10","h-10","text-red-600",3,"img"],[1,"text-2xl","font-bold","text-gray-900","mb-2"],[1,"text-gray-600","mb-8","max-w-md","mx-auto"],[1,"flex","gap-4"],[1,"flex-1","py-4","bg-gray-100","text-gray-700","font-bold","rounded-xl","hover:bg-gray-200","transition-all",3,"click"],[1,"flex-1","py-4","bg-red-600","text-white","font-bold","rounded-xl","hover:bg-red-700","transition-all","shadow-lg","shadow-red-200",3,"click"],[1,"flex-1","flex","gap-3"],["type","button","class","flex-1 inline-flex items-center justify-center gap-2 rounded-xl bg-red-600 px-6 py-3 text-sm font-bold text-white hover:bg-red-700 transition-all",3,"click",4,"ngIf"],["type","button","class","flex-1 inline-flex items-center justify-center gap-2 rounded-xl bg-indigo-600 px-6 py-3 text-sm font-bold text-white shadow-lg shadow-indigo-200 hover:bg-indigo-700 transition-all",3,"click",4,"ngIf"],["type","button","class","flex-1 inline-flex items-center justify-center gap-2 rounded-xl bg-blue-600 px-8 py-3 text-sm font-bold text-white shadow-lg shadow-blue-200 hover:bg-blue-700 transition-all disabled:opacity-50 disabled:cursor-not-allowed",3,"disabled","click",4,"ngIf"],["type","button",1,"flex-1","inline-flex","items-center","justify-center","gap-2","rounded-xl","bg-red-600","px-6","py-3","text-sm","font-bold","text-white","hover:bg-red-700","transition-all",3,"click"],["type","button",1,"flex-1","inline-flex","items-center","justify-center","gap-2","rounded-xl","bg-indigo-600","px-6","py-3","text-sm","font-bold","text-white","shadow-lg","shadow-indigo-200","hover:bg-indigo-700","transition-all",3,"click"],["type","button",1,"flex-1","inline-flex","items-center","justify-center","gap-2","rounded-xl","bg-blue-600","px-8","py-3","text-sm","font-bold","text-white","shadow-lg","shadow-blue-200","hover:bg-blue-700","transition-all","disabled:opacity-50","disabled:cursor-not-allowed",3,"click","disabled"]],template:function(e,i){e&1&&(a(0,"div",0)(1,"div",1)(2,"div")(3,"h1",2),s(4,"Agenda de citas"),r(),a(5,"p",3),s(6,"Gestiona los turnos y citas m\xE9dicas globales."),r()(),a(7,"div",4)(8,"div",5)(9,"select",6),m("ngModelChange",function(p){return i.selectedSpecialtyId.set(p)}),a(10,"option",7),s(11,"Todas las especialidades"),r(),_(12,Ae,2,2,"option",8),r(),a(13,"div",9),f(14,"lucide-icon",10),r()(),a(15,"button",11),m("click",function(){return i.openGenericBooking()}),f(16,"lucide-icon",12),s(17," Agendar nueva cita "),r(),a(18,"div",13)(19,"button",14),m("click",function(){return i.changeWeek(-1)}),f(20,"lucide-icon",12),r(),a(21,"div",15)(22,"span",16),s(23),z(24,"titlecase"),r(),a(25,"span",17),s(26),r()(),a(27,"button",14),m("click",function(){return i.changeWeek(1)}),f(28,"lucide-icon",12),r()()()(),a(29,"div",18)(30,"div",19)(31,"div",20)(32,"button",21),m("click",function(){return i.toggleView("day")}),s(33," D\xEDa "),r(),a(34,"button",21),m("click",function(){return i.toggleView("week")}),s(35," Semana "),r()()(),a(36,"div",22)(37,"div",23)(38,"div",24),s(39," Hora "),r(),_(40,De,2,1,"ng-container",25)(41,Me,4,1,"ng-container",25),r(),a(42,"div",5),_(43,ot,5,5,"div",26),r()()()(),_(44,pt,84,43,"div",27)(45,Ct,15,5,"div",27)),e&2&&(o(9),d("ngModel",i.selectedSpecialtyId()),o(3),d("ngForOf",i.specialties()),o(2),d("img",i.icons.ChevronRight),o(2),d("img",i.icons.Plus),o(4),d("img",i.icons.ChevronLeft),o(3),A(" ",U(24,21,i.currentDateStr())," "),o(3),B(" ",i.weekDays()[0].dayNum," - ",i.weekDays()[6].dayNum," ",i.weekDays()[6].dayName," "),o(2),d("img",i.icons.ChevronRight),o(4),b("px-4 py-1.5 text-sm font-bold rounded-md transition-all "+(i.viewMode()==="day"?"bg-white text-blue-600 shadow-sm":"text-gray-600 hover:text-gray-800")),o(2),b("px-4 py-1.5 text-sm font-bold rounded-md transition-all "+(i.viewMode()==="week"?"bg-white text-blue-600 shadow-sm":"text-gray-600 hover:text-gray-800")),o(3),b(i.viewMode()==="week"?"grid-cols-8":"grid-cols-[auto_1fr]"),o(3),d("ngIf",i.viewMode()==="week"),o(),d("ngIf",i.viewMode()==="day"),o(2),d("ngForOf",i.timeSlots()),o(),d("ngIf",i.isModalOpen),o(),d("ngIf",i.isDetailsModalOpen))},dependencies:[J,G,W,Y,fe,ue,xe,pe,ge,me,_e,se,de,q],styles:[".custom-scrollbar[_ngcontent-%COMP%]::-webkit-scrollbar{width:6px}.custom-scrollbar[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#f1f5f9;border-radius:10px}.custom-scrollbar[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#cbd5e1;border-radius:10px}.custom-scrollbar[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:#94a3b8}.scale-102[_ngcontent-%COMP%]{transform:scale(1.02)}"]})};export{we as AppointmentsCalendarComponent};
