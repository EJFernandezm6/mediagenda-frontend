import{a as Y}from"./chunk-MZ3EZVY4.js";import{Ba as a,Dd as L,Kd as $,Lc as A,Ld as S,Md as C,Qb as F,R as D,Ra as g,Sc as O,Va as p,W as m,Xc as U,ab as l,bb as t,cb as n,db as c,hc as h,ia as P,ib as u,ic as E,jb as y,n as N,oc as v,sb as b,td as j,ub as s,vb as x,wb as f,xb as k,xc as T}from"./chunk-NGQHHHUV.js";var d=class o{http=m(T);apiUrl=`${Y.apiUrl}/subscriptions`;currentCurrency=P("PEN");plans=P([]);paymentMethods=P([]);currentSubscriptionId=P(null);constructor(){this.loadPlans(),this.loadPaymentMethods()}setCurrency(i){this.currentCurrency.set(i)}loadPlans(){let i=[{subscription_id:1,name:"B\xE1sico",description:"Ideal para empezar",payment_period:"MONTHLY",max_doctors:1,max_patients:50,max_monthly_appointments:100,is_active:!0,prices:[{currency:"USD",price:0},{currency:"PEN",price:0}],features:["1 M\xE9dico","50 Pacientes","Agenda B\xE1sica"]},{subscription_id:2,name:"Profesional",description:"Para cl\xEDnicas en crecimiento",payment_period:"MONTHLY",max_doctors:5,max_patients:500,max_monthly_appointments:1e3,is_active:!0,prices:[{currency:"USD",price:29},{currency:"PEN",price:110}],features:["5 M\xE9dicos","500 Pacientes","Agenda Avanzada","Notificaciones"]},{subscription_id:3,name:"Empresarial",description:"Sin l\xEDmites",payment_period:"MONTHLY",max_doctors:999,max_patients:99999,max_monthly_appointments:99999,is_active:!0,prices:[{currency:"USD",price:99},{currency:"PEN",price:370}],features:["Ilimitado","Soporte 24/7","API Access","Marca Blanca"]}];this.plans.set(i)}loadPaymentMethods(){let i=[{payment_method_id:1,type:"CREDIT_CARD",provider:"STRIPE",last4:"4242",expiry_month:12,expiry_year:2028,is_default:!0}];this.paymentMethods.set(i)}changePlan(i){return console.log("Changing plan to:",i),this.currentSubscriptionId.set(i),N(!0)}static \u0275fac=function(r){return new(r||o)};static \u0275prov=D({token:o,factory:o.\u0275fac,providedIn:"root"})};function Z(o,i){o&1&&(t(0,"div",10),s(1," Plan Actual "),n())}function G(o,i){if(o&1&&(t(0,"li",11),c(1,"lucide-icon",12),t(2,"span",13),s(3),n()()),o&2){let r=i.$implicit,e=y();a(),l("img",e.checkIcon),a(2),x(r)}}var M=class o{plan;isCurrent=!1;onSelect;subService=m(d);checkIcon=A;displayPrice=F(()=>{let i=this.subService.currentCurrency(),r=this.plan.prices.find(_=>_.currency===i);return r?`${i==="USD"?"$":"S/"} ${r.price}`:"N/A"});static \u0275fac=function(r){return new(r||o)};static \u0275cmp=g({type:o,selectors:[["app-plan-card"]],inputs:{plan:"plan",isCurrent:"isCurrent",onSelect:"onSelect"},decls:15,vars:26,consts:[[1,"relative","rounded-xl","border","p-6","shadow-sm","flex","flex-col","h-full","transition-all","duration-200"],["class","absolute -top-3 left-1/2 -translate-x-1/2 px-3 py-0.5 bg-blue-600 text-white text-[10px] font-bold uppercase tracking-wide rounded-full shadow-sm",4,"ngIf"],[1,"text-lg","font-semibold","text-gray-900"],[1,"text-sm","text-gray-500","mt-1","h-10"],[1,"mt-4","flex","items-baseline","text-gray-900"],[1,"text-3xl","font-bold","tracking-tight"],[1,"ml-1","text-sm","font-semibold","text-gray-500"],["role","list",1,"mt-6","space-y-4","flex-1"],["class","flex items-start",4,"ngFor","ngForOf"],[1,"mt-8","block","w-full","py-2.5","px-4","border","border-transparent","rounded-lg","text-center","text-sm","font-medium","focus:outline-none","focus:ring-2","focus:ring-offset-2","focus:ring-blue-500","disabled:cursor-not-allowed","transition-colors",3,"click","disabled"],[1,"absolute","-top-3","left-1/2","-translate-x-1/2","px-3","py-0.5","bg-blue-600","text-white","text-[10px]","font-bold","uppercase","tracking-wide","rounded-full","shadow-sm"],[1,"flex","items-start"],[1,"h-5","w-5","flex-shrink-0","text-green-500",3,"img"],[1,"ml-3","text-sm","text-gray-700"]],template:function(r,e){r&1&&(t(0,"div",0),p(1,Z,2,0,"div",1),t(2,"h3",2),s(3),n(),t(4,"p",3),s(5),n(),t(6,"div",4)(7,"span",5),s(8),n(),t(9,"span",6),s(10),n()(),t(11,"ul",7),p(12,G,4,2,"li",8),n(),t(13,"button",9),u("click",function(){return e.onSelect()}),s(14),n()()),r&2&&(b("border-blue-500",e.isCurrent)("bg-blue-50",e.isCurrent)("border-gray-200",!e.isCurrent)("hover:border-blue-300",!e.isCurrent),a(),l("ngIf",e.isCurrent),a(2),x(e.plan.name),a(2),x(e.plan.description),a(3),f(" ",e.displayPrice()," "),a(2),f("/",e.plan.payment_period==="MONTHLY"?"mes":"a\xF1o"),a(2),l("ngForOf",e.plan.features),a(),b("bg-blue-600",!e.isCurrent)("text-white",!e.isCurrent)("hover:bg-blue-700",!e.isCurrent)("bg-blue-100",e.isCurrent)("text-blue-800",e.isCurrent),l("disabled",e.isCurrent),a(),f(" ",e.isCurrent?"Plan Actual":"Seleccionar Plan"," "))},dependencies:[v,h,E,C,S],encapsulation:2})};function q(o,i){o&1&&(t(0,"div",11),s(1," No hay m\xE9todos de pago registrados. "),n())}function J(o,i){o&1&&(t(0,"span",19),s(1," Predeterminado "),n())}function K(o,i){if(o&1&&(t(0,"li",12)(1,"div",13)(2,"div",14),s(3),n(),t(4,"div")(5,"p",15),s(6),p(7,J,2,0,"span",16),n(),t(8,"p",17),s(9),n()()(),t(10,"button",18),c(11,"lucide-icon",6),n()()),o&2){let r=i.$implicit,e=y();a(3),f(" ",r.provider," "),a(3),f(" \u2022\u2022\u2022\u2022 \u2022\u2022\u2022\u2022 \u2022\u2022\u2022\u2022 ",r.last4," "),a(),l("ngIf",r.is_default),a(2),k("Expira ",r.expiry_month,"/",r.expiry_year),a(2),l("img",e.icons.Trash2)}}var w=class o{subService=m(d);paymentMethods=this.subService.paymentMethods;icons={CreditCard:U,Trash2:L,Plus:j};addMethod(){console.log("Add payment method clicked")}static \u0275fac=function(r){return new(r||o)};static \u0275cmp=g({type:o,selectors:[["app-payment-methods"]],decls:13,vars:4,consts:[[1,"bg-white","shadow","rounded-lg","overflow-hidden","border","border-gray-100"],[1,"px-6","py-4","border-b","border-gray-100","bg-gray-50","flex","items-center","justify-between"],[1,"flex","items-center","gap-2"],[1,"w-5","h-5","text-gray-500",3,"img"],[1,"text-lg","font-medium","text-gray-900"],[1,"text-sm","text-blue-600","hover:text-blue-800","font-medium","flex","items-center","gap-1",3,"click"],[1,"w-4","h-4",3,"img"],[1,"p-6"],["class","text-center py-8 text-gray-500",4,"ngIf"],[1,"divide-y","divide-gray-100"],["class","py-4 flex items-center justify-between",4,"ngFor","ngForOf"],[1,"text-center","py-8","text-gray-500"],[1,"py-4","flex","items-center","justify-between"],[1,"flex","items-center","gap-4"],[1,"h-10","w-16","bg-gray-100","rounded","flex","items-center","justify-center","text-gray-500","font-bold","text-xs","uppercase","border","border-gray-200"],[1,"text-sm","font-medium","text-gray-900"],["class","ml-2 inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-green-100 text-green-800",4,"ngIf"],[1,"text-xs","text-gray-500"],[1,"text-gray-400","hover:text-red-600","p-2","rounded-full","hover:bg-red-50","transition-colors"],[1,"ml-2","inline-flex","items-center","px-2","py-0.5","rounded","text-xs","font-medium","bg-green-100","text-green-800"]],template:function(r,e){r&1&&(t(0,"div",0)(1,"div",1)(2,"div",2),c(3,"lucide-icon",3),t(4,"h3",4),s(5,"M\xE9todos de Pago"),n()(),t(6,"button",5),u("click",function(){return e.addMethod()}),c(7,"lucide-icon",6),s(8," Agregar tarjeta "),n()(),t(9,"div",7),p(10,q,2,0,"div",8),t(11,"ul",9),p(12,K,12,6,"li",10),n()()()),r&2&&(a(3),l("img",e.icons.CreditCard),a(4),l("img",e.icons.Plus),a(3),l("ngIf",e.paymentMethods().length===0),a(2),l("ngForOf",e.paymentMethods()))},dependencies:[v,h,E,C,S],encapsulation:2})};function Q(o,i){if(o&1&&c(0,"app-plan-card",18),o&2){let r=i.$implicit,e=y();l("plan",r)("isCurrent",e.currentSubscriptionId()===r.subscription_id)("onSelect",e.selectPlan.bind(e,r.subscription_id))}}var B=class o{subService=m(d);plans=this.subService.plans;currentSubscriptionId=this.subService.currentSubscriptionId;currentCurrency=this.subService.currentCurrency;icons={Zap:$,CheckCircle2:O};ngOnInit(){this.subService.currentSubscriptionId.set(1)}toggleCurrency(i){this.subService.setCurrency(i)}selectPlan(i){confirm("\xBFEst\xE1s seguro de cambiar tu plan de suscripci\xF3n?")&&this.subService.changePlan(i).subscribe(()=>{alert("Plan actualizado con \xE9xito")})}static \u0275fac=function(r){return new(r||o)};static \u0275cmp=g({type:o,selectors:[["app-subscription"]],decls:33,vars:19,consts:[[1,"max-w-6xl","mx-auto","px-4","py-8"],[1,"mb-8","flex","flex-col","md:flex-row","md:items-center","md:justify-between","gap-4"],[1,"text-2xl","font-bold","text-gray-900","flex","items-center","gap-2"],[1,"w-8","h-8","text-yellow-500","fill-yellow-500",3,"img"],[1,"mt-2","text-gray-600"],[1,"bg-gray-100","p-1","rounded-lg","inline-flex","items-center"],[1,"px-4","py-1.5","text-sm","font-medium","rounded-md","transition-all",3,"click"],[1,"grid","grid-cols-1","md:grid-cols-3","gap-6","mb-12"],[3,"plan","isCurrent","onSelect",4,"ngFor","ngForOf"],[1,"grid","grid-cols-1","lg:grid-cols-3","gap-8"],[1,"lg:col-span-2"],[1,"bg-white","shadow","rounded-lg","p-6","border","border-gray-100"],[1,"text-lg","font-medium","text-gray-900","mb-4"],[1,"flex","items-center","justify-between","py-2","border-b","border-gray-100"],[1,"text-gray-500"],[1,"font-medium"],[1,"flex","items-center","justify-between","py-2"],[1,"mt-4","text-xs","text-gray-400"],[3,"plan","isCurrent","onSelect"]],template:function(r,e){r&1&&(t(0,"div",0)(1,"div",1)(2,"div")(3,"h1",2),c(4,"lucide-icon",3),s(5," Planes y Suscripci\xF3n "),n(),t(6,"p",4),s(7,"Gestiona tu plan actual, facturaci\xF3n y m\xE9todos de pago."),n()(),t(8,"div",5)(9,"button",6),u("click",function(){return e.toggleCurrency("PEN")}),s(10," Soles (PEN) "),n(),t(11,"button",6),u("click",function(){return e.toggleCurrency("USD")}),s(12," D\xF3lares (USD) "),n()()(),t(13,"div",7),p(14,Q,1,3,"app-plan-card",8),n(),t(15,"div",9)(16,"div",10),c(17,"app-payment-methods"),n(),t(18,"div",11)(19,"h3",12),s(20,"Pr\xF3xima Facturaci\xF3n"),n(),t(21,"div",13)(22,"span",14),s(23,"Fecha"),n(),t(24,"span",15),s(25,"11 Mar, 2026"),n()(),t(26,"div",16)(27,"span",14),s(28,"Monto estimado"),n(),t(29,"span",15),s(30),n()(),t(31,"p",17),s(32," * El monto puede variar seg\xFAn el uso de caracter\xEDsticas adicionales o prorrateo. "),n()()()()),r&2&&(a(4),l("img",e.icons.Zap),a(5),b("bg-white",e.currentCurrency()==="PEN")("text-blue-600",e.currentCurrency()==="PEN")("shadow-sm",e.currentCurrency()==="PEN")("text-gray-500",e.currentCurrency()!=="PEN"),a(2),b("bg-white",e.currentCurrency()==="USD")("text-blue-600",e.currentCurrency()==="USD")("shadow-sm",e.currentCurrency()==="USD")("text-gray-500",e.currentCurrency()!=="USD"),a(3),l("ngForOf",e.plans()),a(16),x(e.currentCurrency()==="USD"?"$29.00":"S/ 110.00"))},dependencies:[v,h,C,S,M,w],styles:["[_nghost-%COMP%]{display:block}"]})};export{B as SubscriptionComponent};
