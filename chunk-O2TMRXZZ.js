import{a as W}from"./chunk-SSZXKZ4G.js";import{f as N}from"./chunk-H5SIZDGS.js";import{a as Q,b as X,d as Y,g as Z,s as $}from"./chunk-FAYHZIJJ.js";import{a as ee}from"./chunk-BIWIVTDP.js";import"./chunk-MZ3EZVY4.js";import{$ as p,$a as d,Aa as r,Ab as _,Fb as I,Fd as J,Gd as K,Nc as F,Qa as k,Ua as h,W as C,Zc as U,a as M,aa as g,ab as t,ba as E,bb as i,ca as D,cb as u,gb as S,gc as T,gd as j,hb as f,hc as V,hd as A,ib as c,jd as O,lc as P,ld as B,nd as z,od as q,qd as G,sb as L,tb as o,ub as w,vb as b,vd as R,xa as y,xd as H,yb as x,zb as v}from"./chunk-CEVN5TN4.js";var ie=s=>["/app/doctors",s];function ne(s,l){s&1&&(t(0,"span",48),o(1,"Activo"),i())}function re(s,l){s&1&&(t(0,"span",49),o(1,"Inactivo"),i())}function oe(s,l){if(s&1&&(t(0,"div",50),u(1,"lucide-icon",51),t(2,"div",52),o(3),i()()),s&2){let e=c().$implicit,a=c();r(),d("img",a.icons.AlertCircle),r(2),b(" Faltan: ",a.getMissingFields(e).join(", ")," ")}}function le(s,l){if(s&1&&u(0,"img",53),s&2){let e=c().$implicit;d("src",e.photoUrl,y)}}function ae(s,l){if(s&1&&(t(0,"span"),o(1),i()),s&2){let e=c().$implicit;r(),b(" ",e.fullName.substring(0,2)," ")}}function se(s,l){if(s&1){let e=S();t(0,"div",16)(1,"div",17)(2,"div",18)(3,"div",19)(4,"div",20)(5,"h3",21),o(6),i(),h(7,ne,2,0,"span",22)(8,re,2,0,"span",23)(9,oe,4,2,"div",24),i(),t(10,"div",25)(11,"div",26)(12,"span",27),o(13,"CMP:"),i(),t(14,"span",28),u(15,"lucide-icon",29),o(16),i()(),t(17,"div",26)(18,"span",27),o(19,"DNI:"),i(),t(20,"span",28),u(21,"lucide-icon",29),o(22),i()()(),t(23,"div",30),u(24,"lucide-icon",31),t(25,"span",32),o(26),i(),t(27,"span",33),o(28),i()()(),t(29,"div",34)(30,"div",35),h(31,le,1,1,"img",36)(32,ae,2,1,"span",37),i()()()(),t(33,"div",38)(34,"a",39),u(35,"lucide-icon",11),o(36," WhatsApp "),i(),t(37,"a",40),u(38,"lucide-icon",11),o(39," Email "),i()(),t(40,"div",41)(41,"button",42),f("click",function(){let n=p(e).$implicit,m=c();return g(m.toggleActive(n))}),u(42,"lucide-icon",43),i(),t(43,"div",44)(44,"button",45),f("click",function(){let n=p(e).$implicit,m=c();return g(m.openModal(n))}),o(45," Editar "),i(),t(46,"a",46),o(47," Detalle "),i(),t(48,"button",47),f("click",function(){let n=p(e).$implicit,m=c();return g(m.delete(n.id))}),o(49," Eliminar "),i()()()()}if(s&2){let e=l.$implicit,a=c();r(6),w(e.fullName),r(),d("ngIf",e.active),r(),d("ngIf",!e.active),r(),d("ngIf",a.isMissingData(e)),r(6),d("img",a.icons.FileBadge),r(),b(" ",e.cmp," "),r(5),d("img",a.icons.MapPin),r(),b(" ",e.dni," "),r(2),d("img",a.icons.Star),r(2),w(e.rating||"4.5"),r(2),b("(",e.reviewsCount||40," reviews)"),r(3),d("ngIf",e.photoUrl&&!e.photoUrl.includes("ui-avatars")),r(),d("ngIf",!e.photoUrl||e.photoUrl.includes("ui-avatars")),r(2),d("href","https://wa.me/"+e.phone,y),r(),d("img",a.icons.MessageCircle),r(2),d("href","mailto:"+e.email,y),r(),d("img",a.icons.Mail),r(3),L(e.active?"bg-emerald-50 text-emerald-600 hover:bg-emerald-100":"bg-red-50 text-red-600 hover:bg-red-100"),d("title",e.active?"Desactivar":"Activar"),r(),d("img",a.icons.Power),r(4),d("routerLink",I(22,ie,e.id))}}function me(s,l){if(s&1&&(t(0,"div",84)(1,"div",85)(2,"div",34),u(3,"lucide-icon",86),i(),t(4,"div",87)(5,"h3",88),o(6,"Perfil Incompleto"),i(),t(7,"div",89)(8,"p"),o(9,"Este perfil requiere atenci\xF3n inmediata. Faltan los siguientes campos: "),t(10,"span",90),o(11),i(),o(12,". "),i()()()()()),s&2){let e=c(2);r(3),d("img",e.icons.AlertCircle),r(8),w(e.getMissingFields(e.form).join(", "))}}function de(s,l){s&1&&(t(0,"span"),o(1,"Guardando..."),i())}function ce(s,l){s&1&&(t(0,"span"),o(1,"Guardar"),i())}function pe(s,l){if(s&1){let e=S();t(0,"div",54)(1,"div",55)(2,"div",56),f("click",function(){p(e);let n=c();return g(n.closeModal())}),i(),t(3,"div",57)(4,"div",58)(5,"button",59),f("click",function(){p(e);let n=c();return g(n.closeModal())}),t(6,"span",60),o(7,"Cerrar"),i(),E(),t(8,"svg",61),u(9,"path",62),i()()(),D(),t(10,"div",63)(11,"h3",64),o(12),i(),t(13,"div",65),h(14,me,13,2,"div",66),t(15,"div",67)(16,"div",68)(17,"label",69),o(18,"Foto de perfil"),i(),t(19,"div",70),u(20,"img",71),t(21,"input",72),f("change",function(n){p(e);let m=c();return g(m.onFileSelected(n))}),i()()(),t(22,"div",73)(23,"label",69),o(24,"Nombre completo "),t(25,"span",74),o(26,"*"),i()(),t(27,"input",75),_("ngModelChange",function(n){p(e);let m=c();return v(m.form.fullName,n)||(m.form.fullName=n),g(n)}),i()(),t(28,"div",76)(29,"label",69),o(30,"DNI "),t(31,"span",74),o(32,"*"),i()(),t(33,"input",75),_("ngModelChange",function(n){p(e);let m=c();return v(m.form.dni,n)||(m.form.dni=n),g(n)}),i()(),t(34,"div",76)(35,"label",69),o(36,"CMP / colegiatura "),t(37,"span",74),o(38,"*"),i()(),t(39,"input",75),_("ngModelChange",function(n){p(e);let m=c();return v(m.form.cmp,n)||(m.form.cmp=n),g(n)}),i()(),t(40,"div",76)(41,"label",69),o(42,"Tel\xE9fono "),t(43,"span",74),o(44,"*"),i()(),t(45,"input",75),_("ngModelChange",function(n){p(e);let m=c();return v(m.form.phone,n)||(m.form.phone=n),g(n)}),i()(),t(46,"div",76)(47,"label",69),o(48,"Email"),i(),t(49,"input",77),_("ngModelChange",function(n){p(e);let m=c();return v(m.form.email,n)||(m.form.email=n),g(n)}),i()(),t(50,"div",78)(51,"input",79),_("ngModelChange",function(n){p(e);let m=c();return v(m.form.active,n)||(m.form.active=n),g(n)}),i(),t(52,"label",80),o(53,"Activo (disponible para turnos)"),i()()()(),t(54,"div",81)(55,"button",82),f("click",function(){p(e);let n=c();return g(n.save())}),h(56,de,2,0,"span",37)(57,ce,2,0,"span",37),i(),t(58,"button",83),f("click",function(){p(e);let n=c();return g(n.closeModal())}),o(59," Cancelar "),i()()()()()()}if(s&2){let e=c();r(12),b(" ",e.editingId?"Editar":"Nuevo"," especialista "),r(2),d("ngIf",e.editingId&&e.isMissingData(e.form)),r(6),d("src",e.form.photoUrl||"https://ui-avatars.com/api/?background=random",y),r(7),x("ngModel",e.form.fullName),r(6),x("ngModel",e.form.dni),r(6),x("ngModel",e.form.cmp),r(6),x("ngModel",e.form.phone),r(4),x("ngModel",e.form.email),r(2),x("ngModel",e.form.active),r(4),d("disabled",e.isSaving||!e.isFormValid),r(),d("ngIf",e.isSaving),r(),d("ngIf",!e.isSaving)}}var te=class s{service=C(ee);confirmService=C(W);icons={Plus:z,Pencil:B,Trash2:H,Search:G,Star:R,MessageCircle:O,Mail:j,FileBadge:U,MapPin:A,AlertCircle:F,Power:q};doctors=this.service.doctors;searchTerm="";isModalOpen=!1;isSaving=!1;editingId=null;form={fullName:"",dni:"",cmp:"",email:"",phone:"",active:!0,photoUrl:""};get filteredDoctors(){return this.doctors().filter(l=>l.fullName.toLowerCase().includes(this.searchTerm.toLowerCase())||l.cmp&&l.cmp.includes(this.searchTerm))}get isFormValid(){return this.form.fullName?.trim()&&this.form.phone?.trim()&&this.form.cmp?.trim()&&this.form.dni?.trim()}isMissingData(l){return!l.fullName?.trim()||!l.phone?.trim()||!l.cmp?.trim()||!l.dni?.trim()}getMissingFields(l){let e=[];return l.fullName?.trim()||e.push("Nombre"),l.phone?.trim()||e.push("Tel\xE9fono"),l.cmp?.trim()||e.push("CMP"),l.dni?.trim()||e.push("DNI"),e}openModal(l){l?(this.editingId=l.id,this.form=M({},l)):(this.editingId=null,this.form={fullName:"",dni:"",cmp:"",email:"",phone:"",active:!0,photoUrl:"https://ui-avatars.com/api/?background=random"}),this.isModalOpen=!0}closeModal(){this.isModalOpen=!1}save(){this.isSaving=!0,(!this.form.photoUrl||this.form.photoUrl.includes("ui-avatars"))&&(this.form.photoUrl?.startsWith("data:image")||(this.form.photoUrl=`https://ui-avatars.com/api/?name=${encodeURIComponent(this.form.fullName)}&background=random`)),(this.editingId?this.service.updateDoctor(this.editingId,this.form):this.service.addDoctor(this.form)).subscribe({next:()=>{this.isSaving=!1,this.closeModal()},error:e=>{console.error("Error saving doctor:",e),this.isSaving=!1,e.status===500?alert("Error interno. Es posible que el correo ya est\xE9 registrado o haya datos inv\xE1lidos."):alert("Ocurri\xF3 un error al guardar el m\xE9dico. Por favor intente nuevamente.")}})}toggleActive(l){this.service.updateDoctor(l.id,{active:!l.active}).subscribe()}onFileSelected(l){let e=l.target.files[0];if(e){let a=new FileReader;a.onload=n=>{this.form.photoUrl=n.target.result},a.readAsDataURL(e)}}async delete(l){await this.confirmService.confirm({title:"Eliminar Especialista",message:"\xBFEst\xE1s seguro de que deseas eliminar permanentemente a este m\xE9dico? Esta acci\xF3n no se puede deshacer.",confirmText:"Eliminar",cancelText:"Cancelar"})&&this.service.deleteDoctor(l).subscribe()}static \u0275fac=function(e){return new(e||s)};static \u0275cmp=k({type:s,selectors:[["app-doctors-list"]],decls:19,vars:5,consts:[[1,"px-4","sm:px-6","lg:px-8"],[1,"sm:flex","sm:items-center"],[1,"sm:flex-auto"],[1,"text-xl","font-semibold","text-gray-900"],[1,"mt-2","text-sm","text-gray-700"],[1,"mt-4","sm:ml-16","sm:mt-0","sm:flex-none"],[1,"block","rounded-md","bg-blue-600","px-3","py-2","text-center","text-sm","font-semibold","text-white","shadow-sm","hover:bg-blue-500","flex","items-center","gap-2",3,"click"],[1,"w-4","h-4",3,"img"],[1,"mt-8","flow-root"],[1,"mb-6","relative","max-w-sm"],[1,"absolute","inset-y-0","left-0","pl-3","flex","items-center","pointer-events-none"],[1,"h-5","w-5","text-gray-400",3,"img"],["type","text","placeholder","Buscar por nombre o CMP...",1,"block","w-full","pl-10","pr-3","py-2","border","border-gray-300","rounded-md","leading-5","bg-white","placeholder-gray-500","focus:outline-none","focus:ring-blue-500","focus:border-blue-500","sm:text-sm",3,"ngModelChange","ngModel"],[1,"grid","grid-cols-1","gap-6","sm:grid-cols-2","lg:grid-cols-3"],["class","col-span-1 divide-y divide-gray-200 rounded-lg bg-white shadow border border-gray-100 transition-all hover:shadow-md",4,"ngFor","ngForOf"],["class","fixed inset-0 z-20 w-screen overflow-y-auto",4,"ngIf"],[1,"col-span-1","divide-y","divide-gray-200","rounded-lg","bg-white","shadow","border","border-gray-100","transition-all","hover:shadow-md"],[1,"p-6","relative"],[1,"flex","justify-between","items-start"],[1,"flex-1","pr-4"],[1,"flex","items-center","gap-2","mb-1"],[1,"text-base","font-bold","text-gray-900","leading-tight"],["class","inline-flex items-center rounded-full bg-green-50 px-2 py-0.5 text-xs font-medium text-green-700 ring-1 ring-inset ring-green-600/20",4,"ngIf"],["class","inline-flex items-center rounded-full bg-gray-50 px-2 py-0.5 text-xs font-medium text-gray-600 ring-1 ring-inset ring-gray-500/10",4,"ngIf"],["class","tooltip-container cursor-help relative group",4,"ngIf"],[1,"flex","items-start","gap-4","text-sm","text-gray-500","mb-2"],[1,"flex","flex-col"],[1,"text-xs","text-gray-400"],[1,"font-medium","text-gray-700","flex","items-center","gap-1"],[1,"w-3","h-3",3,"img"],[1,"flex","items-center","text-sm"],[1,"w-4","h-4","text-yellow-400","fill-yellow-400",3,"img"],[1,"ml-1","font-bold","text-gray-900"],[1,"ml-1","text-gray-400","text-xs"],[1,"flex-shrink-0"],[1,"h-14","w-14","rounded-full","bg-blue-900","flex","items-center","justify-center","text-white","text-xl","font-bold","uppercase","overflow-hidden","ring-4","ring-white","shadow-sm"],["class","h-full w-full object-cover",3,"src",4,"ngIf"],[4,"ngIf"],[1,"border-t","border-gray-100","grid","grid-cols-2","divide-x","divide-gray-100"],["target","_blank",1,"flex","items-center","justify-center","gap-2","py-3","text-sm","font-semibold","text-gray-700","hover:bg-gray-50","transition-colors",3,"href"],[1,"flex","items-center","justify-center","gap-2","py-3","text-sm","font-semibold","text-gray-700","hover:bg-gray-50","transition-colors",3,"href"],[1,"border-t","border-gray-100","p-2","flex","items-center","justify-between","gap-2"],[1,"p-2.5","rounded-lg","transition-colors",3,"click","title"],[1,"w-5","h-5",3,"img"],[1,"flex-1","flex","justify-end","gap-1"],[1,"px-3","py-2","text-sm","font-medium","text-blue-600","hover:bg-blue-50","rounded-md","transition-colors",3,"click"],[1,"px-3","py-2","text-sm","font-medium","text-gray-600","hover:bg-gray-50","rounded-md","transition-colors",3,"routerLink"],[1,"px-3","py-2","text-sm","font-medium","text-red-600","hover:bg-red-50","rounded-md","transition-colors",3,"click"],[1,"inline-flex","items-center","rounded-full","bg-green-50","px-2","py-0.5","text-xs","font-medium","text-green-700","ring-1","ring-inset","ring-green-600/20"],[1,"inline-flex","items-center","rounded-full","bg-gray-50","px-2","py-0.5","text-xs","font-medium","text-gray-600","ring-1","ring-inset","ring-gray-500/10"],[1,"tooltip-container","cursor-help","relative","group"],[1,"w-4","h-4","text-amber-500","animate-pulse",3,"img"],[1,"absolute","bottom-full","left-1/2","transform","-translate-x-1/2","mb-2","hidden","group-hover:block","w-48","p-2","bg-gray-800","text-white","text-xs","rounded","z-50"],[1,"h-full","w-full","object-cover",3,"src"],[1,"fixed","inset-0","z-20","w-screen","overflow-y-auto"],[1,"flex","min-h-full","items-end","justify-center","p-4","text-center","sm:items-center","sm:p-0"],[1,"fixed","inset-0","bg-gray-500","bg-opacity-75","transition-opacity",3,"click"],[1,"relative","transform","overflow-hidden","rounded-lg","bg-white","px-4","pb-4","pt-5","text-left","shadow-xl","transition-all","sm:my-8","sm:w-full","sm:max-w-lg","sm:p-6"],[1,"absolute","right-0","top-0","hidden","pr-4","pt-4","sm:block"],["type","button",1,"rounded-md","bg-white","text-gray-400","hover:text-gray-500",3,"click"],[1,"sr-only"],["fill","none","viewBox","0 0 24 24","stroke-width","1.5","stroke","currentColor",1,"h-6","w-6"],["stroke-linecap","round","stroke-linejoin","round","d","M6 18L18 6M6 6l12 12"],[1,"mt-3","w-full"],[1,"text-base","font-semibold","leading-6","text-gray-900","text-center","sm:text-left"],[1,"mt-6"],["class","mb-6 rounded-lg bg-amber-50 p-4 border-l-4 border-amber-400",4,"ngIf"],[1,"grid","grid-cols-1","gap-x-6","gap-y-4","sm:grid-cols-6"],[1,"sm:col-span-6","mb-4"],[1,"block","text-sm","font-medium","leading-6","text-gray-900","mb-2"],[1,"flex","items-center","gap-x-3"],["alt","Preview",1,"h-12","w-12","rounded-full","object-cover","bg-gray-50",3,"src"],["type","file","accept","image/*",1,"rounded-md","bg-white","px-2.5","py-1.5","text-sm","font-semibold","text-gray-900","shadow-sm","ring-1","ring-inset","ring-gray-300","hover:bg-gray-50",3,"change"],[1,"sm:col-span-6","mb-2"],[1,"text-red-500"],["type","text",1,"block","w-full","rounded-md","border-0","py-2.5","px-6","text-gray-900","shadow-sm","ring-1","ring-inset","ring-gray-300","placeholder:text-gray-400","focus:ring-2","focus:ring-inset","focus:ring-blue-600","sm:text-sm","sm:leading-6",3,"ngModelChange","ngModel"],[1,"sm:col-span-3","mb-2"],["type","email",1,"block","w-full","rounded-md","border-0","py-2.5","px-6","text-gray-900","shadow-sm","ring-1","ring-inset","ring-gray-300","placeholder:text-gray-400","focus:ring-2","focus:ring-inset","focus:ring-blue-600","sm:text-sm","sm:leading-6",3,"ngModelChange","ngModel"],[1,"sm:col-span-6","flex","items-center","mt-2"],["type","checkbox",1,"h-4","w-4","rounded","border-gray-300","text-blue-600","focus:ring-blue-600",3,"ngModelChange","ngModel"],[1,"ml-2","block","text-sm","text-gray-900"],[1,"mt-8","sm:flex","sm:flex-row-reverse"],["type","button",1,"inline-flex","w-full","justify-center","rounded-md","bg-blue-600","px-3","py-2","text-sm","font-semibold","text-white","shadow-sm","hover:bg-blue-500","sm:ml-3","sm:w-auto","disabled:opacity-50","disabled:cursor-not-allowed",3,"click","disabled"],["type","button",1,"mt-3","inline-flex","w-full","justify-center","rounded-md","bg-white","px-3","py-2","text-sm","font-semibold","text-gray-900","shadow-sm","ring-1","ring-inset","ring-gray-300","hover:bg-gray-50","sm:mt-0","sm:w-auto",3,"click"],[1,"mb-6","rounded-lg","bg-amber-50","p-4","border-l-4","border-amber-400"],[1,"flex"],[1,"h-5","w-5","text-amber-400",3,"img"],[1,"ml-3"],[1,"text-sm","font-medium","text-amber-800"],[1,"mt-2","text-sm","text-amber-700"],[1,"font-bold","underline"]],template:function(e,a){e&1&&(t(0,"div",0)(1,"div",1)(2,"div",2)(3,"h1",3),o(4,"Especialistas"),i(),t(5,"p",4),o(6,"Gesti\xF3n de especialistas, colegiatura y estado."),i()(),t(7,"div",5)(8,"button",6),f("click",function(){return a.openModal()}),u(9,"lucide-icon",7),o(10," Nuevo especialista "),i()()(),t(11,"div",8)(12,"div",9)(13,"div",10),u(14,"lucide-icon",11),i(),t(15,"input",12),_("ngModelChange",function(m){return v(a.searchTerm,m)||(a.searchTerm=m),m}),i()(),t(16,"div",13),h(17,se,50,24,"div",14),i()()(),h(18,pe,60,12,"div",15)),e&2&&(r(9),d("img",a.icons.Plus),r(5),d("img",a.icons.Search),r(),x("ngModel",a.searchTerm),r(2),d("ngForOf",a.filteredDoctors),r(),d("ngIf",a.isModalOpen))},dependencies:[P,T,V,K,J,$,X,Q,Y,Z,N],styles:['.tooltip-container[_ngcontent-%COMP%]{position:relative;display:inline-block}.tooltip-text[_ngcontent-%COMP%]{visibility:hidden;width:160px;background-color:#1e293b;color:#fff;text-align:center;border-radius:6px;padding:8px;position:absolute;z-index:100;top:150%;left:50%;margin-left:-80px;opacity:0;transition:opacity .2s;font-size:.75rem;pointer-events:none;box-shadow:0 10px 15px -3px #0000001a}.tooltip-text[_ngcontent-%COMP%]:after{content:"";position:absolute;bottom:100%;left:50%;margin-left:-5px;border-width:5px;border-style:solid;border-color:transparent transparent #1e293b transparent}.tooltip-container[_ngcontent-%COMP%]:hover   .tooltip-text[_ngcontent-%COMP%]{visibility:visible;opacity:1}']})};export{te as DoctorsListComponent};
