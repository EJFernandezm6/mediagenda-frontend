import{a as Q}from"./chunk-DLWRNSCF.js";import{e as P}from"./chunk-G2AI53GJ.js";import{a as X,b as Y,c as Z,f as $,o as ee}from"./chunk-FIV2NONW.js";import{a as te}from"./chunk-7EX6GRW6.js";import"./chunk-MZ3EZVY4.js";import{$a as c,Dc as U,Ia as D,Lc as A,Ma as h,Mc as B,Oc as O,Qb as V,Qc as j,Rb as I,S as C,Sb as F,Sc as z,Ta as m,Tc as q,Ua as t,Va as i,Vb as N,Vc as G,Wa as u,X as p,Y as g,Z as E,Za as S,_ as k,_a as f,_c as R,a as M,ad as H,db as L,gb as l,hb as w,hd as J,ib as b,id as K,lb as x,mb as v,nb as _,qb as T,ra as y,sc as W,ta as r}from"./chunk-SWYYGHOG.js";var ne=d=>["/app/doctors",d];function re(d,a){d&1&&(t(0,"span",45),l(1,"Activo"),i())}function oe(d,a){d&1&&(t(0,"span",46),l(1,"Inactivo"),i())}function le(d,a){if(d&1&&(t(0,"div",47),u(1,"lucide-icon",48),t(2,"span",49),l(3),i()()),d&2){let e=c().$implicit,o=c();r(),m("img",o.icons.AlertCircle),r(2),b(" Faltan datos: ",o.getMissingFields(e).join(", ")," ")}}function ae(d,a){if(d&1){let e=S();t(0,"div",17)(1,"div",18)(2,"div",19)(3,"div",20)(4,"h3",21),l(5),i(),h(6,re,2,0,"span",22)(7,oe,2,0,"span",23)(8,le,4,2,"div",24),i(),t(9,"div",25)(10,"span",26),u(11,"lucide-icon",27),l(12),i(),t(13,"span",26),u(14,"lucide-icon",27),l(15),i()(),t(16,"div",28),u(17,"lucide-icon",29),t(18,"span",30),l(19),i(),t(20,"span",31),l(21),i()()(),t(22,"img",32,0),f("error",function(){let n=p(e).$implicit,s=L(23);return g(s.src="https://ui-avatars.com/api/?name="+n.fullName+"&background=EBF4FF&color=7F9CF5")}),i()(),t(24,"div")(25,"div",33)(26,"div",34)(27,"a",35),u(28,"lucide-icon",12),l(29," WhatsApp "),i()(),t(30,"div",36)(31,"a",37),u(32,"lucide-icon",12),l(33," Email "),i()()(),t(34,"div",38)(35,"div",39)(36,"button",40),f("click",function(){let n=p(e).$implicit,s=c();return g(s.toggleActive(n))}),u(37,"lucide-icon",8),i()(),u(38,"div",41),t(39,"button",42),f("click",function(){let n=p(e).$implicit,s=c();return g(s.openModal(n))}),l(40,"Editar"),i(),u(41,"div",41),t(42,"a",43),l(43,"Detalle"),i(),u(44,"div",41),t(45,"button",44),f("click",function(){let n=p(e).$implicit,s=c();return g(s.delete(n.id))}),l(46,"Eliminar"),i()()()()}if(d&2){let e=a.$implicit,o=c();r(5),w(e.fullName),r(),m("ngIf",e.active),r(),m("ngIf",!e.active),r(),m("ngIf",o.isMissingData(e)),r(3),m("img",o.icons.FileBadge),r(),b(" CMP: ",e.cmp," "),r(2),m("img",o.icons.MapPin),r(),b(" DNI: ",e.dni," "),r(2),m("img",o.icons.Star),r(2),w(e.rating||"0.0"),r(2),b("(",e.reviewsCount||0," reviews)"),r(),m("src",e.photoUrl||"https://ui-avatars.com/api/?name="+e.fullName+"&background=EBF4FF&color=7F9CF5",y),r(5),m("href","https://wa.me/"+e.phone,y),r(),m("img",o.icons.MessageCircle),r(3),m("href","mailto:"+e.email,y),r(),m("img",o.icons.Mail),r(4),m("ngClass",e.active?"text-emerald-600 bg-emerald-50 hover:bg-emerald-100":"text-red-500 bg-red-50 hover:bg-red-100")("title",e.active?"Desactivar":"Activar"),r(),m("img",o.icons.Power),r(5),m("routerLink",T(20,ne,e.id))}}function se(d,a){if(d&1&&(t(0,"div",81)(1,"div",82)(2,"div",83),u(3,"lucide-icon",84),i(),t(4,"div",85)(5,"h3",86),l(6,"Perfil Incompleto"),i(),t(7,"div",87)(8,"p"),l(9,"Este perfil requiere atenci\xF3n inmediata. Faltan los siguientes campos: "),t(10,"span",88),l(11),i(),l(12,". "),i()()()()()),d&2){let e=c(2);r(3),m("img",e.icons.AlertCircle),r(8),w(e.getMissingFields(e.form).join(", "))}}function me(d,a){d&1&&(t(0,"span"),l(1,"Guardando..."),i())}function de(d,a){d&1&&(t(0,"span"),l(1,"Guardar"),i())}function ce(d,a){if(d&1){let e=S();t(0,"div",50)(1,"div",51)(2,"div",52),f("click",function(){p(e);let n=c();return g(n.closeModal())}),i(),t(3,"div",53)(4,"div",54)(5,"button",55),f("click",function(){p(e);let n=c();return g(n.closeModal())}),t(6,"span",56),l(7,"Cerrar"),i(),E(),t(8,"svg",57),u(9,"path",58),i()()(),k(),t(10,"div",59)(11,"h3",60),l(12),i(),t(13,"div",61),h(14,se,13,2,"div",62),t(15,"div",63)(16,"div",64)(17,"label",65),l(18,"Foto de perfil"),i(),t(19,"div",66),u(20,"img",67),t(21,"input",68),f("change",function(n){p(e);let s=c();return g(s.onFileSelected(n))}),i()()(),t(22,"div",69)(23,"label",65),l(24,"Nombre completo "),t(25,"span",70),l(26,"*"),i()(),t(27,"input",71),_("ngModelChange",function(n){p(e);let s=c();return v(s.form.fullName,n)||(s.form.fullName=n),g(n)}),i()(),t(28,"div",72)(29,"label",65),l(30,"DNI "),t(31,"span",70),l(32,"*"),i()(),t(33,"input",71),_("ngModelChange",function(n){p(e);let s=c();return v(s.form.dni,n)||(s.form.dni=n),g(n)}),i()(),t(34,"div",72)(35,"label",65),l(36,"CMP / colegiatura "),t(37,"span",70),l(38,"*"),i()(),t(39,"input",71),_("ngModelChange",function(n){p(e);let s=c();return v(s.form.cmp,n)||(s.form.cmp=n),g(n)}),i()(),t(40,"div",72)(41,"label",65),l(42,"Tel\xE9fono "),t(43,"span",70),l(44,"*"),i()(),t(45,"input",71),_("ngModelChange",function(n){p(e);let s=c();return v(s.form.phone,n)||(s.form.phone=n),g(n)}),i()(),t(46,"div",72)(47,"label",65),l(48,"Email"),i(),t(49,"input",73),_("ngModelChange",function(n){p(e);let s=c();return v(s.form.email,n)||(s.form.email=n),g(n)}),i()(),t(50,"div",74)(51,"input",75),_("ngModelChange",function(n){p(e);let s=c();return v(s.form.active,n)||(s.form.active=n),g(n)}),i(),t(52,"label",76),l(53,"Activo (disponible para turnos)"),i()()()(),t(54,"div",77)(55,"button",78),f("click",function(){p(e);let n=c();return g(n.save())}),h(56,me,2,0,"span",79)(57,de,2,0,"span",79),i(),t(58,"button",80),f("click",function(){p(e);let n=c();return g(n.closeModal())}),l(59," Cancelar "),i()()()()()()}if(d&2){let e=c();r(12),b(" ",e.editingId?"Editar":"Nuevo"," especialista "),r(2),m("ngIf",e.editingId&&e.isMissingData(e.form)),r(6),m("src",e.form.photoUrl||"https://ui-avatars.com/api/?background=random",y),r(7),x("ngModel",e.form.fullName),r(6),x("ngModel",e.form.dni),r(6),x("ngModel",e.form.cmp),r(6),x("ngModel",e.form.phone),r(4),x("ngModel",e.form.email),r(2),x("ngModel",e.form.active),r(4),m("disabled",e.isSaving||!e.isFormValid),r(),m("ngIf",e.isSaving),r(),m("ngIf",!e.isSaving)}}var ie=class d{service=C(te);confirmService=C(Q);icons={Plus:z,Pencil:j,Trash2:H,Search:G,Star:R,MessageCircle:O,Mail:A,FileBadge:U,MapPin:B,AlertCircle:W,Power:q};doctors=this.service.doctors;searchTerm="";isModalOpen=!1;isSaving=!1;editingId=null;form={fullName:"",dni:"",cmp:"",email:"",phone:"",active:!0,photoUrl:""};get filteredDoctors(){return this.doctors().filter(a=>a.fullName.toLowerCase().includes(this.searchTerm.toLowerCase())||a.cmp&&a.cmp.includes(this.searchTerm))}get isFormValid(){return this.form.fullName?.trim()&&this.form.phone?.trim()&&this.form.cmp?.trim()&&this.form.dni?.trim()}isMissingData(a){return!a.fullName?.trim()||!a.phone?.trim()||!a.cmp?.trim()||!a.dni?.trim()}getMissingFields(a){let e=[];return a.fullName?.trim()||e.push("Nombre"),a.phone?.trim()||e.push("Tel\xE9fono"),a.cmp?.trim()||e.push("CMP"),a.dni?.trim()||e.push("DNI"),e}openModal(a){a?(this.editingId=a.id,this.form=M({},a)):(this.editingId=null,this.form={fullName:"",dni:"",cmp:"",email:"",phone:"",active:!0,photoUrl:"https://ui-avatars.com/api/?background=random"}),this.isModalOpen=!0}closeModal(){this.isModalOpen=!1}save(){this.isSaving=!0,(!this.form.photoUrl||this.form.photoUrl.includes("ui-avatars"))&&(this.form.photoUrl?.startsWith("data:image")||(this.form.photoUrl=`https://ui-avatars.com/api/?name=${encodeURIComponent(this.form.fullName)}&background=random`)),(this.editingId?this.service.updateDoctor(this.editingId,this.form):this.service.addDoctor(this.form)).subscribe({next:()=>{this.isSaving=!1,this.closeModal()},error:e=>{console.error("Error saving doctor:",e),this.isSaving=!1,e.status===500?alert("Error interno. Es posible que el correo ya est\xE9 registrado o haya datos inv\xE1lidos."):alert("Ocurri\xF3 un error al guardar el m\xE9dico. Por favor intente nuevamente.")}})}toggleActive(a){this.service.updateDoctor(a.id,{active:!a.active}).subscribe()}onFileSelected(a){let e=a.target.files[0];if(e){let o=new FileReader;o.onload=n=>{this.form.photoUrl=n.target.result},o.readAsDataURL(e)}}async delete(a){await this.confirmService.confirm({title:"Eliminar Especialista",message:"\xBFEst\xE1s seguro de que deseas eliminar permanentemente a este m\xE9dico? Esta acci\xF3n no se puede deshacer.",confirmText:"Eliminar",cancelText:"Cancelar"})&&this.service.deleteDoctor(a).subscribe()}static \u0275fac=function(e){return new(e||d)};static \u0275cmp=D({type:d,selectors:[["app-doctors-list"]],decls:19,vars:5,consts:[["img",""],[1,"px-4","sm:px-6","lg:px-8"],[1,"sm:flex","sm:items-center"],[1,"sm:flex-auto"],[1,"text-xl","font-semibold","text-gray-900"],[1,"mt-2","text-sm","text-gray-700"],[1,"mt-4","sm:ml-16","sm:mt-0","sm:flex-none"],[1,"block","rounded-md","bg-blue-600","px-3","py-2","text-center","text-sm","font-semibold","text-white","shadow-sm","hover:bg-blue-500","flex","items-center","gap-2",3,"click"],[1,"w-4","h-4",3,"img"],[1,"mt-8","flow-root"],[1,"mb-6","relative","max-w-sm"],[1,"absolute","inset-y-0","left-0","pl-3","flex","items-center","pointer-events-none"],[1,"h-5","w-5","text-gray-400",3,"img"],["type","text","placeholder","Buscar por nombre o CMP...",1,"block","w-full","pl-10","pr-3","py-2","border","border-gray-300","rounded-md","leading-5","bg-white","placeholder-gray-500","focus:outline-none","focus:ring-blue-500","focus:border-blue-500","sm:text-sm",3,"ngModelChange","ngModel"],[1,"grid","grid-cols-1","gap-6","sm:grid-cols-2","lg:grid-cols-3"],["class","col-span-1 divide-y divide-gray-200 rounded-lg bg-white shadow border border-gray-100 transition-all hover:shadow-md",4,"ngFor","ngForOf"],["class","fixed inset-0 z-20 w-screen overflow-y-auto",4,"ngIf"],[1,"col-span-1","divide-y","divide-gray-200","rounded-lg","bg-white","shadow","border","border-gray-100","transition-all","hover:shadow-md"],[1,"flex","w-full","items-center","justify-between","space-x-6","p-6"],[1,"flex-1","min-w-0"],[1,"flex","items-center","space-x-3"],[1,"truncate","text-sm","font-medium","text-gray-900"],["class","inline-flex flex-shrink-0 items-center rounded-full bg-green-50 px-1.5 py-0.5 text-xs font-medium text-green-700 ring-1 ring-inset ring-green-600/20",4,"ngIf"],["class","inline-flex flex-shrink-0 items-center rounded-full bg-gray-50 px-1.5 py-0.5 text-xs font-medium text-gray-600 ring-1 ring-inset ring-gray-500/10",4,"ngIf"],["class","tooltip-container cursor-help",4,"ngIf"],[1,"mt-1","flex","items-center","gap-3","text-sm","text-gray-500"],[1,"flex","items-center","gap-1"],[1,"w-3","h-3",3,"img"],[1,"mt-2","flex","items-center","text-sm","text-yellow-500"],[1,"w-4","h-4","fill-current",3,"img"],[1,"ml-1","text-gray-900","font-semibold"],[1,"ml-1","text-gray-400"],["alt","",1,"h-14","w-14","flex-shrink-0","rounded-full","bg-gray-300","object-cover",3,"error","src"],[1,"-mt-px","flex","divide-x","divide-gray-200"],[1,"flex","w-0","flex-1"],["target","_blank",1,"relative","-mr-px","inline-flex","w-0","flex-1","items-center","justify-center","gap-x-3","rounded-bl-lg","border","border-transparent","py-4","text-sm","font-semibold","text-gray-900","hover:text-gray-600",3,"href"],[1,"-ml-px","flex","w-0","flex-1"],[1,"relative","inline-flex","w-0","flex-1","items-center","justify-center","gap-x-3","rounded-br-lg","border","border-transparent","py-4","text-sm","font-semibold","text-gray-900","hover:text-gray-600",3,"href"],[1,"border-t","border-gray-100","flex","items-center"],[1,"px-3"],[1,"p-2","rounded-lg","transition-all",3,"click","ngClass","title"],[1,"w-px","h-10","bg-gray-100"],[1,"flex-1","py-3","text-sm","text-blue-600","font-medium","hover:bg-blue-50","transition-colors",3,"click"],[1,"flex-1","py-3","text-sm","text-gray-600","font-medium","hover:bg-gray-50","transition-colors","text-center",3,"routerLink"],[1,"flex-1","py-3","text-sm","text-red-600","font-medium","hover:bg-red-50","transition-colors",3,"click"],[1,"inline-flex","flex-shrink-0","items-center","rounded-full","bg-green-50","px-1.5","py-0.5","text-xs","font-medium","text-green-700","ring-1","ring-inset","ring-green-600/20"],[1,"inline-flex","flex-shrink-0","items-center","rounded-full","bg-gray-50","px-1.5","py-0.5","text-xs","font-medium","text-gray-600","ring-1","ring-inset","ring-gray-500/10"],[1,"tooltip-container","cursor-help"],[1,"w-4","h-4","text-amber-500","animate-pulse",3,"img"],[1,"tooltip-text"],[1,"fixed","inset-0","z-20","w-screen","overflow-y-auto"],[1,"flex","min-h-full","items-end","justify-center","p-4","text-center","sm:items-center","sm:p-0"],[1,"fixed","inset-0","bg-gray-500","bg-opacity-75","transition-opacity",3,"click"],[1,"relative","transform","overflow-hidden","rounded-lg","bg-white","px-4","pb-4","pt-5","text-left","shadow-xl","transition-all","sm:my-8","sm:w-full","sm:max-w-lg","sm:p-6"],[1,"absolute","right-0","top-0","hidden","pr-4","pt-4","sm:block"],["type","button",1,"rounded-md","bg-white","text-gray-400","hover:text-gray-500",3,"click"],[1,"sr-only"],["fill","none","viewBox","0 0 24 24","stroke-width","1.5","stroke","currentColor",1,"h-6","w-6"],["stroke-linecap","round","stroke-linejoin","round","d","M6 18L18 6M6 6l12 12"],[1,"mt-3","w-full"],[1,"text-base","font-semibold","leading-6","text-gray-900","text-center","sm:text-left"],[1,"mt-6"],["class","mb-6 rounded-lg bg-amber-50 p-4 border-l-4 border-amber-400",4,"ngIf"],[1,"grid","grid-cols-1","gap-x-6","gap-y-4","sm:grid-cols-6"],[1,"sm:col-span-6","mb-4"],[1,"block","text-sm","font-medium","leading-6","text-gray-900","mb-2"],[1,"flex","items-center","gap-x-3"],["alt","Preview",1,"h-12","w-12","rounded-full","object-cover","bg-gray-50",3,"src"],["type","file","accept","image/*",1,"rounded-md","bg-white","px-2.5","py-1.5","text-sm","font-semibold","text-gray-900","shadow-sm","ring-1","ring-inset","ring-gray-300","hover:bg-gray-50",3,"change"],[1,"sm:col-span-6","mb-2"],[1,"text-red-500"],["type","text",1,"block","w-full","rounded-md","border-0","py-2.5","px-6","text-gray-900","shadow-sm","ring-1","ring-inset","ring-gray-300","placeholder:text-gray-400","focus:ring-2","focus:ring-inset","focus:ring-blue-600","sm:text-sm","sm:leading-6",3,"ngModelChange","ngModel"],[1,"sm:col-span-3","mb-2"],["type","email",1,"block","w-full","rounded-md","border-0","py-2.5","px-6","text-gray-900","shadow-sm","ring-1","ring-inset","ring-gray-300","placeholder:text-gray-400","focus:ring-2","focus:ring-inset","focus:ring-blue-600","sm:text-sm","sm:leading-6",3,"ngModelChange","ngModel"],[1,"sm:col-span-6","flex","items-center","mt-2"],["type","checkbox",1,"h-4","w-4","rounded","border-gray-300","text-blue-600","focus:ring-blue-600",3,"ngModelChange","ngModel"],[1,"ml-2","block","text-sm","text-gray-900"],[1,"mt-8","sm:flex","sm:flex-row-reverse"],["type","button",1,"inline-flex","w-full","justify-center","rounded-md","bg-blue-600","px-3","py-2","text-sm","font-semibold","text-white","shadow-sm","hover:bg-blue-500","sm:ml-3","sm:w-auto","disabled:opacity-50","disabled:cursor-not-allowed",3,"click","disabled"],[4,"ngIf"],["type","button",1,"mt-3","inline-flex","w-full","justify-center","rounded-md","bg-white","px-3","py-2","text-sm","font-semibold","text-gray-900","shadow-sm","ring-1","ring-inset","ring-gray-300","hover:bg-gray-50","sm:mt-0","sm:w-auto",3,"click"],[1,"mb-6","rounded-lg","bg-amber-50","p-4","border-l-4","border-amber-400"],[1,"flex"],[1,"flex-shrink-0"],[1,"h-5","w-5","text-amber-400",3,"img"],[1,"ml-3"],[1,"text-sm","font-medium","text-amber-800"],[1,"mt-2","text-sm","text-amber-700"],[1,"font-bold","underline"]],template:function(e,o){e&1&&(t(0,"div",1)(1,"div",2)(2,"div",3)(3,"h1",4),l(4,"Especialistas"),i(),t(5,"p",5),l(6,"Gesti\xF3n de especialistas, colegiatura y estado."),i()(),t(7,"div",6)(8,"button",7),f("click",function(){return o.openModal()}),u(9,"lucide-icon",8),l(10," Nuevo especialista "),i()()(),t(11,"div",9)(12,"div",10)(13,"div",11),u(14,"lucide-icon",12),i(),t(15,"input",13),_("ngModelChange",function(s){return v(o.searchTerm,s)||(o.searchTerm=s),s}),i()(),t(16,"div",14),h(17,ae,47,22,"div",15),i()()(),h(18,ce,60,12,"div",16)),e&2&&(r(9),m("img",o.icons.Plus),r(5),m("img",o.icons.Search),r(),x("ngModel",o.searchTerm),r(2),m("ngForOf",o.filteredDoctors),r(),m("ngIf",o.isModalOpen))},dependencies:[N,V,I,F,K,J,ee,Y,X,Z,$,P],styles:['.tooltip-container[_ngcontent-%COMP%]{position:relative;display:inline-block}.tooltip-text[_ngcontent-%COMP%]{visibility:hidden;width:160px;background-color:#1e293b;color:#fff;text-align:center;border-radius:6px;padding:8px;position:absolute;z-index:100;top:150%;left:50%;margin-left:-80px;opacity:0;transition:opacity .2s;font-size:.75rem;pointer-events:none;box-shadow:0 10px 15px -3px #0000001a}.tooltip-text[_ngcontent-%COMP%]:after{content:"";position:absolute;bottom:100%;left:50%;margin-left:-5px;border-width:5px;border-style:solid;border-color:transparent transparent #1e293b transparent}.tooltip-container[_ngcontent-%COMP%]:hover   .tooltip-text[_ngcontent-%COMP%]{visibility:visible;opacity:1}']})};export{ie as DoctorsListComponent};
