<div class="mb-8" *ngIf="recommendations.length > 0">
    <div class="flex items-center gap-2 mb-4">
        <lucide-icon [img]="icons.Lightbulb" class="w-5 h-5 text-purple-600"></lucide-icon>
        <h3 class="text-lg font-bold text-gray-900">Recomendaciones Inteligentes (AI)</h3>
    </div>

    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
        <div *ngFor="let rec of recommendations"
            [class]="'p-4 rounded-xl border flex flex-col gap-3 transition-all hover:shadow-md cursor-default ' + getColors(rec.type)">

            <div class="flex justify-between items-start">
                <div class="flex items-center gap-2">
                    <lucide-icon [img]="getIcon(rec.type)" [class]="'w-5 h-5 ' + getIconColor(rec.type)"></lucide-icon>
                    <span class="font-semibold text-sm opacity-90">{{ rec.type === 'OPPORTUNITY' ? 'Oportunidad' :
                        rec.type === 'WARNING' ? 'Atención' : 'Info' }}</span>
                </div>
                <span *ngIf="rec.metric"
                    [class]="'text-xs font-bold px-2 py-1 rounded-full bg-white/50 ' + getIconColor(rec.type)">
                    {{ rec.metric }}
                </span>
            </div>

            <div>
                <h4 class="font-bold text-base mb-1">{{ rec.title }}</h4>
                <p class="text-sm opacity-80 leading-snug">{{ rec.description }}</p>
            </div>

            <button *ngIf="rec.action"
                class="mt-auto self-start text-xs font-bold underline hover:no-underline opacity-90 hover:opacity-100 transition-opacity">
                {{ rec.action }} →
            </button>
        </div>
    </div>
</div>