import{a as oe}from"./chunk-TUKF73M7.js";import{d as k}from"./chunk-G2AI53GJ.js";import{a as ie}from"./chunk-SL64MAZG.js";import{b as K,c as Q,f as X,h as Y,i as Z,j as $,k as ee,o as te}from"./chunk-FIV2NONW.js";import{a as ne}from"./chunk-7EX6GRW6.js";import"./chunk-MZ3EZVY4.js";import{$a as d,$c as R,Cc as O,Ec as B,Ia as L,Ma as _,Qc as j,Rb as T,S as w,Sb as M,Sc as z,Ta as m,Ua as i,Va as t,Vb as V,Vc as G,Wa as f,X as p,Y as g,Z as P,Za as b,_ as I,_a as x,a as E,dd as U,ec as N,gb as a,gc as D,hb as S,hd as q,ib as u,id as J,lb as y,mb as h,mc as W,nb as v,ob as C,oc as F,rc as H,ta as o,yc as A}from"./chunk-SWYYGHOG.js";function ae(n,s){if(n&1){let e=b();i(0,"div",26)(1,"div",27)(2,"label",28)(3,"input",29),x("change",function(){p(e);let l=d();return g(l.toggleColumn("name"))}),t(),a(4," Paciente "),t(),i(5,"label",28)(6,"input",29),x("change",function(){p(e);let l=d();return g(l.toggleColumn("email"))}),t(),a(7," Email "),t(),i(8,"label",28)(9,"input",29),x("change",function(){p(e);let l=d();return g(l.toggleColumn("dni"))}),t(),a(10," DNI "),t(),i(11,"label",28)(12,"input",29),x("change",function(){p(e);let l=d();return g(l.toggleColumn("phone"))}),t(),a(13," Tel\xE9fono "),t(),i(14,"label",28)(15,"input",29),x("change",function(){p(e);let l=d();return g(l.toggleColumn("age"))}),t(),a(16," Edad "),t(),i(17,"label",28)(18,"input",29),x("change",function(){p(e);let l=d();return g(l.toggleColumn("gender"))}),t(),a(19," G\xE9nero "),t(),i(20,"label",28)(21,"input",29),x("change",function(){p(e);let l=d();return g(l.toggleColumn("lastVisit"))}),t(),a(22," \xDAltima visita "),t()()()}if(n&2){let e=d();o(3),m("checked",e.columns.name),o(3),m("checked",e.columns.email),o(3),m("checked",e.columns.dni),o(3),m("checked",e.columns.phone),o(3),m("checked",e.columns.age),o(3),m("checked",e.columns.gender),o(3),m("checked",e.columns.lastVisit)}}function le(n,s){n&1&&(i(0,"th",30),a(1," Paciente"),t())}function se(n,s){n&1&&(i(0,"th",31),a(1," Email"),t())}function me(n,s){n&1&&(i(0,"th",31),a(1," DNI"),t())}function de(n,s){n&1&&(i(0,"th",31),a(1," Tel\xE9fono"),t())}function ce(n,s){n&1&&(i(0,"th",31),a(1," Edad"),t())}function pe(n,s){n&1&&(i(0,"th",31),a(1," G\xE9nero"),t())}function ge(n,s){n&1&&(i(0,"th",31),a(1," \xDAltima visita"),t())}function xe(n,s){n&1&&(i(0,"th",32)(1,"span",33),a(2,"Acciones"),t()())}function ue(n,s){if(n&1&&(i(0,"td",40)(1,"div",41)(2,"div",42)(3,"span",43)(4,"span",44),a(5),t()()(),i(6,"div",45)(7,"div",46),a(8),t()()()()),n&2){let e=d().$implicit;o(5),S(e.fullName.charAt(0)),o(3),S(e.fullName)}}function _e(n,s){if(n&1&&(i(0,"td",47),a(1),t()),n&2){let e=d().$implicit;o(),u(" ",e.email," ")}}function fe(n,s){if(n&1&&(i(0,"td",47),a(1),t()),n&2){let e=d().$implicit;o(),u(" ",e.dni," ")}}function ye(n,s){if(n&1&&(i(0,"td",47),a(1),t()),n&2){let e=d().$implicit;o(),u(" ",e.phone," ")}}function he(n,s){if(n&1&&(i(0,"td",47),a(1),t()),n&2){let e=d().$implicit;o(),u(" ",e.age," a\xF1os ")}}function ve(n,s){if(n&1&&(i(0,"td",47),a(1),t()),n&2){let e=d().$implicit;o(),u(" ",e.gender," ")}}function we(n,s){if(n&1&&(i(0,"td",47),a(1),t()),n&2){let e=d().$implicit;o(),u(" ",e.lastVisit||"N/A"," ")}}function be(n,s){if(n&1){let e=b();i(0,"td",48)(1,"button",49),x("click",function(){p(e);let l=d().$implicit,c=d();return g(c.editPatient(l))}),f(2,"lucide-icon",7),t(),i(3,"button",50),x("click",function(){p(e);let l=d().$implicit,c=d();return g(c.toggleHistory(l.patientId))}),f(4,"lucide-icon",7),t()()}if(n&2){let e=d().$implicit,r=d();o(2),m("img",r.icons.Pencil),o(2),m("img",r.expandedPatientId===e.patientId?r.icons.ChevronUp:r.icons.ChevronDown)}}function Ce(n,s){n&1&&(i(0,"div",58),P(),i(1,"svg",59),f(2,"circle",60)(3,"path",61),t(),I(),i(4,"p",62),a(5,"Cargando historial..."),t()())}function Se(n,s){if(n&1&&(i(0,"div",63),f(1,"lucide-icon",64),i(2,"p",65),a(3,"No hay consultas registradas."),t()()),n&2){let e=d(3);o(),m("img",e.icons.Activity)}}function Ee(n,s){if(n&1&&(i(0,"tr")(1,"td",72),a(2),t(),i(3,"td",73),a(4),t(),i(5,"td",73),a(6),t(),i(7,"td",74),a(8),t(),i(9,"td",74),a(10),t(),i(11,"td",75),a(12),t()()),n&2){let e=s.$implicit,r=d(4);o(2),u(" ",e.appointmentDate," "),o(2),u(" ",r.getSpecialtyName(e.specialtyId)," "),o(2),u(" ",r.getDoctorName(e.doctorId)," "),o(),m("title",C(e.diagnosis)),o(),u(" ",e.diagnosis," "),o(),m("title",C(e.treatment)),o(),u(" ",e.treatment," "),o(),m("title",C(e.notes)),o(),u(" ",e.notes," ")}}function Pe(n,s){if(n&1&&(i(0,"div",66)(1,"table",67)(2,"thead")(3,"tr")(4,"th",68),a(5,"Fecha"),t(),i(6,"th",69),a(7,"Especialidad"),t(),i(8,"th",69),a(9,"Doctor"),t(),i(10,"th",69),a(11,"Diagn\xF3stico"),t(),i(12,"th",69),a(13,"Tratamiento"),t(),i(14,"th",69),a(15,"Notas"),t()()(),i(16,"tbody",70),_(17,Ee,13,12,"tr",71),t()()()),n&2){let e=d(3);o(17),m("ngForOf",e.patientHistory)}}function Ie(n,s){if(n&1&&(i(0,"tr",20)(1,"td",51)(2,"div",52)(3,"h3",53),f(4,"lucide-icon",54),a(5," Historial de visitas "),t(),_(6,Ce,6,0,"div",55)(7,Se,4,1,"div",56)(8,Pe,18,1,"div",57),t()()()),n&2){let e=d(2);o(4),m("img",e.icons.FileText),o(2),m("ngIf",e.isLoadingHistory),o(),m("ngIf",!e.isLoadingHistory&&e.patientHistory.length===0),o(),m("ngIf",!e.isLoadingHistory&&e.patientHistory.length>0)}}function Le(n,s){if(n&1&&(i(0,"tbody",34)(1,"tr",35),_(2,ue,9,2,"td",36)(3,_e,2,1,"td",37)(4,fe,2,1,"td",37)(5,ye,2,1,"td",37)(6,he,2,1,"td",37)(7,ve,2,1,"td",37)(8,we,2,1,"td",37)(9,be,5,2,"td",38),t(),_(10,Ie,9,4,"tr",39),t()),n&2){let e=s.$implicit,r=d();o(2),m("ngIf",r.columns.name),o(),m("ngIf",r.columns.email),o(),m("ngIf",r.columns.dni),o(),m("ngIf",r.columns.phone),o(),m("ngIf",r.columns.age),o(),m("ngIf",r.columns.gender),o(),m("ngIf",r.columns.lastVisit),o(),m("ngIf",r.columns.actions),o(),m("ngIf",r.expandedPatientId===e.patientId)}}function Te(n,s){if(n&1){let e=b();i(0,"div",76)(1,"div",77)(2,"div",78),x("click",function(){p(e);let l=d();return g(l.closeModal())}),t(),i(3,"div",79)(4,"h3",80),a(5,"Registrar paciente"),t(),i(6,"div",81)(7,"div",82)(8,"label",83),a(9,"Nombre completo"),t(),i(10,"input",84),v("ngModelChange",function(l){p(e);let c=d();return h(c.form.fullName,l)||(c.form.fullName=l),g(l)}),t()(),i(11,"div",85)(12,"label",83),a(13,"DNI"),t(),i(14,"input",84),v("ngModelChange",function(l){p(e);let c=d();return h(c.form.dni,l)||(c.form.dni=l),g(l)}),t()(),i(15,"div",85)(16,"label",83),a(17,"Tel\xE9fono"),t(),i(18,"input",84),v("ngModelChange",function(l){p(e);let c=d();return h(c.form.phone,l)||(c.form.phone=l),g(l)}),t()(),i(19,"div",85)(20,"label",83),a(21,"Edad"),t(),i(22,"input",86),v("ngModelChange",function(l){p(e);let c=d();return h(c.form.age,l)||(c.form.age=l),g(l)}),t()(),i(23,"div",85)(24,"label",83),a(25,"G\xE9nero"),t(),i(26,"select",87),v("ngModelChange",function(l){p(e);let c=d();return h(c.form.gender,l)||(c.form.gender=l),g(l)}),i(27,"option",88),a(28,"Masculino"),t(),i(29,"option",89),a(30,"Femenino"),t()()(),i(31,"div",82)(32,"label",83),a(33,"Email"),t(),i(34,"input",90),v("ngModelChange",function(l){p(e);let c=d();return h(c.form.email,l)||(c.form.email=l),g(l)}),t()()(),i(35,"div",91)(36,"button",92),x("click",function(){p(e);let l=d();return g(l.save())}),a(37,"Guardar"),t(),i(38,"button",93),x("click",function(){p(e);let l=d();return g(l.closeModal())}),a(39,"Cancelar"),t()()()()()}if(n&2){let e=d();o(10),y("ngModel",e.form.fullName),o(4),y("ngModel",e.form.dni),o(4),y("ngModel",e.form.phone),o(4),y("ngModel",e.form.age),o(4),y("ngModel",e.form.gender),o(8),y("ngModel",e.form.email)}}var re=class n{service=w(oe);router=w(k);doctorService=w(ne);specialtyService=w(ie);icons={Plus:z,Search:G,FileText:B,User:U,Pencil:j,ChevronDown:F,ChevronUp:H,Stethoscope:R,Activity:N,Calendar:W,ArrowRight:D,Eye:O,Columns:A};patients=this.service.patients;searchTerm="";showColumnFilter=!1;columns={name:!0,email:!0,dni:!0,phone:!0,age:!0,gender:!0,lastVisit:!0,actions:!0};toggleColumn(s){this.columns[s]=!this.columns[s]}expandedPatientId=null;patientHistory=[];isLoadingHistory=!1;isModalOpen=!1;form={fullName:"",dni:"",email:"",phone:"",age:18,gender:"M"};get filteredPatients(){return this.patients().filter(s=>s.fullName.toLowerCase().includes(this.searchTerm.toLowerCase())||s.dni.includes(this.searchTerm))}toggleHistory(s){this.expandedPatientId===s?(this.expandedPatientId=null,this.patientHistory=[]):(this.expandedPatientId=s,this.isLoadingHistory=!0,this.service.getPatientHistory(s).subscribe({next:e=>{this.patientHistory=e,this.isLoadingHistory=!1},error:()=>this.isLoadingHistory=!1}))}getDoctorName(s){return this.doctorService.doctors().find(e=>e.id===s)?.fullName||"Desconocido"}getSpecialtyName(s){return this.specialtyService.specialties().find(e=>e.specialtyId===s)?.name||"General"}editPatient(s){this.form=E({},s),this.isModalOpen=!0}openModal(){this.form={fullName:"",dni:"",email:"",phone:"",age:18,gender:"M"},this.isModalOpen=!0}closeModal(){this.isModalOpen=!1}save(){this.form.patientId?this.service.updatePatient(this.form.patientId,this.form).subscribe(()=>{this.closeModal()}):this.service.addPatient(this.form).subscribe(()=>{this.closeModal()})}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=L({type:n,selectors:[["app-patients-list"]],decls:36,vars:15,consts:[[1,"px-4","sm:px-6","lg:px-8"],[1,"sm:flex","sm:items-center"],[1,"sm:flex-auto"],[1,"text-xl","font-semibold","text-gray-900"],[1,"mt-2","text-sm","text-gray-700"],[1,"mt-4","sm:ml-16","sm:mt-0","sm:flex-none"],[1,"block","rounded-md","bg-blue-600","px-3","py-2","text-center","text-sm","font-semibold","text-white","shadow-sm","hover:bg-blue-500","flex","items-center","gap-2",3,"click"],[1,"w-4","h-4",3,"img"],[1,"mt-8","flow-root"],[1,"mb-4","flex","justify-between","items-center"],[1,"relative","max-w-sm","flex-1"],[1,"absolute","inset-y-0","left-0","pl-3","flex","items-center","pointer-events-none"],[1,"h-5","w-5","text-gray-400",3,"img"],["type","text","placeholder","Buscar por DNI o nombre...",1,"block","w-full","pl-10","pr-3","py-2","border","border-gray-300","rounded-md","leading-5","bg-white","placeholder-gray-500","focus:outline-none","focus:ring-blue-500","focus:border-blue-500","sm:text-sm",3,"ngModelChange","ngModel"],[1,"relative","ml-4"],[1,"inline-flex","items-center","gap-2","rounded-md","bg-white","px-3","py-2","text-sm","font-semibold","text-gray-900","shadow-sm","ring-1","ring-inset","ring-gray-300","hover:bg-gray-50",3,"click"],[1,"w-4","h-4","text-gray-500",3,"img"],["class","absolute right-0 z-10 mt-2 w-56 origin-top-right rounded-md bg-white shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none",4,"ngIf"],[1,"overflow-x-auto","shadow","ring-1","ring-black","ring-opacity-5","sm:rounded-lg"],[1,"min-w-full","divide-y","divide-gray-300"],[1,"bg-gray-50"],["scope","col","class","py-3.5 pl-4 pr-3 text-left text-sm font-semibold text-gray-900 sm:pl-6",4,"ngIf"],["scope","col","class","px-3 py-3.5 text-left text-sm font-semibold text-gray-900",4,"ngIf"],["scope","col","class","relative py-3.5 pl-3 pr-4 sm:pr-6",4,"ngIf"],["class","bg-white border-b border-gray-200",4,"ngFor","ngForOf"],["class","fixed inset-0 z-20 w-screen overflow-y-auto",4,"ngIf"],[1,"absolute","right-0","z-10","mt-2","w-56","origin-top-right","rounded-md","bg-white","shadow-lg","ring-1","ring-black","ring-opacity-5","focus:outline-none"],[1,"py-1","px-2"],[1,"flex","items-center","px-4","py-2","text-sm","text-gray-700","hover:bg-gray-100","rounded","cursor-pointer"],["type","checkbox",1,"mr-2","rounded","text-blue-600","focus:ring-blue-500",3,"change","checked"],["scope","col",1,"py-3.5","pl-4","pr-3","text-left","text-sm","font-semibold","text-gray-900","sm:pl-6"],["scope","col",1,"px-3","py-3.5","text-left","text-sm","font-semibold","text-gray-900"],["scope","col",1,"relative","py-3.5","pl-3","pr-4","sm:pr-6"],[1,"sr-only"],[1,"bg-white","border-b","border-gray-200"],[1,"hover:bg-gray-50","transition-colors"],["class","whitespace-nowrap py-4 pl-4 pr-3 text-sm sm:pl-6",4,"ngIf"],["class","whitespace-nowrap px-3 py-4 text-sm text-gray-500",4,"ngIf"],["class","relative whitespace-nowrap py-4 pl-3 pr-4 text-right text-sm font-medium sm:pr-6",4,"ngIf"],["class","bg-gray-50",4,"ngIf"],[1,"whitespace-nowrap","py-4","pl-4","pr-3","text-sm","sm:pl-6"],[1,"flex","items-center"],[1,"h-10","w-10","flex-shrink-0"],[1,"inline-flex","h-10","w-10","items-center","justify-center","rounded-full","bg-blue-100"],[1,"font-medium","leading-none","text-blue-700"],[1,"ml-4"],[1,"font-medium","text-gray-900"],[1,"whitespace-nowrap","px-3","py-4","text-sm","text-gray-500"],[1,"relative","whitespace-nowrap","py-4","pl-3","pr-4","text-right","text-sm","font-medium","sm:pr-6"],[1,"text-blue-600","hover:text-blue-900","mr-4",3,"click"],[1,"text-gray-600","hover:text-gray-900","inline-flex","items-center","gap-1",3,"click"],["colspan","100%",1,"px-4","py-4","sm:px-6"],[1,"rounded-lg","bg-white","p-4","shadow-sm","ring-1","ring-gray-900/5"],[1,"text-sm","font-semibold","leading-6","text-gray-900","mb-4","flex","items-center","gap-2"],[1,"w-4","h-4","text-blue-500",3,"img"],["class","text-center py-4",4,"ngIf"],["class","text-center py-6",4,"ngIf"],["class","overflow-x-auto mt-4",4,"ngIf"],[1,"text-center","py-4"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24",1,"animate-spin","h-5","w-5","text-blue-500","mx-auto"],["cx","12","cy","12","r","10","stroke","currentColor","stroke-width","4",1,"opacity-25"],["fill","currentColor","d","M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z",1,"opacity-75"],[1,"text-xs","text-gray-500","mt-2"],[1,"text-center","py-6"],[1,"mx-auto","h-8","w-8","text-gray-300",3,"img"],[1,"mt-2","text-sm","text-gray-500"],[1,"overflow-x-auto","mt-4"],[1,"min-w-full","divide-y","divide-gray-200"],["scope","col",1,"py-2","pl-2","text-left","text-xs","font-medium","text-gray-500","uppercase","tracking-wider"],["scope","col",1,"py-2","text-left","text-xs","font-medium","text-gray-500","uppercase","tracking-wider"],[1,"divide-y","divide-gray-100","bg-white"],[4,"ngFor","ngForOf"],[1,"whitespace-nowrap","py-2","pl-2","text-xs","text-gray-900"],[1,"whitespace-nowrap","py-2","text-xs","text-gray-900"],[1,"whitespace-nowrap","py-2","text-xs","text-gray-900","max-w-xs","truncate",3,"title"],[1,"whitespace-nowrap","py-2","text-xs","text-gray-500","max-w-xs","truncate",3,"title"],[1,"fixed","inset-0","z-20","w-screen","overflow-y-auto"],[1,"flex","min-h-full","items-end","justify-center","p-4","text-center","sm:items-center","sm:p-0"],[1,"fixed","inset-0","bg-gray-500","bg-opacity-75","transition-opacity",3,"click"],[1,"relative","transform","overflow-hidden","rounded-lg","bg-white","px-4","pb-4","pt-5","text-left","shadow-xl","transition-all","sm:my-8","sm:w-full","sm:max-w-lg","sm:p-6"],[1,"text-base","font-semibold","leading-6","text-gray-900"],[1,"mt-4","grid","grid-cols-1","gap-4","sm:grid-cols-2"],[1,"sm:col-span-2","mb-4"],[1,"block","text-sm","font-medium","text-gray-700","mb-2"],["type","text",1,"mt-1","block","w-full","rounded-md","border-gray-300","py-1.5","border","px-4",3,"ngModelChange","ngModel"],[1,"mb-4"],["type","number",1,"mt-1","block","w-full","rounded-md","border-gray-300","py-1.5","border","px-4",3,"ngModelChange","ngModel"],[1,"mt-1","block","w-full","rounded-md","border-gray-300","py-1.5","border","px-4",3,"ngModelChange","ngModel"],["value","M"],["value","F"],["type","email",1,"mt-1","block","w-full","rounded-md","border-gray-300","py-1.5","border","px-2",3,"ngModelChange","ngModel"],[1,"mt-5","sm:mt-6","sm:flex","sm:flex-row-reverse"],["type","button",1,"inline-flex","w-full","justify-center","rounded-md","bg-blue-600","px-3","py-2","text-sm","font-semibold","text-white","shadow-sm","hover:bg-blue-500","sm:ml-3","sm:w-auto",3,"click"],["type","button",1,"mt-3","inline-flex","w-full","justify-center","rounded-md","bg-white","px-3","py-2","text-sm","font-semibold","text-gray-900","shadow-sm","ring-1","ring-inset","ring-gray-300","hover:bg-gray-50","sm:mt-0","sm:w-auto",3,"click"]],template:function(e,r){e&1&&(i(0,"div",0)(1,"div",1)(2,"div",2)(3,"h1",3),a(4,"Pacientes"),t(),i(5,"p",4),a(6,"Directorio de pacientes y accesos a historias cl\xEDnicas."),t()(),i(7,"div",5)(8,"button",6),x("click",function(){return r.openModal()}),f(9,"lucide-icon",7),a(10," Nuevo paciente "),t()()(),i(11,"div",8)(12,"div",9)(13,"div",10)(14,"div",11),f(15,"lucide-icon",12),t(),i(16,"input",13),v("ngModelChange",function(c){return h(r.searchTerm,c)||(r.searchTerm=c),c}),t()(),i(17,"div",14)(18,"button",15),x("click",function(){return r.showColumnFilter=!r.showColumnFilter}),f(19,"lucide-icon",16),a(20," Columnas "),t(),_(21,ae,23,7,"div",17),t()(),i(22,"div",18)(23,"table",19)(24,"thead",20)(25,"tr"),_(26,le,2,0,"th",21)(27,se,2,0,"th",22)(28,me,2,0,"th",22)(29,de,2,0,"th",22)(30,ce,2,0,"th",22)(31,pe,2,0,"th",22)(32,ge,2,0,"th",22)(33,xe,3,0,"th",23),t()(),_(34,Le,11,9,"tbody",24),t()()()(),_(35,Te,40,6,"div",25)),e&2&&(o(9),m("img",r.icons.Plus),o(6),m("img",r.icons.Search),o(),y("ngModel",r.searchTerm),o(3),m("img",r.icons.Columns),o(2),m("ngIf",r.showColumnFilter),o(5),m("ngIf",r.columns.name),o(),m("ngIf",r.columns.email),o(),m("ngIf",r.columns.dni),o(),m("ngIf",r.columns.phone),o(),m("ngIf",r.columns.age),o(),m("ngIf",r.columns.gender),o(),m("ngIf",r.columns.lastVisit),o(),m("ngIf",r.columns.actions),o(),m("ngForOf",r.filteredPatients),o(),m("ngIf",r.isModalOpen))},dependencies:[V,T,M,te,$,ee,K,Y,Z,Q,X,J,q],encapsulation:2})};export{re as PatientsListComponent};
